{"version":3,"sources":["../../src/renderers/builtin_action-button.js"],"names":["data","action","Error","on","template_type","elements","title","buttons","map","a","type","payload","url","typing","text","attachments","contentType","content","value","subtitle","actions","name"],"mappings":";;;;;;AAAA;AACA;;kBAEeA,QAAQ;AACrB,MAAIA,KAAKC,MAAL,KAAgB,eAApB,EAAqC;AACnC,UAAM,IAAIC,KAAJ,CAAU,2EAAV,CAAN;AACD;;AAED,SAAO,CACL;AACEC,QAAI,UADN;AAEEC,mBAAe,SAFjB;AAGEC,cAAU,CACR;AACEC,aAAON,KAAKM,KADd;AAEEC,eAAS,CAACP,KAAKC,MAAN,EAAcO,GAAd,CAAkBC,KAAK;AAC9B,YAAIA,EAAER,MAAF,KAAa,eAAjB,EAAkC;AAChC,iBAAO;AACLS,kBAAM,UADD;AAELJ,mBAAOG,EAAEH,KAFJ;AAGLK,qBAASF,EAAEH;AAHN,WAAP;AAKD,SAND,MAMO,IAAIG,EAAER,MAAF,KAAa,UAAjB,EAA6B;AAClC,iBAAO;AACLS,kBAAM,SADD;AAELJ,mBAAOG,EAAEH,KAFJ;AAGLM,iBAAKH,EAAEG;AAHF,WAAP;AAKD;AACF,OAdQ;AAFX,KADQ,CAHZ;;AAwBEC,YAAQb,KAAKa;AAxBf,GADK,EA2BL;AACEV,QAAI,SADN;AAEEO,UAAM,UAFR;AAGEI,UAAM,GAHR;AAIET,cAAU,CACR;AACEC,aAAON,KAAKM,KADd;AAEEC,eAAS,CAACP,KAAKC,MAAN,EAAcO,GAAd,CAAkBC,KAAK;AAC9B,YAAIA,EAAER,MAAF,KAAa,UAAjB,EAA6B;AAC3B,iBAAO;AACLK,mBAAOG,EAAEH,KADJ;AAELM,iBAAKH,EAAEG;AAFF,WAAP;AAID,SALD,MAKO;AACL,iBAAO;AACLN,mBAAO;AADF,WAAP;AAGD;AACF,OAXQ;AAFX,KADQ,CAJZ;AAqBEO,YAAQb,KAAKa;AArBf,GA3BK,EAkDL;AACEV,QAAI,WADN;AAEEY,iBAAa,CACX;AACEC,mBAAa,qCADf;AAEEC,eAAS;AACPX,eAAON,KAAKM,KADL;AAEPC,iBAAS,CAACP,KAAKC,MAAN,EAAcO,GAAd,CAAkBC,KAAK;AAC9B,cAAIA,EAAER,MAAF,KAAa,eAAjB,EAAkC;AAChC,mBAAO;AACLS,oBAAM,QADD;AAELJ,qBAAOG,EAAEH,KAFJ;AAGLY,qBAAOT,EAAEH;AAHJ,aAAP;AAKD,WAND,MAMO,IAAIG,EAAER,MAAF,KAAa,UAAjB,EAA6B;AAClC,mBAAO;AACLS,oBAAM,SADD;AAELJ,qBAAOG,EAAEH,KAFJ;AAGLY,qBAAOT,EAAEG;AAHJ,aAAP;AAKD;AACF,SAdQ;AAFF;AAFX,KADW;AAFf,GAlDK,EA4EL;AACET,QAAI,OADN;AAEEY,iBAAa,CACX;AACET,aAAON,KAAKM,KADd;AAEEQ,YAAMd,KAAKmB,QAFb;AAGEC,eAAS,CAACpB,KAAKC,MAAN,EAAcO,GAAd,CAAkBC,KAAK;AAC9B,YAAIA,EAAER,MAAF,KAAa,eAAjB,EAAkC;AAChC,iBAAO;AACLoB,kBAAM,OADD;AAELP,kBAAML,EAAEH,KAFH;AAGLI,kBAAM,QAHD;AAILQ,mBAAOT,EAAEH;AAJJ,WAAP;AAMD,SAPD,MAOO,IAAIG,EAAER,MAAF,KAAa,UAAjB,EAA6B;AAClC,iBAAO;AACLS,kBAAM,QADD;AAELI,kBAAML,EAAEH,KAFH;AAGLM,iBAAKH,EAAEG;AAHF,WAAP;AAKD;AACF,OAfQ;AAHX,KADW;AAFf,GA5EK,CAAP;AAsGD,C","file":"builtin_action-button.js","sourcesContent":["// TODO\n// Add card support to Telegram\n\nexport default data => {\n  if (data.action === 'Pick location') {\n    throw new Error('Action-button renderers do not support \"Pick location\" type at the moment')\n  }\n\n  return [\n    {\n      on: 'facebook',\n      template_type: 'generic',\n      elements: [\n        {\n          title: data.title,\n          buttons: [data.action].map(a => {\n            if (a.action === 'Say something') {\n              return {\n                type: 'postback',\n                title: a.title,\n                payload: a.title\n              }\n            } else if (a.action === 'Open URL') {\n              return {\n                type: 'web_url',\n                title: a.title,\n                url: a.url\n              }\n            }\n          })\n        }\n      ],\n\n      typing: data.typing\n    },\n    {\n      on: 'webchat',\n      type: 'carousel',\n      text: ' ',\n      elements: [\n        {\n          title: data.title,\n          buttons: [data.action].map(a => {\n            if (a.action === 'Open URL') {\n              return {\n                title: a.title,\n                url: a.url\n              }\n            } else {\n              return {\n                title: '<Unsupported action>'\n              }\n            }\n          })\n        }\n      ],\n      typing: data.typing\n    },\n    {\n      on: 'microsoft',\n      attachments: [\n        {\n          contentType: 'application/vnd.microsoft.card.hero',\n          content: {\n            title: data.title,\n            buttons: [data.action].map(a => {\n              if (a.action === 'Say something') {\n                return {\n                  type: 'imBack',\n                  title: a.title,\n                  value: a.title\n                }\n              } else if (a.action === 'Open URL') {\n                return {\n                  type: 'openUrl',\n                  title: a.title,\n                  value: a.url\n                }\n              }\n            })\n          }\n        }\n      ]\n    },\n    {\n      on: 'slack',\n      attachments: [\n        {\n          title: data.title,\n          text: data.subtitle,\n          actions: [data.action].map(a => {\n            if (a.action === 'Say something') {\n              return {\n                name: 'press',\n                text: a.title,\n                type: 'button',\n                value: a.title\n              }\n            } else if (a.action === 'Open URL') {\n              return {\n                type: 'button',\n                text: a.title,\n                url: a.url\n              }\n            }\n          })\n        }\n      ]\n    }\n  ]\n}\n"]}