{"version":3,"sources":["../../src/renderers/builtin_carousel.js"],"names":["data","on","template_type","elements","items","map","card","title","image_url","image","url","resolve","BOT_URL","subtitle","buttons","actions","a","action","type","payload","Error","typing","text","picture","attachments","contentType","content","images","value","name"],"mappings":"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","file":"builtin_carousel.js","sourcesContent":["// TODO\n// Add card support to Telegram\n\nimport url from 'url'\n\nexport default data => [\n  {\n    on: 'facebook',\n    template_type: 'generic',\n    elements: data.items.map(card => ({\n      title: card.title,\n      image_url: card.image ? url.resolve(data.BOT_URL, card.image) : null,\n      subtitle: card.subtitle,\n      buttons: (card.actions || []).map(a => {\n        if (a.action === 'Say something') {\n          return {\n            type: 'postback',\n            title: a.title,\n            payload: a.title\n          }\n        } else if (a.action === 'Open URL') {\n          return {\n            type: 'web_url',\n            title: a.title,\n            url: a.url\n          }\n        } else if (a.action === 'Pick location') {\n          throw new Error('Messenger does not support \"Pick location\" action-buttons for carousels')\n        }\n      })\n    })),\n\n    typing: data.typing\n  },\n  {\n    on: 'webchat',\n    type: 'carousel',\n    text: ' ',\n    elements: data.items.map(card => ({\n      title: card.title,\n      picture: card.image ? url.resolve(data.BOT_URL, card.image) : null,\n      subtitle: card.subtitle,\n      buttons: (card.actions || []).map(a => {\n        if (a.action === 'Say something') {\n          throw new Error('Webchat carousel does not support \"Say something\" action-buttons at the moment')\n        } else if (a.action === 'Open URL') {\n          return {\n            title: a.title,\n            url: a.url\n          }\n        } else if (a.action === 'Pick location') {\n          throw new Error('Webchat carousel does not support \"Pick location\" action-buttons at the moment')\n        }\n      })\n    })),\n    typing: data.typing\n  },\n  {\n    on: 'microsoft',\n    attachments: data.items.map(card => ({\n      contentType: 'application/vnd.microsoft.card.hero',\n      content: {\n        title: card.title,\n        subtitle: card.subtitle,\n        images: card.image ? [{ url: url.resolve(data.BOT_URL, card.image) }] : [],\n        buttons: (card.actions || []).map(a => {\n          if (a.action === 'Say something') {\n            return {\n              type: 'imBack',\n              title: a.title,\n              value: a.title\n            }\n          } else if (a.action === 'Open URL') {\n            return {\n              type: 'openUrl',\n              title: a.title,\n              value: a.url\n            }\n          } else if (a.action === 'Pick location') {\n            throw new Error('Microsoft carousel does not support \"Pick location\" action-buttons at the moment')\n          }\n        })\n      }\n    }))\n  },\n  {\n    on: 'slack',\n    attachments: data.items.map(card => ({\n      title: card.title,\n      image_url: card.image ? url.resolve(data.BOT_URL, card.image) : null,\n      text: card.subtitle,\n      actions: (card.actions || []).map(a => {\n        if (a.action === 'Say something') {\n          return {\n            name: 'press',\n            text: a.title,\n            type: 'button',\n            value: a.title\n          }\n        } else if (a.action === 'Open URL') {\n          return {\n            type: 'button',\n            text: a.title,\n            url: a.url\n          }\n        } else if (a.action === 'Pick location') {\n          throw new Error('Slack carousel does not support \"Pick location\" action-buttons at the moment')\n        }\n      })\n    }))\n  }\n]\n"]}