!function(e){function t(t){for(var o,l,i=t[0],s=t[1],u=t[2],d=0,f=[];d<i.length;d++)l=i[d],r[l]&&f.push(r[l][0]),r[l]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);for(c&&c(t);f.length;)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,i=1;i<n.length;i++){var s=n[i];0!==r[s]&&(o=!1)}o&&(a.splice(t--,1),e=l(l.s=n[0]))}return e}var o={},r={2:0},a=[];function l(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=o,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)l.d(n,o,function(t){return e[t]}.bind(null,o));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/js/";var i=window.webpackJsonp=window.webpackJsonp||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var c=s;a.push([1450,0]),n()}({1018:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=j(n(1)),a=n(46),l=n(21),i=j(n(3)),s=n(527),u=n(69),c=j(n(997)),d=j(n(991)),f=j(n(911)),p=j(n(908)),_=j(n(905)),m=j(n(902)),h=j(n(901)),y=j(n(896)),b=j(n(894)),g=j(n(883)),v=j(n(854)),w=j(n(845)),E=j(n(836)),k=j(n(642)),O=j(n(641)),x=j(n(638)),N=j(n(635)),S=n(16),C=j(n(634));function j(e){return e&&e.__esModule?e:{default:e}}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(t){function n(){return function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r.default.Component),o(n,[{key:"componentDidMount",value:function(){var t=this,n=this.props.location.query&&this.props.location.query.viewMode;e(function(){t.props.viewModeChanged(n||0)})}},{key:"render",value:function(){var e;if(this.props.viewMode<0)return null;var t=this.props.viewMode<=2,n=(0,i.default)((P(e={},C.default.container,t),P(e,"bp-container",t),e));return r.default.createElement("div",{className:"wrapper bp-wrapper"},r.default.createElement(s.ToastContainer,null),r.default.createElement(d.default,null,r.default.createElement(c.default,null),r.default.createElement("section",{className:n},r.default.createElement(u.Switch,null,r.default.createElement(u.Route,{exact:!0,path:"/",render:function(){return r.default.createElement(u.Redirect,{to:"/dashboard"})}}),r.default.createElement(u.Route,{exact:!0,path:"/dashboard",component:b.default}),r.default.createElement(u.Route,{exact:!0,path:"/middleware",component:g.default}),r.default.createElement(u.Route,{exact:!0,path:"/content",component:v.default}),r.default.createElement(u.Route,{exact:!0,path:"/version-control",component:w.default}),r.default.createElement(u.Route,{exact:!0,path:"/flows/:flow*",component:E.default}),r.default.createElement(u.Route,{exact:!0,path:"/modules/:moduleName/:subView?",component:k.default}),r.default.createElement(u.Route,{exact:!0,path:"/notifications",component:O.default}),r.default.createElement(u.Route,{exact:!0,path:"/logs",component:x.default})))),r.default.createElement(f.default,null),r.default.createElement(h.default,{opened:window.SHOW_GUIDED_TOUR}),r.default.createElement(_.default,{opened:this.props.licenseModalOpened,license:{text:this.props.license.text,name:this.props.license.name},toggleLicenseModal:this.props.toggleLicenseModal}),r.default.createElement(m.default,{opened:this.props.aboutModalOpened}),r.default.createElement(N.default,{site:"overlay"}),r.default.createElement(p.default,null),r.default.createElement(y.default,null))}}]),n}();t.default=(0,l.connect)(function(e,t){return{license:e.license,licenseModalOpened:e.ui.licenseModalOpened,aboutModalOpened:e.ui.aboutModalOpened,viewMode:e.ui.viewMode}},function(e){return(0,a.bindActionCreators)({toggleLicenseModal:S.toggleLicenseModal,viewModeChanged:S.viewModeChanged},e)})(I)}).call(this,n(74).setImmediate)},1019:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=d(n(1)),a=d(n(0)),l=n(69),i=d(n(173)),s=d(n(31)),u=d(n(11)),c=n(75);function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.default=function(e){var t=function(t){function n(){var e,t,o;!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return t=o=f(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),o.state={authorized:!1},o.promptLogin=function(){var e=u.default.get(o.props,"location.query.token");"/login"===location.pathname||e||o.context.router.history.push("/login?returnTo="+location.pathname),window.botpressWebChat&&window.botpressWebChat.sendEvent({type:"hide"})},o.checkAuth=function(){s.default.get("/api/ping").catch(function(e){401===e.response.status&&o.promptLogin()})},f(o,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r.default.Component),o(n,[{key:"componentDidMount",value:function(){c.authEvents.on("logout",this.promptLogin),this.setupAuth()}},{key:"componentWillUnmount",value:function(){c.authEvents.off("logout",this.promptLogin),clearInterval(this.checkInterval)}},{key:"setupAuth",value:function(){if(window.AUTH_ENABLED||this.state.authorized){var e=u.default.get(this.props,"location.query.token"),t=JSON.parse(u.default.get(this.props,"location.query.params")||"{}");if(e){(0,c.setToken)(e);var n=u.default.omit(this.props.location.query,["token","botId","env","params"]);this.context.router.history.replace(Object.assign({},this.props.location,{search:i.default.stringify(n),query:n,pathname:t.returnTo||this.props.location.pathname}))}var o=function(){var e=(0,c.getToken)(),t=new Date-new Date(e.time),n=!!e&&t<window.AUTH_TOKEN_DURATION;return n||(0,c.logout)(),n}();this.setState({authorized:o}),o?(this.checkAuth(),this.checkInterval=setInterval(this.checkAuth,6e4)):this.promptLogin()}else this.setState({authorized:!0})}},{key:"render",value:function(){return!0===this.state.authorized?r.default.createElement(e,this.props):null}}]),n}();return t.contextTypes={router:a.default.object},(0,l.withRouter)(t)}},1028:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=d(n(1)),r=n(69),a=d(n(1026)),l=d(n(173)),i=d(n(1020)),s=d(n(1019)),u=d(n(1018)),c=d(n(632));function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e){e.location=Object.assign(e.location,{query:l.default.parse(e.location.search)})},p=(0,a.default)();f(p),p.listen(function(){return f(p)});var _=function(){i.default.set({page:window.location.pathname}),i.default.pageview(window.location.pathname)};t.default=function(){window.OPT_OUT_STATS||i.default.initialize("UA-90044826-1");var e=(0,s.default)(u.default);return o.default.createElement(r.Router,{history:p,onUpdate:_},o.default.createElement(r.Switch,null,o.default.createElement(r.Route,{exact:!0,path:"/login",key:"login-route",component:c.default}),o.default.createElement(e,null)))}},1054:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=n(21),l=n(75),i=c(n(145)),s=c(n(1028)),u=n(16);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.fetchData=function(){o.props.fetchModules(),o.props.fetchNotifications(),o.props.fetchBotInformation(),o.props.fetchLicense(),o.props.fetchUser(window.AUTH_ENABLED)},d(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"componentWillMount",value:function(){window.APP_NAME&&(window.document.title=window.APP_NAME),i.default.default.setup()}},{key:"componentDidMount",value:function(){var e=this;this.fetchData(),l.authEvents.on("login",this.fetchData),l.authEvents.on("new_token",this.fetchData),i.default.default.on("notifications.all",function(t){e.props.replaceNotifications(t)}),i.default.default.on("notifications.new",function(t){e.props.addNotifications([t])})}},{key:"render",value:function(){return(0,s.default)()}}]),t}(),p={fetchLicense:u.fetchLicense,fetchUser:u.fetchUser,fetchBotInformation:u.fetchBotInformation,fetchModules:u.fetchModules,fetchNotifications:u.fetchNotifications,replaceNotifications:u.replaceNotifications,addNotifications:u.addNotifications};t.default=(0,a.connect)(null,p)(f)},1055:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".component-mount .btn {\n  font-size: 14px;\n  opacity: 0.75;\n  text-align: center;\n  padding-left: 20px;\n  padding-right: 20px;\n  transition: opacity 0.15s ease-in-out, background-color 0.15s ease-in-out; }\n  .component-mount .btn:hover {\n    opacity: 1; }\n\n.component-mount .btn-success {\n  color: #ffffff;\n  background-color: #46cba0;\n  border-color: #46cba0; }\n  .component-mount .btn-success:hover {\n    background-color: #40bd94;\n    border-color: #40bd94;\n    color: #ffffff; }\n\n.component-mount .btn-danger {\n  background-color: #af4f4b;\n  border-color: #af4f4b; }\n  .component-mount .btn-danger:hover {\n    background-color: #b13434;\n    border-color: #b13434; }\n\n.component-mount .btn-default {\n  background-color: #b1b1b1;\n  border-color: #b1b1b1; }\n  .component-mount .btn-default:hover {\n    background-color: #a5a5a5;\n    border-color: #a5a5a5; }\n\n.component-mount .control-label {\n  color: #434343; }\n\n.component-mount .react-tagsinput {\n  background-color: #fff;\n  border-radius: 5px;\n  border: 1px solid #efefef;\n  transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s; }\n\n.component-mount .react-tagsinput--focused {\n  border-color: #56c0b2;\n  outline: 0;\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(86, 192, 178, 0.6); }\n\n.component-mount .react-tagsinput-tag {\n  background-color: #efefef;\n  border-radius: 5px;\n  border: 1px solid #efefef;\n  color: #6d6d6d; }\n\n.component-mount .react-tagsinput-input {\n  width: 200px; }\n\n.component-mount .form-control {\n  box-shadow: none;\n  border-color: #efefef; }\n  .component-mount .form-control:focus {\n    border-color: #56c0b2;\n    box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(86, 192, 178, 0.6); }\n\n.component-mount .input-group-addon {\n  border-color: #efefef; }\n\n.component-mount .react-toggle--checked .react-toggle-thumb {\n  border-color: #56c0b2; }\n\n.component-mount .react-toggle--checked .react-toggle-track {\n  background-color: #56c0b2 !important; }\n\na {\n  transition: background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, color 0.15s ease-in-out; }\n\nhtml {\n  height: 100%; }\n\nbody {\n  height: 100%;\n  font-family: 'Lato', sans-serif !important;\n  font-weight: 400;\n  background-color: #eee;\n  color: #434343; }\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\n.theme__h1___22DqW,\n.theme__h2___1ik0N,\n.theme__h3___16bn9,\n.theme__h4___1iBCF,\n.theme__h5___1jrRg,\n.theme__h6___m3vda {\n  font-weight: 300; }\n\nb {\n  font-weight: 500; }\n\n.panel {\n  border: none;\n  border-radius: 3px;\n  box-shadow: none;\n  background-color: #fff; }\n  .panel .panel-heading {\n    padding: 15px 20px;\n    border-color: #f7f7f7;\n    background-color: #fff;\n    text-transform: uppercase;\n    font-size: 12px;\n    font-weight: 350; }\n\n.form-control:focus {\n  border-color: #56c0b2;\n  outline: 0;\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(86, 192, 178, 0.6); }\n\n.bp-primary-color-text {\n  color: #58d1b0; }\n\n.bp-primary-color-bg {\n  color: #ffffff;\n  background-color: #58d1b0; }\n\n.bp-button {\n  color: #ffffff;\n  background-color: #46cba0;\n  min-width: 80px;\n  display: inline-block;\n  font-size: 15px;\n  font-variant: normal;\n  line-height: 1.5;\n  text-align: center;\n  white-space: nowrap;\n  margin: 1px 1px;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 20px;\n  padding-right: 20px;\n  border: 1px solid transparent;\n  border-radius: 4px;\n  outline: 0;\n  transition: background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, color 0.15s ease-in-out; }\n  .bp-button:hover, .bp-button:focus, .bp-button:active {\n    color: #ffffff;\n    background-color: #40bd94;\n    outline: 0;\n    box-shadow: none;\n    border: 1px solid transparent; }\n\n.bp-button-default {\n  background-color: #b1b1b1; }\n  .bp-button-default:hover, .bp-button-default:focus {\n    background-color: #a5a5a5; }\n\n.bp-button-danger {\n  background-color: #af4f4b; }\n  .bp-button-danger:hover, .bp-button-danger:focus {\n    background-color: #b13434; }\n\n.react-autosuggest__container {\n  position: relative; }\n\n.react-autosuggest__input {\n  width: 240px;\n  height: 30px;\n  padding: 10px 20px;\n  font-family: Helvetica, sans-serif;\n  font-weight: 300;\n  font-size: 16px;\n  border: 1px solid #aaa;\n  border-radius: 4px; }\n\n.react-autosuggest__input--focused {\n  outline: none; }\n\n.react-autosuggest__input--open {\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0; }\n\n.react-autosuggest__suggestions-container {\n  display: none; }\n\n.react-autosuggest__suggestions-container--open {\n  display: block;\n  position: absolute;\n  top: 51px;\n  width: 280px;\n  border: 1px solid #aaa;\n  background-color: #fff;\n  font-family: Helvetica, sans-serif;\n  font-weight: 300;\n  font-size: 16px;\n  border-bottom-left-radius: 4px;\n  border-bottom-right-radius: 4px;\n  z-index: 2; }\n\n.react-autosuggest__suggestions-list {\n  margin: 0;\n  padding: 0;\n  list-style-type: none; }\n\n.react-autosuggest__suggestion {\n  cursor: pointer;\n  padding: 10px 20px; }\n\n.react-autosuggest__suggestion--highlighted {\n  background-color: #ddd; }\n",""]),t.locals={h1:"theme__h1___22DqW",h2:"theme__h2___1ik0N",h3:"theme__h3___16bn9",h4:"theme__h4___1iBCF",h5:"theme__h5___1jrRg",h6:"theme__h6___m3vda"}},1056:function(e,t,n){var o=n(1055);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},1068:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".style__createItem___17KQ- {\n  border-left: 3px solid #58d1b0; }\n\n.style__editButton___2eI1Q {\n  border-radius: 0;\n  margin-left: -1px; }\n",""]),t.locals={createItem:"style__createItem___17KQ-",editButton:"style__editButton___2eI1Q"}},1069:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".style__modal___2cM9s .btn-info {\n  background-color: #46cba0;\n  border-color: #46cba0; }\n  .style__modal___2cM9s .btn-info:hover {\n    background-color: #40bd94;\n    border-color: #40bd94; }\n\n.style__cancel___151HQ {\n  position: absolute;\n  left: 90px;\n  bottom: 24px;\n  height: 34px;\n  padding-right: 12px;\n  padding-left: 12px;\n  min-width: 70px; }\n",""]),t.locals={modal:"style__modal___2cM9s",cancel:"style__cancel___151HQ"}},1070:function(e,t,n){var o=n(1069);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},1071:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r="r",a="w",l=t.enrichResources=function(e){return function e(t,n){return t?t.map(function(t){var r=null!=n?n+"."+t.name:t.name;return o({},t,{displayName:t.name,name:r,children:e(t.children,r)})}):t}(e)},i=[{name:"*",description:"All resources, at once. Use with caution",operations:[r,a]},{name:"bot",description:"Bot properties, such as content, flows etc.",children:[{name:"*",description:"All bot properties",operations:[r,a]},{name:"notifications",description:"Bot notifications, such as runtime errors",operations:[r]},{name:"modules.*",description:"Bot extensions, such as NLU or HITL",operations:[r]},{name:"middleware.*",description:"All middleware operations",operations:[r,a]},{name:"middleware.list",description:"Get the list of the installed middlewares",operations:[r]},{name:"middleware.customizations",description:"Change the order of the middlewares and their enabled/disabled state",operations:[a]},{name:"modules.list",description:"The list of the installed modules",operations:[r]},{name:"modules.list.community",description:"The list of the publicly available modules",operations:[r]},{name:"information",description:"General bot details",operations:[r]},{name:"information.license",description:"Bot license",operations:[a]},{name:"logs",description:"Bot logs",operations:[r]},{name:"logs.archive",description:"Bot archived logs",operations:[r]},{name:"content",description:"Bot content items",operations:[r,a]},{name:"ghost_content",description:"The majority of bot content, such as content and flows, is ghost-managed, i.e. synced from the server to the bot source code",operations:[r,a]},{name:"media",description:"Bot file uploads",operations:[a]},{name:"flows",description:"Bot flows, i.e. its logic described as flow diagram",operations:[r,a]},{name:"skills",description:"Bot flow skill nodes",operations:[a]}]}].sort(function(e,t){return e.name.localeCompare(t.name)});t.RESOURCES=l(i)},1072:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1071);Object.defineProperty(t,"RESOURCES",{enumerable:!0,get:function(){return o.RESOURCES}}),Object.defineProperty(t,"enrichResources",{enumerable:!0,get:function(){return o.enrichResources}});var r=t.ressourceMatches=function(e,t){var n=/[\/\.]/;~(e=e||"").indexOf("*")||(e=e+=".*");for(var o=e.split(n),r=t.split(n),a=!0,l=0;a&&l<o.length;l++)"*"!==o[l]&&(a=l<r.length&&o[l].toLowerCase()===r[l].toLowerCase());return a},a={read:"r",write:"w"},l=["r","w"],i=t.checkRule=function(e,t,n){if(!e)return!1;if(t=t.toLowerCase(),t=a[t]||t,!l.includes(t))throw new Error("Invalid rule operation: "+t);var o=!1,i=!0,s=!1,u=void 0;try{for(var c,d=e[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var f=c.value,p=f.op;if(!p||p.length<2||p.length>4)throw new Error("Invalid rule operation: "+p);r(f.res,n)&&(4===p.length?o=p[1]===t?"+"===p[0]:p[3]===t&&"+"===p[2]:3===p.length?o="+"===p[0]:2===p.length&&p[1]===t&&(o="+"===p[0]))}}catch(e){s=!0,u=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw u}}return o};t.checkMultipleRoles=function(e,t,n){if(!e)return!1;for(var o in e)if(i(e[o],t,n))return!0;return!1}},1073:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=d(r),l=n(21),i=n(13),s=d(n(61)),u=d(n(251)),c=d(n(31));function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){n.props.onChange(e)},n.expand=function(){n.setState({expanded:!0})},n.collapse=function(){n.setState({expanded:!1})},n.startUpload=function(e){var t=new FormData;t.append("file",e.target.files[0]),n.setState({error:null,uploading:!0},function(){c.default.post("/api/media",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){n.setState({expanded:!1});var t=e.data.url;n.handleChange(t)}).catch(function(e){n.setState({error:e.message})}).then(function(){n.setState({uploading:!1})})})},n.state={expanded:!e.value,error:null,uploading:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"componentWillReceiveProps",value:function(e){e.value||this.state.expanded||this.setState({expanded:!0})}},{key:"render",value:function(){var e=this.props.schema,t=e.$filter,n=e.$subtype;if("string"!==e.type||"media"!==n)return null;var o=this.state,r=o.expanded,l=o.uploading,c=o.error;return a.default.createElement(s.default,{user:this.props.user,op:"write",res:"bot.media",fallback:a.default.createElement("em",null,"Youd don't have permission to upload files for this bot. Talk to your team owner.")},a.default.createElement(i.FormGroup,null,r?a.default.createElement(i.HelpBlock,null,"No file picked yet."):a.default.createElement(i.InputGroup,null,a.default.createElement(i.FormControl,{type:"text",placeholder:"No file picked yet",value:this.props.value||"",disabled:!0,className:"form-control",id:this.props.id}),a.default.createElement(i.InputGroup.Button,null,a.default.createElement(i.Button,{onClick:this.expand},this.props.value?"Change...":"Pick...")))),r&&!l&&a.default.createElement(i.FormGroup,null,a.default.createElement(i.InputGroup,null,a.default.createElement(i.FormControl,{type:"file",accept:t||"*",placeholder:this.props.placeholder||"Pick file to upload",onChange:this.startUpload}),a.default.createElement(i.InputGroup.Button,null,a.default.createElement(i.Button,{bsStyle:"link",onClick:this.collapse},"Cancel")))),r&&c&&a.default.createElement(i.FormGroup,{validationState:"error"},a.default.createElement(i.HelpBlock,null,c)),r&&l&&a.default.createElement(u.default,null))}}]),t}();t.default=(0,l.connect)(function(e){return{user:e.user}})(f)},1074:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=i(r),l=i(n(269));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){return"##ref("+e+")"},c=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.handleChange=function(e){return o.props.onChange(u(e.id))},s(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"render",value:function(){var e=this.props.schema,t=e.$category,n=e.$subtype;return"string"!==e.type||"ref"!==n?null:a.default.createElement(l.default,{inputId:this.props.id,itemId:function(e){if(null==e)return e;var t=e&&e.match(/^##ref\((.*)\)$/);if(!t)throw new Error('Expected decorated ref "##ref(ID)", got '+e);return t[1]}(this.props.value),categoryId:t,onChange:this.handleChange,placeholder:this.props.placeholder||"Pick "+t})}}]),t}();t.default=c},1144:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=u(n(1)),a=u(n(1143)),l=u(n(545)),i=u(n(1074)),s=u(n(1073));function u(e){return e&&e.__esModule?e:{default:e}}var c={BaseInput:function(e){return"string"===e.schema.type&&"ref"===e.schema.$subtype?r.default.createElement(i.default,e):"string"===e.schema.type&&"media"===e.schema.$subtype?r.default.createElement(s.default,e):r.default.createElement(l.default,e)}};t.default=function(e){var t="array"===e.schema.type?[]:{};return r.default.createElement(a.default,o({},e,{formData:e.formData||t,safeRenderCompletion:!0,widgets:c}))}},1146:function(e,t,n){(function(t){e.exports=t.BotpressContentPicker=n(269)}).call(this,n(23))},132:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=u(n(1)),l=u(n(31)),i=u(n(212)),s=u(n(145));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(t){function n(){var e,t,o;!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return t=o=c(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),o.state={moduleComponent:null},c(o,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default.Component),r(n,[{key:"loadModule",value:function(t,n,o){var r=this,a=t||this.props.moduleName,l=n||this.props.viewName||"default",i=o||this.props.lite||!1;if(a!==this.state.moduleName||l!=this.state.viewName)if(this.setState({moduleComponent:null,moduleName:a,viewName:n}),window.botpress&&window.botpress[a])this.setState({moduleComponent:null}),e(function(){r.setViewInState(a,l,i)});else{var s=document.createElement("script");s.type="text/javascript",s.onload=function(){s.onload=null,e(function(){r.setViewInState(a,l,i)})};var u=a.replace(/^botpress-/i,"").replace(/^@botpress\//i,"");s.src=i?"/js/modules/"+u+"/"+l:"/js/modules/"+u,document.getElementsByTagName("head")[0].appendChild(s)}}},{key:"setViewInState",value:function(e,t,n){var o=function(e){var o=n?"default":t;return window.botpress&&window.botpress[e]&&window.botpress[e][o]},r=o((e.startsWith("@botpress/")||e.startsWith("botpress-")?[e]:["@botpress/"+e,"botpress-"+e]).find(o));r?this.setState({moduleComponent:r,error:null}):this.setState({error:new Error('Subview "'+t+'" doesn\'t exist for module "'+e+'"'),moduleComponent:null})}},{key:"componentDidMount",value:function(){this.loadModule()}},{key:"componentWillReceiveProps",value:function(e){this.loadModule(e.moduleName,e.viewName,e.lite)}},{key:"render",value:function(){var e=this.state.moduleComponent;if(this.state.error)return console.log("Error rendering plugin",this.state.error),this.props.onNotFound&&this.props.onNotFound(this.state.error)||null;if(!e)return null;var t={events:s.default.default,axios:l.default},n=this.props.extraProps||{};return a.default.createElement(i.default,o({component:e,name:this.props.moduleName,bp:t},n))}}]),n}();t.default=d}).call(this,n(74).setImmediate)},145:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=l(n(184)),r=l(n(542)),a=n(75);function l(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{wildcard:!0,maxListeners:100}));return e.dispatchSocketEvent=function(t){e.emit(t.name,t.data,"server")},e.dispatchClientEvent=function(t,n,o){if("server"!==o){var r=t.startsWith("guest.")?e.guestSocket:e.adminSocket;r&&r.emit("event",{name:t,data:n})}},e.setup=function(){var t={visitorId:(0,a.getUniqueVisitorId)()};if(window.AUTH_ENABLED){var n=(0,a.getToken)();n&&Object.assign(t,{token:n.token})}e.adminSocket&&(e.adminSocket.off("event",e.dispatchEvent),e.adminSocket.disconnect()),e.guestSocket&&(e.guestSocket.off("event",e.dispatchEvent),e.guestSocket.disconnect());var o=window.location.origin;e.adminSocket=(0,r.default)(o+"/admin",{query:t}),e.adminSocket.on("event",e.dispatchSocketEvent),e.guestSocket=(0,r.default)(o+"/guest",{query:t}),e.guestSocket.on("event",e.dispatchSocketEvent)},e.onAny(e.dispatchClientEvent),a.authEvents.on("new_token",e.setup),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),t}();i.default=new i,t.default=i},1450:function(e,t,n){"use strict";n(623);var o=u(n(588)),r=u(n(586)),a=u(n(31)),l=n(75),i=(u(n(579)),u(n(578)),u(n(1146)),n(21)),s=u(n(178));function u(e){return e&&e.__esModule?e:{default:e}}n(1067),n(1060),n(1058),n(1056);var c=(0,l.getToken)();c&&(a.default.defaults.headers.common.Authorization="Bearer "+c.token);var d=n(1054).default;r.default.render(o.default.createElement(i.Provider,{store:s.default},o.default.createElement(d,null)),document.getElementById("app"))},146:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prettyId=t.moveCursorToEnd=t.hashCode=void 0,r(n(11));var o=r(n(557));function r(e){return e&&e.__esModule?e:{default:e}}t.hashCode=function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t},t.moveCursorToEnd=function(e){if(e)if("number"==typeof e.selectionStart)e.selectionStart=e.selectionEnd=e.value.length,e.focus();else if(void 0!==e.createTextRange){e.focus();var t=e.createTextRange();t.collapse(!1),t.select()}},t.prettyId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return(0,o.default)("1234567890abcdef",e)}},16:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestEditSkill=t.editSkill=t.updateSkill=t.insertNewSkillNode=t.insertNewSkill=t.cancelNewSkill=t.buildNewSkill=t.addNotifications=t.replaceNotifications=t.fetchNotifications=t.newNotificationsReceived=t.allNotificationsReceived=t.fetchModules=t.modulesReceived=t.fetchBotInformation=t.botInfoReceived=t.fetchUser=t.userReceived=t.updateGlobalStyle=t.viewModeChanged=t.toggleAboutModal=t.toggleLicenseModal=t.fetchLicense=t.licenseChanged=t.deleteContentItems=t.upsertContentItem=t.fetchContentItemsCount=t.receiveContentItemsCount=t.fetchContentItem=t.receiveContentItem=t.fetchContentItemsRecent=t.receiveContentItemsRecent=t.fetchContentItems=t.receiveContentItems=t.fetchContentCategories=t.receiveContentCategories=t.setDiagramAction=t.flowEditorRedo=t.flowEditorUndo=t.handleFlowEditorRedo=t.handleFlowEditorUndo=t.closeFlowNodeProps=t.openFlowNodeProps=t.pasteFlowNodeElement=t.copyFlowNodeElement=t.pasteFlowNode=t.copyFlowNode=t.removeFlowNode=t.createFlowNode=t.switchFlowNode=t.updateFlowNode=t.refreshFlowsLinks=t.handleRefreshFlowLinks=t.duplicateFlow=t.deleteFlow=t.switchFlow=t.createFlow=t.renameFlow=t.updateFlow=t.saveAllFlows=t.receiveSaveFlows=t.requestSaveFlows=t.fetchFlows=t.receiveFlows=t.requestFlows=void 0;var o=n(30),r=i(n(31)),a=i(n(11)),l=i(n(267));function i(e){return e&&e.__esModule?e:{default:e}}var s=t.requestFlows=(0,o.createAction)("FLOWS/REQUEST"),u=t.receiveFlows=(0,o.createAction)("FLOWS/RECEIVE",function(e){return e},function(){return{receiveAt:new Date}}),c=(t.fetchFlows=function(){return function(e){e(s()),r.default.get("/api/flows/all").then(function(t){var n=t.data,o=a.default.keyBy(n,"name");e(u(o))})}},t.requestSaveFlows=(0,o.createAction)("FLOWS/SAVE")),d=t.receiveSaveFlows=(0,o.createAction)("FLOWS/SAVE/RECEIVE",function(e){return e},function(){return{receiveAt:new Date}}),f=(t.saveAllFlows=function(){return function(e,t){e(c());var n=a.default.values(t().flows.flowsByName).map(function(e){return{flow:e.name,location:e.location,startNode:e.startNode,catchAll:e.catchAll,links:e.links,nodes:e.nodes,skillData:e.skillData}});r.default.post("/api/flows/save",n).then(function(){e(d())})}},t.updateFlow=(0,o.createAction)("FLOWS/FLOW/UPDATE"),t.renameFlow=(0,o.createAction)("FLOWS/FLOW/RENAME"),t.createFlow=(0,o.createAction)("FLOWS/CREATE"),t.switchFlow=(0,o.createAction)("FLOWS/SWITCH"),t.deleteFlow=(0,o.createAction)("FLOWS/DELETE"),t.duplicateFlow=(0,o.createAction)("FLOWS/DUPLICATE"),t.handleRefreshFlowLinks=(0,o.createAction)("FLOWS/FLOW/UPDATE_LINKS")),p=t.refreshFlowsLinks=function(){return function(e){return setTimeout(function(){return e(f())},10)}},_=(t.updateFlowNode=(0,o.createAction)("FLOWS/FLOW/UPDATE_NODE"),t.switchFlowNode=(0,o.createAction)("FLOWS/FLOW/SWITCH_NODE"),t.createFlowNode=(0,o.createAction)("FLOWS/FLOW/CREATE"),t.removeFlowNode=(0,o.createAction)("FLOWS/FLOW/REMOVE"),t.copyFlowNode=(0,o.createAction)("FLOWS/NODE/COPY"),t.pasteFlowNode=(0,o.createAction)("FLOWS/NODE/PASTE"),t.copyFlowNodeElement=(0,o.createAction)("FLOWS/NODE_ELEMENT/COPY"),t.pasteFlowNodeElement=(0,o.createAction)("FLOWS/NODE_ELEMENT/PASTE"),t.openFlowNodeProps=(0,o.createAction)("FLOWS/FLOW/OPEN_NODE_PROPS"),t.closeFlowNodeProps=(0,o.createAction)("FLOWS/FLOW/CLOSE_NODE_PROPS"),t.handleFlowEditorUndo=(0,o.createAction)("FLOWS/EDITOR/UNDO")),m=t.handleFlowEditorRedo=(0,o.createAction)("FLOWS/EDITOR/REDO"),h=(t.flowEditorUndo=function(){return function(e){e(_()),e(p())}},t.flowEditorRedo=function(){return function(e){e(m()),e(p())}},t.setDiagramAction=(0,o.createAction)("FLOWS/FLOW/SET_ACTION"),t.receiveContentCategories=(0,o.createAction)("CONTENT/CATEGORIES/RECEIVE")),y=(t.fetchContentCategories=function(){return function(e){return r.default.get("/api/content/categories").then(function(t){var n=t.data;e(h(n))})}},t.receiveContentItems=(0,o.createAction)("CONTENT/ITEMS/RECEIVE")),b=(t.fetchContentItems=function(e){var t=e.id,n=e.from,o=e.count,a=e.searchTerm;return function(e){return r.default.get("/api/content/items",{params:{categoryId:t,from:n,count:o,searchTerm:a}}).then(function(t){var n=t.data;return e(y(n))})}},t.receiveContentItemsRecent=(0,o.createAction)("CONTENT/ITEMS/RECEIVE_RECENT")),g=(t.fetchContentItemsRecent=function(e){var t=e.searchTerm,n=e.count,o=void 0===n?5:n,a=e.categoryId,l=void 0===a?"all":a;return function(e){return r.default.get("/api/content/items",{params:{categoryId:l,count:o,searchTerm:t,orderBy:["createdOn","desc"]}}).then(function(t){var n=t.data;return e(b(n))})}},(0,l.default)(function(e){return r.default.get("/api/content/items-batched/"+e.join(",")).then(function(t){return t.data.reduce(function(t,n,o){return t[e[o]]=n,t},{})})})),v=t.receiveContentItem=(0,o.createAction)("CONTENT/ITEMS/RECEIVE_ONE"),w=(t.fetchContentItem=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.force,o=void 0!==n&&n,a=t.batched,l=void 0!==a&&a;return function(t,n){return!e||!o&&n().content.itemsById[e]?Promise.resolve():(l?function(e){return g.add(e)}(e):function(e){return r.default.get("/api/content/items/"+e).then(function(e){return e.data})}(e)).then(function(e){return t(v(e))})}},t.receiveContentItemsCount=(0,o.createAction)("CONTENT/ITEMS/RECEIVE_COUNT")),E=(t.fetchContentItemsCount=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";return function(t){return r.default.get("/api/content/items/count",{params:{categoryId:e}}).then(function(e){return t(w(e))})}},t.upsertContentItem=function(e){var t=e.categoryId,n=e.formData,o=e.modifyId;return function(){return r.default.post("/api/content/categories/"+t+"/items/"+(o||""),{formData:n})}},t.deleteContentItems=function(e){return function(){return r.default.post("/api/content/categories/all/bulk_delete",e)}},t.licenseChanged=(0,o.createAction)("LICENSE/CHANGED")),k=(t.fetchLicense=function(){return function(e){r.default.get("/api/license").then(function(t){var n=t.data;e(E(n))})}},t.toggleLicenseModal=(0,o.createAction)("UI/TOGGLE_LICENSE_MODAL"),t.toggleAboutModal=(0,o.createAction)("UI/TOGGLE_ABOUT_MODAL"),t.viewModeChanged=(0,o.createAction)("UI/VIEW_MODE_CHANGED"),t.updateGlobalStyle=(0,o.createAction)("UI/UPDATE_GLOBAL_STYLE"),t.userReceived=(0,o.createAction)("USER/RECEIVED")),O=(t.fetchUser=function(e){return function(t){e?r.default.get("/api/my-account").then(function(e){t(k(e.data))}):t(k({id:"anonymous",roles:null}))}},t.botInfoReceived=(0,o.createAction)("BOT/INFO_RECEIVED")),x=(t.fetchBotInformation=function(){return function(e){r.default.get("/api/bot/information").then(function(t){e(O(t.data))})}},t.modulesReceived=(0,o.createAction)("MODULES/RECEIVED")),N=(t.fetchModules=function(){return function(e){r.default.get("/api/modules").then(function(t){e(x(t.data))})}},t.allNotificationsReceived=(0,o.createAction)("NOTIFICATIONS/ALL_RECEIVED")),S=t.newNotificationsReceived=(0,o.createAction)("NOTIFICATIONS/NEW_RECEIVED"),C=(t.fetchNotifications=function(){return function(e){r.default.get("/api/notifications/inbox").then(function(t){e(N(t.data))})}},t.replaceNotifications=function(e){return function(t){t(N(e))}},t.addNotifications=function(e){return function(t){t(S(e))}},t.buildNewSkill=(0,o.createAction)("SKILLS/BUILD"),t.cancelNewSkill=(0,o.createAction)("SKILLS/BUILD/CANCEL"),t.insertNewSkill=(0,o.createAction)("SKILLS/INSERT"),t.insertNewSkillNode=(0,o.createAction)("SKILLS/INSERT/NODE"),t.updateSkill=(0,o.createAction)("SKILLS/UPDATE"),t.editSkill=(0,o.createAction)("SKILLS/EDIT"));t.requestEditSkill=function(e){return function(t,n){var o=n(),r=a.default.find(o.flows.flowsByName[o.flows.currentFlow].nodes,{id:e}),l=r&&o.flows.flowsByName[r.flow];l&&t(C({skillId:"skill-"+r.skill,flowName:r.flow,nodeId:e,data:l.skillData}))}}},178:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n(46),a=s(n(559)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(16)),i=s(n(73));function s(e){return e&&e.__esModule?e:{default:e}}var u=("object"===("undefined"==typeof window?"undefined":o(window))&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({name:"Botpress",actionCreators:l}):r.compose)((0,r.applyMiddleware)(a.default));t.default=(0,r.createStore)(i.default,u)},210:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.moduleViewNames=void 0;var o,r=(o=n(11))&&o.__esModule?o:{default:o};t.moduleViewNames=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"overlay";return r.default.flatten((e||[]).filter(Boolean).map(function(e){return r.default.filter(e.plugins||[],{position:t}).map(function(t){return{moduleName:e.name,viewName:t.entry}})}))}},211:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=d(r),l=d(n(11)),i=d(n(3)),s=n(13),u=d(n(223)),c=d(n(647));function d(e){return e&&e.__esModule?e:{default:e}}function f(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=n(91),m=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={showConditionalModalForm:!1},o.onSubmit=function(e){var t=o.state.itemToEditIndex,n=o.props.items;o.setState({showConditionalModalForm:!1,itemToEditIndex:null}),o.props.onItemsUpdated(Number.isInteger(t)?n.map(function(n,o){return o===t?e:n}):[].concat(f(n),[e]))},p(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"onMove",value:function(e,t){var n=[].concat(f(this.props.items)),o=n[e],r=n[e+t];n[e+t]=o,n[e]=r,this.props.onItemsUpdated(n)}},{key:"onRemove",value:function(e){var t=[].concat(f(this.props.items));l.default.pullAt(t,[e]),this.props.onItemsUpdated(t)}},{key:"onCopyAction",value:function(e){this.props.copyItem(this.props.items[e])}},{key:"onEdit",value:function(e){this.setState({itemToEditIndex:e,showConditionalModalForm:!0})}},{key:"render",value:function(){var e=this,t=this.props,n=t.items,o=t.readOnly;return n||(n=[]),a.default.createElement(r.Fragment,null,a.default.createElement("div",null,n.map(function(t,r){return a.default.createElement(u.default,{className:_.item,condition:t,position:r,key:r+"."+(t.node||"-")},function(e){return e.node&&""!==e.node?"END"===e.node?a.default.createElement(s.Label,{bsStyle:"warning"},"End"):"#"===e.node?a.default.createElement(s.Label,{bsStyle:"warning"},"Return"):e.node.includes(".flow.json")?a.default.createElement(s.Label,{bsStyle:"primary"},e.node):a.default.createElement(s.Label,{bsStyle:"default"},e.node):a.default.createElement(s.Label,{bsStyle:"danger"},"Missing Link")}(t),!o&&a.default.createElement("div",{className:_.actions},a.default.createElement("a",{onClick:function(){return e.onEdit(r)}},"Edit"),a.default.createElement("a",{onClick:function(){return e.onRemove(r)}},"Remove"),a.default.createElement("a",{onClick:function(){return e.onCopyAction(r)}},"Copy"),function(t){return t>0?a.default.createElement("a",{onClick:function(){return e.onMove(t,-1)}},"Up"):null}(r),function(t){return t<n.length-1?a.default.createElement("a",{onClick:function(){return e.onMove(t,1)}},"Down"):null}(r)))}),!o&&a.default.createElement("div",{className:_.actions},a.default.createElement(s.Button,{onClick:function(){return e.setState({showConditionalModalForm:!0})},bsSize:"xsmall"},a.default.createElement("i",{className:(0,i.default)("material-icons",_.actionIcons)},"add")),a.default.createElement(s.Button,{onClick:this.props.pasteItem,bsSize:"xsmall",disabled:!this.props.canPaste},a.default.createElement("i",{className:(0,i.default)("material-icons",_.actionIcons)},"content_paste")))),!o&&a.default.createElement(c.default,{currentFlow:this.props.currentFlow,subflows:this.props.subflows,show:this.state.showConditionalModalForm,onClose:function(){return e.setState({showConditionalModalForm:!1,itemToEditIndex:null})},onSubmit:this.onSubmit,item:this.props.items[this.state.itemToEditIndex]}))}}]),t}();t.default=m},212:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=u(r),l=u(n(0)),i=u(n(18)),s=u(n(151));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.componentId="component-"+(0,s.default)(),c(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"componentDidUpdate",value:function(){this.internalRender()}},{key:"componentDidMount",value:function(){this.internalRender()}},{key:"componentWillUnmount",value:function(){try{i.default.unmountComponentAtNode(i.default.findDOMNode(this))}catch(e){console.error(e)}}},{key:"render",value:function(){return a.default.createElement("div",{className:"component-mount"})}},{key:"internalRender",value:function(){var e=i.default.findDOMNode(this);try{var t=Object.assign({},this.props);delete t.component,i.default.render(a.default.createElement(this.props.component,t),e)}catch(t){var n=a.default.createElement("div",{className:"panel panel-danger"},a.default.createElement("div",{className:"panel-heading"},"Could not display component"),a.default.createElement("div",{className:"panel-body"},a.default.createElement("h4",null,"An error occurred while loading the component"),a.default.createElement("p",null,t.message)),a.default.createElement("div",{className:"panel-footer"},"Developer? ",a.default.createElement("a",{href:"https://github.com/botpress/botpress/tree/master/docs"},"click here"),"to see why this might happen"));i.default.render(n,e),console.error&&console.error("Error loading component",t)}}}]),t}();d.propTypes={component:l.default.func.isRequired},t.default=d},223:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=c(r),l=n(13),i=c(n(3)),s=c(n(359)),u=c(n(11));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=n(224),p=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=o=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.renderOverlay=function(e){var t=a.default.createElement(l.Popover,{id:"popover-action",title:"⚡ Conditional transition"},a.default.createElement(l.Well,null,o.props.condition.condition));return a.default.createElement(l.OverlayTrigger,{trigger:["hover","focus"],placement:"top",delayShow:500,overlay:t},e)},d(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"renderNormal",value:function(e){return e}},{key:"render",value:function(){var e=this.props.position,t=this.props.condition,n=t.condition,o=t.caption,r=null,l=o?this.renderOverlay:this.renderNormal;if(o){var c={},d=o.replace(/\[(.+)]/gi,function(e){var t=e.replace(/\[|]/g,"").replace(/\./g,"--dot--");return c[t]='<span class="val">'+u.default.escape(t)+"</span>","{{{"+t+"}}}"});r=s.default.render(d,c).replace(/--dot--/g,".")}else r=n&&n.length<=0||/^(yes|true)$/i.test(n.toLowerCase())?0===e?"always":"otherwise":n;return l(a.default.createElement("div",{className:(0,i.default)(this.props.className,f["action-item"],f.condition)},a.default.createElement("span",{className:f.icon},"❓"),a.default.createElement("span",{className:f.name,dangerouslySetInnerHTML:{__html:r}}),this.props.children))}}]),t}();t.default=p},224:function(e,t,n){var o=n(805);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},225:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=f(r),l=f(n(3)),i=n(21),s=n(13),u=f(n(11)),c=f(n(359)),d=n(16);function f(e){return e&&e.__esModule?e:{default:e}}var p=n(224),_=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.textToItemId=function(e){return u.default.get(e.match(/^say #!(.*)$/),"[1]")},n.fetchItem=function(e){e&&n.props.fetchContentItem(e,{force:!0,batched:!0}).then(n.props.refreshFlowsLinks)},n.state={itemId:n.textToItemId(n.props.text)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"componentDidMount",value:function(){this.fetchItem(this.textToItemId(this.props.text))}},{key:"componentWillReceiveProps",value:function(e){var t=e.text;t!==this.props.text&&this.fetchItem(this.textToItemId(t))}},{key:"renderAction",value:function(){var e=this.props.text.trim(),t=e,n={};if(e.indexOf(" ")>=0){var o=e.split(" ");t=u.default.head(o)+" (args)",n=JSON.parse(u.default.tail(o).join(" "))}var r=JSON.stringify(n,null,2),i=a.default.createElement(s.Popover,{id:"popover-action",title:"⚡ "+t},"Called with these arguments:",a.default.createElement("pre",null,r));return a.default.createElement(s.OverlayTrigger,{trigger:["hover","focus"],placement:"top",delayShow:500,overlay:i},a.default.createElement("div",{className:(0,l.default)(this.props.className,p.fn,p["action-item"])},a.default.createElement("span",{className:p.icon},"⚡"),a.default.createElement("span",{className:p.name},t),this.props.children))}},{key:"render",value:function(){var e=this.props.text;if("string"!=typeof e||!e.startsWith("say "))return this.renderAction();var t=this.props.items[this.state.itemId],n={},o=function(e){return e.replace(/\./g,"--dot--")},r=(t&&t.categoryTitle+" | "+t.previewText||"").replace(/{{([a-z$@0-9. _-]*?)}}/gi,function(e){var t=o(e.replace(/{|}/g,""));return n[t]='<span class="var">'+e+"</span>","{"+o(e)+"}"}),i={__html:c.default.render(r,n).replace(/--dot--/g,".")};return a.default.createElement("div",{className:(0,l.default)(this.props.className,p["action-item"],p.msg)},a.default.createElement("span",{className:p.icon},"💬"),a.default.createElement("span",{className:p.name,dangerouslySetInnerHTML:i}),this.props.children)}}]),t}(),m={fetchContentItem:d.fetchContentItem,refreshFlowsLinks:d.refreshFlowsLinks};t.default=(0,i.connect)(function(e){return{items:e.content.itemsById}},m)(_)},226:function(e,t,n){var o=n(806);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},244:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.revertPendingFileChanges=t.getHost=t.fetchStatus=void 0;var o=l(n(31)),r=l(n(984)),a=l(n(914));function l(e){return e&&e.__esModule?e:{default:e}}t.fetchStatus=function(){return o.default.get("/api/ghost_content/status").then(function(e){return function(e){return(0,a.default)(e,function(e){return(0,r.default)(e,"file")})}(e.data)})},t.getHost=function(){var e=document.location;return e.protocol+"//"+e.host},t.revertPendingFileChanges=function(e,t){return o.default.delete("/api/ghost_content/"+e,{params:{file:t}}).then()}},251:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=(o=n(1))&&o.__esModule?o:{default:o},a=n(13);t.default=function(){return r.default.createElement(a.ProgressBar,{active:!0,color:"info",now:100})}},256:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(1)),a=n(13),l=(u(n(11)),u(n(3))),i=u(n(1144)),s=u(n(1070));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.handleEdit=function(e){o.props.handleEdit(e.formData)},o.handleSave=function(e){o.props.handleCreateOrUpdate(e.formData)},c(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){return r.default.createElement(a.Modal,{container:document.getElementById("app"),className:s.default.modal,show:this.props.show,onHide:this.props.handleClose,style:{zIndex:1051}},r.default.createElement(a.Modal.Body,null,r.default.createElement(i.default,{schema:this.props.schema,uiSchema:this.props.uiSchema,formData:this.props.formData,onChange:this.handleEdit,onSubmit:this.handleSave}),r.default.createElement("button",{className:(0,l.default)("bp-button","bp-button-danger",s.default.cancel),onClick:this.props.handleClose},"Cancel")))}}]),t}();t.default=d},257:function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(30),l=n(556),i=(r=n(11))&&r.__esModule?r:{default:r},s=n(16);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var d=new l.Howl({src:["/audio/notification.mp3"]}),f=(0,a.handleActions)((u(o={},s.allNotificationsReceived,function(e,t){var n=t.payload;return[].concat(c(n))}),u(o,s.newNotificationsReceived,function(e,t){var n=t.payload;return i.default.some(n,{sound:!0})&&d.play(),[].concat(c(e.unshift.apply(e,c(n))))}),o),[]);t.default=f},258:function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=n(30),l=n(16);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=(0,a.handleActions)((i(o={},l.modulesReceived,function(e,t){var n=t.payload;return r({},e,{installed:n.filter(function(e){return e.name.startsWith("skill-")}).map(function(e){return{id:e.name,name:e.menuText,icon:e.menuIcon}})})}),i(o,l.buildNewSkill,function(e,t){var n=t.payload;return r({},e,{builder:r({},e.builder,{opened:!0,action:"new",data:{},skillId:n})})}),i(o,l.cancelNewSkill,function(e){return r({},e,{builder:r({},e.builder,{opened:!1})})}),i(o,l.insertNewSkill,function(e,t){var n=t.payload;return r({},e,{builder:r({},e.builder,{opened:!1,data:n.data,skillId:n.skillId})})}),i(o,l.editSkill,function(e,t){var n=t.payload;return r({},e,{builder:r({},e.builder,{opened:!0,action:"edit",skillId:n.skillId,data:n.data,editFlowName:n.flowName,editNodeId:n.nodeId})})}),i(o,l.updateSkill,function(e){return r({},e,{builder:r({},e.builder,{opened:!1})})}),o),{installed:[],builder:{opened:!1,data:{},skillId:null,action:null,editFlowName:null,editNodeId:null}});t.default=s},259:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,a,l=n(30),i=n(16),s=(0,l.handleActions)((o={},a=function(e,t){var n=t.payload;return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n))},(r=i.modulesReceived)in o?Object.defineProperty(o,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[r]=a,o),[]);t.default=s},260:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,a,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=n(30),s=n(16),u=(0,i.handleActions)((o={},a=function(e,t){var n=t.payload;return l({},n)},(r=s.botInfoReceived)in o?Object.defineProperty(o,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[r]=a,o),{});t.default=u},261:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,a,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=n(30),s=n(16),u=(0,i.handleActions)((o={},a=function(e,t){var n=t.payload;return l({},e,n)},(r=s.userReceived)in o?Object.defineProperty(o,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[r]=a,o),{});t.default=u},262:function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=n(30),l=n(16);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=(0,a.handleActions)((i(o={},l.toggleLicenseModal,function(e){return r({},e,{licenseModalOpened:!e.licenseModalOpened})}),i(o,l.toggleAboutModal,function(e){return r({},e,{aboutModalOpened:!e.aboutModalOpened})}),i(o,l.viewModeChanged,function(e,t){var n=t.payload;return r({},e,{viewMode:n.toString()})}),i(o,l.updateGlobalStyle,function(e,t){var n=t.payload;return r({},e,{customStyle:Object.assign({},e.customStyle,n)})}),o),{licenseModalOpened:!1,aboutModalOpened:!1,viewMode:-1,customStyle:{}});t.default=s},263:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,a,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=n(30),s=n(16),u=(0,i.handleActions)((o={},a=function(e,t){var n=t.payload;return l({},e,n)},(r=s.licenseChanged)in o?Object.defineProperty(o,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[r]=a,o),{name:null,text:null,licensed:null,status:null});t.default=u},264:function(e,t,n){"use strict";var o,r,a,l;Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s=n(30),u=p(n(201)),c=p(n(11)),d=n(146),f=n(16);function p(e){return e&&e.__esModule?e:{default:e}}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var h={flowsByName:{},fetchingFlows:!1,currentFlow:null,currentFlowNode:null,showFlowNodeProps:!1,currentDiagramAction:null,currentSnapshot:null,undoStack:[],redoStack:[],nodeInBuffer:null,buffer:{action:null,transition:null}},y=function(e){var t=function(e,t){return c.default.isArray(t)?t.forEach(function(t){c.default.isString(t)?e+=t:(e+=t.node,e+=t.condition)}):e+="null",e};return c.default.values(e.flowsByName).reduce(function(e,n){if(!n)return e;var o="";return o+=n.name,o+=n.startNode,n.catchAll&&(o=t(o,n.catchAll.onReceive),o=t(o,n.catchAll.onEnter),o=t(o,n.catchAll.next)),c.default.orderBy(n.nodes,"id").forEach(function(e){o=t(o,e.onReceive),o=t(o,e.onEnter),o=t(o,e.next),o+=e.id,o+=e.flow,o+=e.type,o+=e.name,o+=e.x,o+=e.y}),c.default.orderBy(n.links,function(e){return e.source+e.target}).forEach(function(e){o+=e.source,o+=e.target,e.points&&e.points.forEach(function(e){o+=e.x,o+=e.y})}),e[n.name]=(0,d.hashCode)(o),e},{})},b=function(e){return i({},e,{currentHashes:y(e)})},g=function(e){return i({},c.default.pick(e,["currentFlow","currentFlowNode","flowsByName"]),{createdAt:new Date})},v=function(e){return!e.currentSnapshot||new Date-e.currentSnapshot.createdAt<500?i({},e,{currentSnapshot:g(e)}):i({},e,{undoStack:[e.currentSnapshot].concat(m(e.undoStack.slice(0,25))),redoStack:[],currentSnapshot:g(e)})},w=function(e){return function(t){var n,o="undoStack"===e?"redoStack":"undoStack";if(0===t[e].length)return t;var r=t[e][0];return i({},t,(_(n={currentSnapshot:r,currentFlow:r.currentFlow,currentFlowNode:r.currentFlowNode,flowsByName:r.flowsByName},e,t[e].slice(1)),_(n,o,[t.currentSnapshot].concat(m(t[o]))),n))}},E=(0,s.handleActions)((_(o={},f.requestFlows,function(e){return i({},e,{fetchingFlows:!0})}),_(o,f.receiveFlows,function(e,t){var n=t.payload,o=c.default.keys(n).filter(function(e){return!n[e].skillData}),r=c.default.keys(n).includes("main.flow.json")?"main.flow.json":c.default.first(o),a=i({},e,{fetchingFlows:!1,flowsByName:n,currentFlow:e.currentFlow||r});return i({},a,{currentSnapshot:g(a)})}),_(o,f.requestSaveFlows,function(e){return i({},e,{savingFlows:!0})}),_(o,f.receiveSaveFlows,function(e){return i({},e,{savingFlows:!1})}),_(o,f.switchFlowNode,function(e,t){var n=t.payload;return i({},e,{currentFlowNode:n})}),_(o,f.openFlowNodeProps,function(e){return i({},e,{showFlowNodeProps:!0})}),_(o,f.closeFlowNodeProps,function(e){return i({},e,{showFlowNodeProps:!1})}),_(o,f.switchFlow,function(e,t){var n=t.payload;return e.currentFlow===n?e:i({},e,{currentFlowNode:null,currentFlow:n})}),_(o,f.setDiagramAction,function(e,t){var n=t.payload;return i({},e,{currentDiagramAction:n})}),_(o,f.handleRefreshFlowLinks,function(e){return i({},e,{flowsByName:i({},e.flowsByName,_({},e.currentFlow,i({},e.flowsByName[e.currentFlow],{nodes:e.flowsByName[e.currentFlow].nodes.map(function(e){return i({},e,{lastModified:new Date})})})))})}),o),h);E=(0,u.default)(E,(0,s.handleActions)((_(r={},f.renameFlow,function(e,t){var n,o,r,a=t.payload;return i({},e,{flowsByName:(n={flow:e.currentFlow,name:a,flows:c.default.values(e.flowsByName)},o=n.flow,r=n.name,n.flows.reduce(function(e,t){if(t.name===o&&(t.name=r,t.location=r),t.nodes){var n=JSON.stringify(t.nodes);n=n.replace(o,r),t.nodes=JSON.parse(n)}return e[t.name]=t,e},{})),currentFlow:a})}),_(r,f.updateFlow,function(e,t){var n=t.payload,o=e.flowsByName[e.currentFlow],r=n.links?o.nodes.map(function(e){var t=n.links.filter(function(t){return t.source===e.id}),r=e.next.map(function(e,n){var r=t.find(function(e){return Number(e.sourcePort.replace("out",""))===n}),a=c.default.find(o.nodes,{id:(r||{}).target}),l="";return(e.node.includes(".flow.json")||"END"===e.node||e.node.startsWith("#"))&&(l=e.node),i({},e,{node:a&&a.name||l})});return i({},e,{next:r,lastModified:new Date})}):o.nodes,a=(n.links||o.links).map(function(e){return i({},e,{points:e.points.map(function(e){var t=e.x,n=e.y;return{x:Math.round(t),y:Math.round(n)}})})});return i({},e,{flowsByName:i({},e.flowsByName,_({},e.currentFlow,i({},o,{nodes:r},n,{links:a})))})}),_(r,f.createFlow,function(e,t){var n=t.payload;return i({},e,{flowsByName:i({},e.flowsByName,_({},n,{version:"0.1",name:n,location:n,startNode:"entry",catchAll:{},links:[],nodes:[{id:(0,d.prettyId)(),name:"entry",onEnter:[],onReceive:null,next:[],x:100,y:100}]})),currentFlow:n,currentFlowNode:null})}),_(r,f.deleteFlow,function(e,t){var n=t.payload;return i({},e,{currentFlow:e.currentFlow===n?null:e.currentFlow,currentFlowNode:e.currentFlow===n?null:e.currentFlowNode,flowsByName:c.default.omit(e.flowsByName,n)})}),_(r,f.insertNewSkill,function(e,t){var n=t.payload,o=n.skillId.replace(/^botpress-skill-/i,"").replace(/^@botpress\/skill-/i,"").replace(/^skill-/i,""),r=(0,d.prettyId)(6),a="skills/"+o+"-"+r+".flow.json",l=Object.assign({},n.generatedFlow,{skillData:n.data,name:a,location:a}),s={id:"skill-"+r,type:"skill-call",skill:o,name:o+"-"+r,flow:a,next:n.transitions||[],onEnter:null,onReceive:null};return i({},e,{currentDiagramAction:"insert_skill",nodeInBuffer:s,flowsByName:i({},e.flowsByName,_({},l.name,l))})}),_(r,f.updateSkill,function(e,t){var n,o=t.payload,r=Object.assign({},e.flowsByName[o.editFlowName],o.generatedFlow,{skillData:o.data,name:o.editFlowName,location:o.editFlowName}),a=e.flowsByName[e.currentFlow].nodes.map(function(e){return e.id!==o.editNodeId?e:Object.assign({},e,{next:o.transitions})});return i({},e,{flowsByName:i({},e.flowsByName,(n={},_(n,o.editFlowName,r),_(n,e.currentFlow,i({},e.flowsByName[e.currentFlow],{nodes:a})),n))})}),_(r,f.insertNewSkillNode,function(e,t){var n=t.payload;return i({},e,{flowsByName:i({},e.flowsByName,_({},e.currentFlow,i({},e.flowsByName[e.currentFlow],{nodes:[].concat(m(e.flowsByName[e.currentFlow].nodes),[c.default.merge(e.nodeInBuffer,c.default.pick(n,["x","y"]))])})))})}),_(r,f.duplicateFlow,function(e,t){var n=t.payload,o=n.flowNameToDuplicate,r=n.name;return i({},e,{flowsByName:i({},e.flowsByName,_({},r,i({},e.flowsByName[o],{name:r,location:r,nodes:e.flowsByName[o].nodes.map(function(e){return i({},e,{id:(0,d.prettyId)()})})}))),currentFlow:r,currentFlowNode:null})}),_(r,f.updateFlowNode,function(e,t){var n=t.payload,o=e.flowsByName[e.currentFlow],r=c.default.find(e.flowsByName[e.currentFlow].nodes,{id:e.currentFlowNode}),a=function(e){return e===(r||{}).name&&n.name};return i({},e,{flowsByName:i({},e.flowsByName,_({},e.currentFlow,i({},o,{startNode:a(o.startNode)?n.name:o.startNode,nodes:o.nodes.map(function(t){return t.id!==e.currentFlowNode?i({},t,{next:t.next.map(function(e){return i({},e,{node:a(e.node)?n.name:e.node})})}):i({},t,n,{lastModified:new Date})})})))})}),_(r,f.removeFlowNode,function(e,t){var n=t.payload,o=[],r=c.default.find(e.flowsByName[e.currentFlow].nodes,{id:n});return"skill-call"===r.type&&function(e,t){return c.default.flatten(c.default.values(e.flowsByName).map(function(e){return e.nodes})).filter(function(e){return e.flow===t||c.default.find(e.next,{node:t})}).map(function(e){return e.id})}(e,r.flow).length<=1&&o.push(r.flow),i({},e,{flowsByName:i({},c.default.omit(e.flowsByName,o),_({},e.currentFlow,i({},e.flowsByName[e.currentFlow],{nodes:e.flowsByName[e.currentFlow].nodes.filter(function(e){return e.id!==n})})))})}),_(r,f.copyFlowNode,function(e){var t=c.default.find(e.flowsByName[e.currentFlow].nodes,{id:e.currentFlowNode});return t?i({},e,{nodeInBuffer:i({},t,{next:t.next.map(function(e){return i({},e,{node:""})})})}):e}),_(r,f.pasteFlowNode,function(e,t){var n=t.payload,o=n.x,r=n.y,a=e.flowsByName[e.currentFlow],l=(0,d.prettyId)(),s=function(e,t){var n=e.filter(function(e){return e.startsWith(t+"-copy")});if(!n.length)return t+"-copy";for(var o=1;;){if(!n.find(function(e){return e===t+"-copy-"+o}))return t+"-copy-"+o;o+=1}}(a.nodes.map(function(e){return e.name}),e.nodeInBuffer.name);return i({},e,{currentFlowNode:l,flowsByName:i({},e.flowsByName,_({},e.currentFlow,i({},a,{nodes:[].concat(m(a.nodes),[i({},e.nodeInBuffer,{id:l,name:s,lastModified:new Date,x:o,y:r})])})))})}),_(r,f.copyFlowNodeElement,function(e,t){var n=t.payload;return i({},e,{buffer:i({},e.buffer,n)})}),_(r,f.pasteFlowNodeElement,function(e,t){var n=t.payload,o=e.buffer[{onEnter:"action",onReceive:"action",next:"transition"}[n]];if(!o)return e;var r=e.flowsByName[e.currentFlow],a=c.default.find(r.nodes,{id:e.currentFlowNode});return function(t){return i({},e,{flowsByName:i({},e.flowsByName,_({},e.currentFlow,i({},r,t)))})}(a?{nodes:[].concat(m(r.nodes.filter(function(t){return t.id!==e.currentFlowNode})),[i({},a,_({},n,[].concat(m(a[n]||[]),[o])))])}:{catchAll:i({},r.catchAll,_({},n,[].concat(m(r.catchAll[n]),[o])))})}),_(r,f.createFlowNode,function(e,t){var n=t.payload;return i({},e,{flowsByName:i({},e.flowsByName,_({},e.currentFlow,i({},e.flowsByName[e.currentFlow],{nodes:[].concat(m(e.flowsByName[e.currentFlow].nodes),[c.default.merge({id:(0,d.prettyId)(),name:"node-"+(0,d.prettyId)(4),x:0,y:0,next:[],onEnter:[],onReceive:null},n)])})))})}),r),h)),E=(0,u.default)(E,(0,s.handleActions)((_(a={},f.receiveFlows,function(e){var t=y(e);return i({},e,{currentHashes:t,initialHashes:t})}),_(a,f.receiveSaveFlows,function(e){var t=y(e);return i({},e,{currentHashes:t,initialHashes:t})}),_(a,f.updateFlow,b),_(a,f.renameFlow,b),_(a,f.updateFlowNode,b),_(a,f.createFlowNode,b),_(a,f.createFlow,b),_(a,f.deleteFlow,b),_(a,f.duplicateFlow,b),_(a,f.removeFlowNode,b),_(a,f.pasteFlowNode,b),_(a,f.insertNewSkillNode,b),_(a,f.updateSkill,b),_(a,f.pasteFlowNodeElement,b),a),h)),E=(0,u.default)(E,(0,s.handleActions)((_(l={},f.updateFlow,v),_(l,f.renameFlow,v),_(l,f.updateFlowNode,v),_(l,f.createFlowNode,v),_(l,f.createFlow,v),_(l,f.deleteFlow,v),_(l,f.duplicateFlow,v),_(l,f.removeFlowNode,v),_(l,f.pasteFlowNode,v),_(l,f.insertNewSkill,v),_(l,f.insertNewSkillNode,v),_(l,f.updateSkill,v),_(l,f.pasteFlowNodeElement,v),_(l,f.handleFlowEditorUndo,w("undoStack")),_(l,f.handleFlowEditorRedo,w("redoStack")),l),h)),t.default=E},265:function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0});var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=n(30),i=((r=n(11))&&r.__esModule,n(16));function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=(0,l.handleActions)((s(o={},i.receiveContentCategories,function(e,t){var n=t.payload;return a({},e,{categories:n})}),s(o,i.receiveContentItems,function(e,t){var n=t.payload;return a({},e,{currentItems:n})}),s(o,i.receiveContentItemsRecent,function(e,t){var n=t.payload;return a({},e,{recentItems:n})}),s(o,i.receiveContentItem,function(e,t){var n=t.payload;return a({},e,{itemsById:a({},e.itemsById,s({},n.id,n))})}),s(o,i.receiveContentItemsCount,function(e,t){var n=t.payload;return a({},e,{itemsCount:n.data.count})}),o),{categories:null,currentItems:[],recentItems:[],itemsById:{},itemsCount:0})},266:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canFlowRedo=t.canFlowUndo=t.getDirtyFlows=t.getCurrentFlowNode=t.getCurrentFlow=void 0;var o,r=(o=n(11))&&o.__esModule?o:{default:o},a=t.getCurrentFlow=function(e){return e.flows.flowsByName[e.flows.currentFlow]||null};t.getCurrentFlowNode=function(e){if(e.flows&&e.flows.currentFlow&&e.flows.currentFlowNode){var t=a(e);return t&&r.default.find(t.nodes,{id:e.flows.currentFlowNode})}},t.getDirtyFlows=function(e){if(!e.flows)return[];var t=r.default.keys(e.flows.currentHashes),n=r.default.keys(e.flows.initialHashes),o=r.default.union(t,n),a=r.default.union(r.default.xor(o,t),r.default.xor(o,n));return r.default.keys(e.flows.flowsByName).forEach(function(t){e.flows.initialHashes[t]!==e.flows.currentHashes[t]&&a.push(t)}),a},t.canFlowUndo=function(e){return e.flows.undoStack.length>0},t.canFlowRedo=function(e){return e.flows.redoStack.length>0}},267:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=(o=n(177))&&o.__esModule?o:{default:o};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxQueue,o=void 0===n?100:n,a=t.maxInterval,l=[],i={},s=function(){if(l.length){var t=l;l=[],e(t).then(function(e){var n=!0,o=!1,r=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var s=a.value;i[s].resolve(e[s]),delete i[s]}}catch(e){o=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw r}}}).catch(function(e){var n=!0,o=!1,r=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var s=a.value;i[s].reject(e),delete i[s]}}catch(e){o=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw r}}})}},u=setInterval(s,void 0===a?20:a);return{add:function(e){if(i[e])return i[e].promise;l.push(e);var t=new r.default(function(t,n){i[e]={resolve:t,reject:n}});return i[e].promise=t,l.length>=o&&s(),t},destroy:function(){clearInterval(u)}}}},269:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),l=f(a),i=n(21),s=n(13),u=f(n(178)),c=n(16),d=f(n(256));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(544);var _=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={showItemEdit:!1,contentToEdit:null},o.editItem=function(){var e=o.props.contentItem;o.setState({showItemEdit:!0,contentToEdit:e&&e.formData||null})},o.handleUpdate=function(){var e=o.props,t=e.contentItem,n=e.itemId,r=t.categoryId;o.props.upsertContentItem({modifyId:n,categoryId:r,formData:o.state.contentToEdit}).then(function(){return o.setState({showItemEdit:!1,contentToEdit:null})}).then(function(){return o.props.fetchContentItem(o.props.itemId,{force:!0})}).then(o.props.onUpdate||function(){})},o.onChange=function(e){o.props.fetchContentItem(e&&e.id),o.props.onChange(e)},p(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"componentWillReceiveProps",value:function(e){e.contentItem||this.props.fetchContentItem(e.itemId)}},{key:"render",value:function(){var e=this,t=this.props,n=t.inputId,o=t.contentItem,r=t.categoryId,a=t.placeholder,i=o&&o.categorySchema||{json:{},ui:{}},u=o&&o.categoryTitle+" | "+o.previewText||"";return l.default.createElement(s.FormGroup,null,l.default.createElement(s.InputGroup,null,l.default.createElement(s.FormControl,{placeholder:a,value:u,disabled:!0,id:n||""}),l.default.createElement(s.InputGroup.Addon,null,o&&l.default.createElement("a",{onClick:this.editItem,style:{marginRight:"8px"}},l.default.createElement(s.Glyphicon,{glyph:"pencil"})),l.default.createElement("a",{onClick:function(){return window.botpress.pickContent({categoryId:r},e.onChange)}},l.default.createElement(s.Glyphicon,{glyph:"folder-open"}))),l.default.createElement(d.default,{show:this.state.showItemEdit,schema:i.json,uiSchema:i.ui,handleClose:function(){return e.setState({showItemEdit:!1,contentToEdit:null})},formData:this.state.contentToEdit,handleEdit:function(t){return e.setState({contentToEdit:t})},handleCreateOrUpdate:this.handleUpdate})))}}]),t}(),m={upsertContentItem:c.upsertContentItem,fetchContentItem:c.fetchContentItem},h=(0,i.connect)(function(e,t){return{contentItem:e.content.itemsById[t.itemId]}},m)(_);t.default=function(e){return l.default.createElement(h,o({},e,{store:u.default}))}},322:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=d(r),l=d(n(11)),i=d(n(3)),s=n(13),u=d(n(656)),c=d(n(225));function d(e){return e&&e.__esModule?e:{default:e}}function f(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=n(91),m=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={showActionModalForm:!1},o.onSubmitAction=function(e){var t=o.optionsToItem(e),n=o.state.itemToEditIndex,r=o.props.items;o.setState({showActionModalForm:!1,itemToEditIndex:null}),o.props.onItemsUpdated(Number.isInteger(n)?r.map(function(e,o){return o===n?t:e}):[].concat(f(r||[]),[t]))},p(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"onMoveAction",value:function(e,t){var n=[].concat(f(this.props.items)),o=n[e],r=n[e+t];n[e+t]=o,n[e]=r,this.props.onItemsUpdated(n)}},{key:"optionsToItem",value:function(e){return"message"===e.type?e.message:e.functionName+" "+JSON.stringify(e.parameters||{})}},{key:"itemToOptions",value:function(e){if(e&&e.startsWith("say ")){var t=e.split(" "),n=e;return t.length>2&&(n=l.default.slice(t,2).join(" ")),{type:"message",message:n}}if(e){var o=e.includes(" ")?JSON.parse(e.substring(e.indexOf(" ")+1)):{};return{type:"code",functionName:e.split(" ")[0],parameters:o}}}},{key:"onRemoveAction",value:function(e){var t=[].concat(f(this.props.items));l.default.pullAt(t,[e]),this.props.onItemsUpdated(t)}},{key:"onCopyAction",value:function(e){this.props.copyItem(this.props.items[e])}},{key:"onEdit",value:function(e){this.setState({itemToEditIndex:e,showActionModalForm:!0})}},{key:"renderWait",value:function(){var e=this,t=this.props,n=t.items,o=t.readOnly;if(!this.props.waitable||n&&n.length>0)return null;var r=l.default.isArray(n);return a.default.createElement("label",null,a.default.createElement("input",{name:"isGoing",type:"checkbox",checked:r,disabled:o,onChange:function(){return e.props.onItemsUpdated&&e.props.onItemsUpdated(r?null:[])}}),"  Wait for user message")}},{key:"render",value:function(){var e=this,t=this.props,n=t.items,o=t.readOnly;return n||(n=[]),a.default.createElement(r.Fragment,null,a.default.createElement("div",null,this.renderWait(),n.map(function(t,r){return a.default.createElement(c.default,{className:_.item,text:t,key:r+"."+t},!o&&a.default.createElement("div",{className:_.actions},a.default.createElement("a",{onClick:function(){return e.onEdit(r)}},"Edit"),a.default.createElement("a",{onClick:function(){return e.onRemoveAction(r)}},"Remove"),a.default.createElement("a",{onClick:function(){return e.onCopyAction(r)}},"Copy"),function(t){return t>0?a.default.createElement("a",{onClick:function(){return e.onMoveAction(t,-1)}},"Up"):null}(r),function(t){return t<n.length-1?a.default.createElement("a",{onClick:function(){return e.onMoveAction(t,1)}},"Down"):null}(r)))}),!o&&a.default.createElement("div",{className:_.actions},a.default.createElement(s.Button,{onClick:function(){return e.setState({showActionModalForm:!0})},bsSize:"xsmall"},a.default.createElement("i",{className:(0,i.default)("material-icons",_.actionIcons)},"add")),a.default.createElement(s.Button,{onClick:this.props.pasteItem,bsSize:"xsmall",disabled:!this.props.canPaste},a.default.createElement("i",{className:(0,i.default)("material-icons",_.actionIcons)},"content_paste")))),!o&&a.default.createElement(u.default,{show:this.state.showActionModalForm,onClose:function(){return e.setState({showActionModalForm:!1,itemToEditIndex:null})},onSubmit:this.onSubmitAction,item:this.itemToOptions(n&&n[this.state.itemToEditIndex])}))}}]),t}();t.default=m},323:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=i(r),l=i(n(3));function i(e){return e&&e.__esModule?e:{default:e}}var s=n(224),u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChanged=function(e){var t=e.target.value;n.props.transform&&(t=n.props.transform(t)),n.setState({value:t})},n.onKeyDown=function(e){13===e.keyCode&&e.target.blur()},n.onBlur=function(){n.props.readOnly||(n.props.value.length?n.props.onChanged&&n.props.onChanged(n.state.value):n.props.onChanged&&n.props.onChanged(n.state.defaultValue))},n.state={value:e.value||e.defaultValue},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this.input)}},{key:"componentWillReceiveProps",value:function(e){this.setState({value:e.value||e.defaultValue})}},{key:"render",value:function(){var e,t,n,o=this,r=Math.max(120,20+8*this.props.value.length)+"px",i=(0,l.default)(s.editableInput,this.props.className,(e={},t=s.defaultValue,n=this.props.value===this.props.defaultValue,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e));return a.default.createElement("input",{className:i,type:"text",ref:function(e){return o.input=e},style:{width:r},autoComplete:"off",value:this.state.value,disabled:!!this.props.readOnly,onBlur:this.onBlur,onChange:this.onChanged,onKeyDown:this.onKeyDown})}}]),t}();t.default=u},327:function(e,t,n){var o=n(681);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},360:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StandardIncomingPortModel=t.StandardPortWidget=t.StandardPortWidgetDisconnected=t.StandardOutgoingPortModel=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,o)}if("value"in r)return r.value;var l=r.get;return void 0!==l?l.call(o):void 0},a=u(n(1)),l=u(n(3)),i=u(n(11)),s=n(69);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=n(134),m=_.PortWidget,h=_.PortModel,y=n(226),b=(t.StandardOutgoingPortModel=function(e){function t(e){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return p(t,h),o(t,[{key:"serialize",value:function(){return i.default.merge(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serialize",this).call(this),{})}},{key:"deSerialize",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deSerialize",this).call(this,e)}}]),t}(),t.StandardPortWidgetDisconnected=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,a.default.Component),o(t,[{key:"renderSubflowNode",value:function(){var e=this,t=this.props.node,n=Number(this.props.name.replace("out","")),o=t.next[n].node.replace(/\.flow\.json/,"");return a.default.createElement("div",{className:y.label},a.default.createElement("a",{href:"javascript:void(0);",onClick:function(){return e.props.history.push("/flows/"+o)}},o))}},{key:"renderEndNode",value:function(){return a.default.createElement("div",{className:y.label},"End of flow")}},{key:"renderStartNode",value:function(){return a.default.createElement("div",{className:y.label},"Start")}},{key:"renderReturnNode",value:function(){var e=this.props.node,t=Number(this.props.name.replace("out","")),n=e.next[t].node.substr(1);return n.length||(n="@calling"),a.default.createElement("div",{className:y.label},"Return (",n,")")}},{key:"render",value:function(){var e,t="normal",n=!1;if("in"===this.props.name&&this.props.node.isStartNode)t="start";else if("in"!==this.props.name){var o=Number(this.props.name.replace(/out/i,"")),r=i.default.get(this.props.node,"next."+o);r.node&&"end"===r.node.toLowerCase()?t="end":/\.flow\.json/i.test(r.node)?t="subflow":/^#/i.test(r.node)?t="return":""===r.node&&(n=!0)}var s=(0,l.default)(this.props.className,y.portContainer,(c(e={},y.startPort,"start"===t),c(e,y.subflowPort,"subflow"===t),c(e,y.endPort,"end"===t),c(e,y.returnPort,"return"===t),c(e,y.portLabel,/end|subflow|start|return/i.test(t)),c(e,y.missingConnection,n),e));return a.default.createElement("div",{className:s},a.default.createElement(m,this.props),"subflow"===t&&this.renderSubflowNode(),"end"===t&&this.renderEndNode(),"start"===t&&this.renderStartNode(),"return"===t&&this.renderReturnNode())}}]),t}());t.StandardPortWidget=(0,s.withRouter)(b),t.StandardIncomingPortModel=function(e){function t(e){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return p(t,h),o(t,[{key:"serialize",value:function(){return i.default.merge(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serialize",this).call(this),{})}},{key:"deSerialize",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deSerialize",this).call(this,e)}}]),t}()},384:function(e,t,n){var o=n(992);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},508:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=d(r),l=d(n(0)),i=n(13),s=d(n(9)),u=d(n(3)),c=d(n(145));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){function t(e,n,o){var r=o.itemComponent,a=o.renderDivider,l=o.styles;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.markAllAsRead=function(){c.default.default.emit("notifications.allRead")},i.trashAll=function(){c.default.default.emit("notifications.trashAll")},i.itemComponent=r,i.renderDivider=a,i.styles=l,i.state={selectedIndex:null},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"onNotifClicked",value:function(e){this.markAsRead(e),this.context.router.history.push(e.url)}},{key:"markAsRead",value:function(e){c.default.default.emit("notifications.read",e.id)}},{key:"renderMarkAsReadButton",value:function(e,t){var n=this;if(this.state.selectedIndex!==t||e.read)return null;var o=a.default.createElement(i.Tooltip,{id:"ttip"},"Mark as read"),r=(0,u.default)("glyphicon glyphicon-ok",this.styles["mark-read-btn"]);return a.default.createElement(i.OverlayTrigger,{placement:"left",overlay:o},a.default.createElement("em",{className:r,onClick:function(t){return t.preventDefault(),t.stopPropagation(),n.markAsRead(e),!1}}))}},{key:"renderMenuItem",value:function(e,t){var n=this,o=this.itemComponent,r=this.styles,l=(0,s.default)(new Date(e.date)).fromNow(),c=function(e,t){var n;return(0,u.default)((f(n={animated:!0,fadeIn:!0,notif:!0},e.item,!0),f(n,e["level-"+t.level],!0),f(n,e["item-unread"],!t.read),f(n,"bp-item",!0),f(n,"bp-level-"+t.level,!0),f(n,"bp-item-unread",!t.read),n))}(r,e),d=this.renderMarkAsReadButton(e,t),p=(0,u.default)("icon","material-icons",this.styles.icon);return a.default.createElement(o,{key:e.id,className:c,onMouseOver:function(){return n.setState({selectedIndex:t})},onMouseLeave:function(){return n.setState({selectedIndex:-1})}},a.default.createElement(i.Row,null,a.default.createElement(i.Col,{xs:11,onClick:function(){return n.onNotifClicked(e)}},a.default.createElement("strong",{className:r.header},a.default.createElement("i",{className:p},e.icon),"  ",e.name),this.renderMessage(e.message),a.default.createElement("small",{className:"text-muted"},l)),a.default.createElement(i.Col,{xs:1,className:r.markAsReadButton},d)))}},{key:"renderMenuItems",value:function(e){var t=this,n=this.itemComponent;return e.map(function(o,r){return[t.renderMenuItem(o,r),(l=r,l+1===e.length?null:t.renderDivider&&a.default.createElement(n,{divider:!0,style:{margin:0}}))];var l})}}]),t}();p.contextTypes={router:l.default.object.isRequired},t.default=p},533:function(e,t){},544:function(e,t,n){var o=n(1068);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},61:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.operationAllowed=void 0;var o=n(1072),r=t.operationAllowed=function(e){var t=e.user,n=e.res,r=e.op;return!(!t||t.roles&&!(0,o.checkMultipleRoles)(t.roles,r,n))};t.default=function(e){var t=e.user,n=e.res,o=e.op,a=e.children,l=e.fallback,i=void 0===l?null:l;return r({user:t,res:n,op:o})?a:i}},630:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".style__panel-center___3WCxu {\n  width: 320px;\n  height: 275px;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto; }\n\n.style__panel-center___3WCxu.style__panel-center-tall___sjGe3 {\n  height: 310px; }\n\n.style__panel-center___3WCxu .panel-body {\n  position: relative; }\n\n.style__panel-center___3WCxu .style__header___13gpi {\n  border-bottom: 1px solid #e4eaec; }\n\n.style__error___WAnN9 {\n  text-align: center;\n  color: #e84a4a;\n  font-weight: 600; }\n\n.style__success___3ypEm {\n  color: #37e85e; }\n\n.style__loading___1DND- {\n  width: 100%;\n  height: 100%;\n  background-color: white;\n  opacity: 0.8;\n  position: absolute;\n  top: 0;\n  left: 0; }\n\n.style__logo___3ZejJ {\n  text-align: center;\n  margin-bottom: 30px; }\n  .style__logo___3ZejJ img {\n    width: 150px; }\n\n.style__body___2NrcJ {\n  background-color: #e4eaec; }\n\n.style__cloudContainer___j-q40 {\n  text-align: center; }\n  .style__cloudContainer___j-q40 .btn {\n    background: black;\n    color: white;\n    border: none;\n    border-radius: 0; }\n\n.style__cloudButton___Pq9ru {\n  background: black;\n  border: none;\n  color: white;\n  border-radius: 0; }\n",""]),t.locals={"panel-center":"style__panel-center___3WCxu","panel-center-tall":"style__panel-center-tall___sjGe3",header:"style__header___13gpi",error:"style__error___WAnN9",success:"style__success___3ypEm",loading:"style__loading___1DND-",logo:"style__logo___3ZejJ",body:"style__body___2NrcJ",cloudContainer:"style__cloudContainer___j-q40",cloudButton:"style__cloudButton___Pq9ru"}},631:function(e,t,n){var o=n(630);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},632:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=f(r),l=f(n(0)),i=f(n(173)),s=n(13),u=f(n(3)),c=f(n(631)),d=n(75);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={user:"admin",password:"",error:null,loading:!1},o.handlePasswordChange=function(e){o.setState({password:e.target.value})},o.handleUserChange=function(e){o.setState({user:e.target.value})},o.handleSubmit=function(e){e.preventDefault(),o.setState({loading:!0}),(0,d.login)(o.state.user,o.state.password).then(function(e){o.setState({error:null}),o.context.router.history.push(o.props.location.query.returnTo||"/")}).catch(function(e){o.setState({error:e.message,loading:!1})})},p(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"componentDidMount",value:function(){var e=document.getElementById("app");e.className=(0,u.default)(e.className,"bp-body-login")}},{key:"renderLoading",value:function(){var e=(0,u.default)(c.default.loading,"bp-loading");return this.state.loading&&a.default.createElement("div",{className:e},a.default.createElement("div",{style:{marginTop:"140px"},className:"whirl helicopter"}))}},{key:"componentWillUnmount",value:function(){var e=document.getElementById("app");e.className=(0,u.default)(e.className.replace("bp-body-login",""))}},{key:"renderLoginCloud",value:function(){var e=window.BOTPRESS_CLOUD_SETTINGS,t=e.endpoint,n=e.botId,o=e.env,r=t+"/login?"+i.default.stringify({action:"redirect",direct:1,botId:n,env:o,params:JSON.stringify({returnTo:this.props.location.query.returnTo||"/"})});return a.default.createElement("div",{className:c.default.cloudContainer},a.default.createElement(s.Button,{href:r},"Sign in with ",a.default.createElement("b",{style:{fontWeight:600}},"Botpress Cloud")))}},{key:"renderLoginRoot",value:function(){return a.default.createElement("form",{onSubmit:this.handleSubmit},a.default.createElement(s.FormGroup,null,a.default.createElement(s.ControlLabel,null,"User"),a.default.createElement(s.FormControl,{type:"text",placeholder:"",value:this.state.user,onChange:this.handleUserChange,readOnly:!0})),a.default.createElement(s.FormGroup,null,a.default.createElement(s.ControlLabel,null,"Password"),a.default.createElement(s.FormControl,{type:"password",placeholder:"",value:this.state.password,onChange:this.handlePasswordChange})),a.default.createElement(s.Button,{className:"pull-right",type:"submit"},"Login"))}},{key:"render",value:function(){var e,t,n,o=!!this.props.location.query.reset,r=!!this.state.error,l=o||r,i=(0,u.default)("panel"),s=(0,u.default)("bp-login",c.default["panel-center"],(e={},n=l,(t=c.default["panel-center-tall"])in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)),d=(0,u.default)("bp-logo",c.default.logo),f=(0,u.default)("panel-heading","text-center",c.default.header,"bp-header"),p=(0,u.default)(c.default.error),_=(0,u.default)(c.default.success),m=window.BOTPRESS_CLOUD_ENABLED?this.renderLoginCloud():this.renderLoginRoot(),h=this.state.error||this.props.location.query.error;return a.default.createElement("div",null,a.default.createElement("div",{className:"block-center mt-xl wd-xl"},a.default.createElement("div",{className:s},a.default.createElement("div",{className:d},a.default.createElement("img",{src:"/img/logo_grey.png"})),a.default.createElement("div",{className:i},a.default.createElement("div",{className:f},a.default.createElement("h4",{style:{textTransform:"none",fontWeight:600}},"Login")),a.default.createElement("div",{className:"panel-body"},this.renderLoading(),h&&a.default.createElement("p",{className:p},h),o&&a.default.createElement("p",{className:_},"Password changed successfully"),m)," ")," ")," "))}}]),t}();_.contextTypes={router:l.default.object},t.default=_},633:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".style__container___1FP9B {\n  margin-top: 50px;\n  border-top: 1px solid #ffffff;\n  background-color: #eee;\n  color: #2f2f2f; }\n",""]),t.locals={container:"style__container___1FP9B"}},634:function(e,t,n){var o=n(633);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},635:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(1)),a=n(21),l=u(n(0)),i=u(n(132)),s=n(210);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,l=Array(a),i=0;i<a;i++)l[i]=arguments[i];return n=o=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),o.renderNotFound=function(){return r.default.createElement("div",null)},c(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.site,o=t.modules,a=(0,s.moduleViewNames)(o,n);return r.default.createElement("div",{className:"bp-plugins bp-injection-site"},a.map(function(t,n){var o=t.moduleName,a=t.viewName;return r.default.createElement(i.default,{key:n,moduleName:o,viewName:a,onNotFound:e.renderNotFound})}))}}]),t}();d.contextTypes={router:l.default.object.isRequired},t.default=(0,a.connect)(function(e){return{modules:e.modules}})(d)},636:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".style__logs-panel___RpJrJ {\n  background-color: #191f28;\n  color: rgba(255, 255, 255, 0.85);\n  border: none;\n  margin-top: -4px;\n  border-radius: 0px;\n  border-bottom-right-radius: 3px;\n  border-bottom-left-radius: 3px;\n  border-top: #b1b1b1 2px solid;\n  min-height: 300px;\n  position: relative;\n  font-family: Courier;\n  font-style: normal;\n  font-variant: normal; }\n\n.style__logs-panel___RpJrJ .panel-body {\n  padding: 15px 15px 30px 15px; }\n\n.style__logs-panel-footer___zGeB5 {\n  position: absolute;\n  bottom: 0px;\n  text-align: center;\n  width: 100%;\n  background-color: #404040;\n  border-bottom-right-radius: 3px;\n  border-bottom-left-radius: 3px;\n  padding: 2px 0;\n  cursor: pointer; }\n\n.style__logs-panel-footer___zGeB5 a {\n  color: white; }\n\n.style__logs-panel-footer___zGeB5 a:hover {\n  color: white; }\n\n.style__logs-panel-footer___zGeB5:hover {\n  background-color: #505050; }\n\n.style__panel___2yrFM {\n  margin-bottom: 0px; }\n\n.style__panel-checkbox___392gs {\n  margin: 8px 0; }\n\nul.style__events___NOrnz {\n  word-wrap: break-word;\n  list-style: none;\n  padding: 0; }\n\n.style__line___1oKUJ span {\n  margin-left: 7px; }\n\n.style__line___1oKUJ .style__time___1s1Iw {\n  color: #808080; }\n\n.style__line___1oKUJ .style__level-silly___2jWbF {\n  color: #6c6c6c; }\n\n.style__line___1oKUJ .style__level-debug___2H58e {\n  color: #b59fff; }\n\n.style__line___1oKUJ .style__level-verbose___2Hyqt {\n  color: #a4fffc; }\n\n.style__line___1oKUJ .style__level-info___aCcmU {\n  color: #6cbdff; }\n\n.style__line___1oKUJ .style__level-warn___3LWOH {\n  color: #fce465; }\n\n.style__line___1oKUJ .style__level-error___YQJqr {\n  color: #fe5151; }\n",""]),t.locals={"logs-panel":"style__logs-panel___RpJrJ","logs-panel-footer":"style__logs-panel-footer___zGeB5",panel:"style__panel___2yrFM","panel-checkbox":"style__panel-checkbox___392gs",events:"style__events___NOrnz",line:"style__line___1oKUJ",time:"style__time___1s1Iw","level-silly":"style__level-silly___2jWbF","level-debug":"style__level-debug___2H58e","level-verbose":"style__level-verbose___2Hyqt","level-info":"style__level-info___aCcmU","level-warn":"style__level-warn___3LWOH","level-error":"style__level-error___YQJqr"}},637:function(e,t,n){var o=n(636);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},638:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=_(r),l=n(13),i=_(n(31)),s=_(n(11)),u=_(n(3)),c=_(n(9)),d=_(n(80)),f=_(n(81)),p=_(n(637));function _(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={autoRefresh:!0,logs:null,limit:25,hasMore:!1},o.loadMore=function(){o.setState(function(e){return{limit:e.limit+50}})},o.toggleAutoRefresh=function(){o.state.autoRefresh?clearInterval(o.refreshInterval):o.refreshInterval=setInterval(o.queryLogs,1e3),o.setState({autoRefresh:!o.state.autoRefresh})},o.queryLogs=function(){i.default.get("/api/logs",{params:{limit:o.state.limit}}).then(function(e){o.cancelLoading||o.setState({logs:e.data,hasMore:e.data&&e.data.length>=o.state.limit})})},m(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"componentDidMount",value:function(){this.state.logs||(this.getArchiveKey(),this.queryLogs(),this.refreshInterval=setInterval(this.queryLogs,1e3))}},{key:"componentWillUnmount",value:function(){clearInterval(this.refreshInterval),this.cancelLoading=!0}},{key:"renderLine",value:function(e,t){var n=(0,c.default)(new Date(e.timestamp)).format("MMM DD HH:mm:ss"),o=e.message.replace(/\[\d\d?m/gi,"");return a.default.createElement("li",{key:t+"."+o,className:p.default.line},a.default.createElement("span",{className:p.default.time},n),a.default.createElement("span",{className:p.default["level-"+e.level]},e.level+": "),a.default.createElement("span",{className:p.default.message},o))}},{key:"renderLoading",value:function(){return a.default.createElement("div",{style:{marginTop:"20px"},className:"whirl traditional"})}},{key:"getArchiveKey",value:function(){var e=this;i.default.get("/api/logs/key").then(function(t){var n=t.data;return e.setState({archiveUrl:"/api/logs/archive/"+n.secret})})}},{key:"renderLines",value:function(){return s.default.isArray(this.state.logs)?this.state.logs.filter(function(e){return s.default.isString(e.message)}).map(this.renderLine):this.renderLoading()}},{key:"render",value:function(){var e=this.renderLines(),t=(0,u.default)("panel","panel-default",p.default["logs-panel"]),n=this.state.limit<500&&this.state.hasMore;return a.default.createElement(f.default,null,a.default.createElement(d.default,null,a.default.createElement("span",null," Logs")),a.default.createElement(l.Panel,{className:p.default.panel},a.default.createElement(l.Panel.Body,null,a.default.createElement("form",{className:"pull-left"},a.default.createElement(l.Checkbox,{className:p.default["panel-checkbox"],checked:this.state.autoRefresh,inline:!0,onChange:this.toggleAutoRefresh},"Auto refresh")),a.default.createElement("div",{className:"pull-right"},a.default.createElement(l.Button,{href:this.state.archiveUrl},"Export logs archive")))),a.default.createElement("div",{className:t},a.default.createElement("div",{className:"panel-body"},a.default.createElement("ul",{className:p.default.events},e)),n&&a.default.createElement("div",{href:"#",className:p.default["logs-panel-footer"],onClick:this.loadMore},"Load more")))}}]),t}();t.default=h},639:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".style__markAsReadButton___1Bf6X {\n  top: 22px;\n  right: 12px; }\n\n.style__item___ScUPF {\n  padding-top: 4px;\n  width: 100%;\n  border-left: 4px solid #e2e2e2; }\n\n.style__item-unread___18PE2.style__level-info___2F8NP {\n  background-color: #f6f8ff;\n  border-left: 4px solid #aeccee; }\n\n.style__item-unread___18PE2.style__level-error___2wEXv {\n  background-color: #fff7f6;\n  border-left: 4px solid #eeb2ae; }\n\n.style__item-unread___18PE2.style__level-success___3d5sa {\n  background-color: #f6fff7;\n  border-left: 4px solid #aeeeb6; }\n\n.style__topMenu___2mLNq {\n  padding: 10px 12px;\n  border-bottom: 1px solid #d1d1d1;\n  color: #5f5f5f;\n  font-size: 13px; }\n\n.style__dropdown___3XUgg {\n  padding: 0; }\n\n.style__header___1ileE {\n  font-size: 16px; }\n\n.style__message___3t56Z {\n  margin-top: 7px;\n  margin-bottom: 5px; }\n\n.style__bar-btn___3u9s7 {\n  margin-left: 10px; }\n\n.style__mark-read-btn___2xGKa:hover {\n  cursor: pointer; }\n",""]),t.locals={markAsReadButton:"style__markAsReadButton___1Bf6X",item:"style__item___ScUPF","item-unread":"style__item-unread___18PE2","level-info":"style__level-info___2F8NP","level-error":"style__level-error___2wEXv","level-success":"style__level-success___3d5sa",topMenu:"style__topMenu___2mLNq",dropdown:"style__dropdown___3XUgg",header:"style__header___1ileE",message:"style__message___3t56Z","bar-btn":"style__bar-btn___3u9s7","mark-read-btn":"style__mark-read-btn___2xGKa"}},640:function(e,t,n){var o=n(639);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},641:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(21),a=n(13),l=d(n(11)),i=d(n(508)),s=d(n(81)),u=d(n(80)),c=d(n(640));function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{itemComponent:a.ListGroupItem,renderDivider:!1,styles:c.default}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),o(t,[{key:"renderMessage",value:function(e){return React.createElement("p",{className:c.default.message},e)}},{key:"render",value:function(){var e=this.props.notifications||[],t=l.default.filter(e,{read:!1}).length,n=e.length>0,o=React.createElement(a.Tooltip,{id:"ttip"},"Delete all"),r=React.createElement(a.Tooltip,{id:"ttip"},"Mark all as read");return React.createElement(s.default,null,React.createElement(u.default,null,React.createElement("span",null," Notifications")),React.createElement(a.Panel,null,React.createElement(a.Panel.Body,null,React.createElement("div",{className:"pull-right"},React.createElement(a.OverlayTrigger,{placement:"left",overlay:r},React.createElement(a.Button,{disabled:0===t,onClick:this.markAllAsRead},React.createElement("em",{className:"glyphicon glyphicon-eye-open"}))),React.createElement(a.OverlayTrigger,{placement:"left",overlay:o},React.createElement(a.Button,{className:c.default["bar-btn"],disabled:!n,onClick:this.trashAll},React.createElement("em",{className:"glyphicon glyphicon-trash"})))))),React.createElement(a.ListGroup,{style:{padding:0}},this.renderMenuItems(e)))}}]),t}();t.default=(0,r.connect)(function(e){return{notifications:e.notifications}})(f)},642:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=d(n(1)),a=d(n(0)),l=n(21),i=d(n(11)),s=d(n(81)),u=d(n(80)),c=d(n(132));function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"shouldComponentUpdate",value:function(e){return JSON.stringify(e)!==JSON.stringify(this.props)}},{key:"renderLink",value:function(e){return e&&e.homepage?r.default.createElement("small",null," ","·"," ",r.default.createElement("a",{target:"_blank",href:e.homepage},"docs")):null}},{key:"renderNotFound",value:function(e){return r.default.createElement("div",{className:"panel panel-warning"},r.default.createElement("div",{className:"panel-heading"},"Module not found"),r.default.createElement("div",{className:"panel-body"},r.default.createElement("h4",null,"The module is not properly registered"),r.default.createElement("p",null,"It seems like you are trying to load a module that has not been registered. Please make sure the module is registered then restart the bot."),e&&r.default.createElement("p",null,e),r.default.createElement("p",null,r.default.createElement("a",{role:"button",className:"btn btn-primary btn-lg"},"Learn more"))))}},{key:"render",value:function(){var e=this.props.modules;if(!e)return null;var t=this.props.match.params,n=t.moduleName,o=t.subView,a=i.default.find(e,{name:n}),l=a?r.default.createElement(c.default,{moduleName:n,viewName:o,onNotFound:this.renderNotFound}):this.renderNotFound(),d=a?r.default.createElement("span",null,a&&a.menuText," ",this.renderLink(a)):"Module "+n+" Not Found",f=i.default.get(a,"moduleView.stretched");return r.default.createElement(s.default,{stretch:f},r.default.createElement(u.default,null,d),l)}}]),t}();f.contextTypes={router:a.default.object.isRequired},t.default=(0,l.connect)(function(e){return{modules:e.modules}})(f)},643:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".style__workspace___2YnVU {\n  width: 100%;\n  min-height: 500px;\n  height: calc(100vh - 93px); }\n\n.style__workspace___2YnVU .Resizer.vertical {\n  background: black;\n  width: 8px;\n  cursor: col-resize;\n  border-left: 5px solid rgba(255, 255, 255, 0) !important;\n  border-right: 5px solid rgba(255, 255, 255, 0) !important;\n  opacity: 0.1;\n  z-index: 1000;\n  margin: 0 -5px; }\n  .style__workspace___2YnVU .Resizer.vertical:hover {\n    opacity: 0.2; }\n\n.style__workspace___2YnVU #style__diagramContainer___32HA9 {\n  outline: none !important; }\n\n.style__workspace___2YnVU .Resizer.horizontal {\n  background: black;\n  height: 8px;\n  cursor: row-resize;\n  border-top: 3px solid rgba(255, 255, 255, 0) !important;\n  border-bottom: 3px solid rgba(255, 255, 255, 0) !important;\n  opacity: 0.1;\n  margin-top: -7px;\n  padding-top: 5px; }\n  .style__workspace___2YnVU .Resizer.horizontal:hover {\n    opacity: 0.2; }\n\n.style__workspace___2YnVU a[role='tab'] {\n  padding: 2px 5px;\n  font-size: 11px;\n  font-weight: 500;\n  border-radius: 0; }\n\n.style__workspace___2YnVU .horizontal.Pane1 {\n  border-bottom: 2px #cecece solid; }\n\n.style__workspace___2YnVU .SplitPane {\n  height: calc(100vh - 93px) !important; }\n\n.style__diagram___Rvob2 {\n  width: 100%;\n  height: 100%; }\n\n.style__sidePanel___39BXV {\n  width: 100%;\n  height: calc(100vh - 93px);\n  background: #fafafa;\n  border-right: 2px solid #cecece;\n  padding: 0;\n  overflow-y: auto; }\n\n.style__diagram___Rvob2 .storm-diagrams-canvas {\n  width: 100%;\n  height: 100%;\n  background: url(\"/img/grid.png\") repeat; }\n\n.style__wrapper___38OL6 {\n  background-color: white; }\n",""]),t.locals={workspace:"style__workspace___2YnVU",diagramContainer:"style__diagramContainer___32HA9",diagram:"style__diagram___Rvob2",sidePanel:"style__sidePanel___39BXV",wrapper:"style__wrapper___38OL6"}},644:function(e,t,n){var o=n(643);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},645:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),l=d(a),i=d(n(3)),s=n(13),u=d(n(322)),c=d(n(211));function d(e){return e&&e.__esModule?e:{default:e}}var f=n(91),p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){var e=this,t=this.props.readOnly,n=Object.assign({onReceive:[],next:[]},this.props.currentFlow&&this.props.currentFlow.catchAll);return l.default.createElement("div",{className:(0,i.default)(f.node)},l.default.createElement(s.Tabs,{animation:!1,id:"node-props-modal-flow-tabs"},l.default.createElement(s.Tab,{eventKey:"on_receive",title:l.default.createElement(a.Fragment,null,l.default.createElement(s.Badge,null,n.onReceive&&n.onReceive.length||0)," On Receive")},l.default.createElement(u.default,{readOnly:t,items:n.onReceive,header:"On Receive",onItemsUpdated:function(t){return e.props.updateFlow({catchAll:o({},n,{onReceive:t})})},copyItem:function(t){return e.props.copyFlowNodeElement({action:t})},pasteItem:function(){return e.props.pasteFlowNodeElement("onReceive")},canPaste:Boolean(this.props.buffer.action)})),l.default.createElement(s.Tab,{eventKey:"transitions",title:l.default.createElement(a.Fragment,null,l.default.createElement(s.Badge,null,n.next&&n.next.length||0)," Transitions")},l.default.createElement(c.default,{readOnly:t,items:n.next,header:"Transitions",currentFlow:this.props.currentFlow,subflows:this.props.subflows,onItemsUpdated:function(t){return e.props.updateFlow({catchAll:o({},n,{next:t})})},copyItem:function(t){return e.props.copyFlowNodeElement({transition:t})},pasteItem:function(){return e.props.pasteFlowNodeElement("next")},canPaste:Boolean(this.props.buffer.transition)}))))}}]),t}();t.default=p},646:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=c(r),l=n(13),i=c(n(61)),s=c(n(323)),u=c(n(211));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=n(91),p=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.renameNode=function(e){e&&e!==o.props.node.name&&o.props.updateNode({name:e})},d(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"transformText",value:function(e){return e.replace(/[^a-z0-9-_\.]/gi,"_")}},{key:"render",value:function(){var e=this,t=this.props,n=t.node,o=t.readOnly;return a.default.createElement("div",{className:f.node},a.default.createElement(l.Panel,null,a.default.createElement(s.default,{readOnly:o,onMount:function(e){e.value.startsWith("node-")&&(e.focus(),e.setSelectionRange(0,1e3))},value:n.name,className:f.name,onChanged:this.renameNode,transform:this.transformText}),a.default.createElement("div",{style:{padding:"5px"}},a.default.createElement(i.default,{user:this.props.user,op:"write",res:"bot.skills"},a.default.createElement(l.Button,{onClick:function(){return e.props.requestEditSkill(n.id)}},"Edit skill")),a.default.createElement(l.Button,{onClick:function(){return e.props.goToFlow(n.flow)}},"See flow"))),a.default.createElement(l.Tabs,{animation:!1,id:"node-props-modal-skill-node-tabs"},a.default.createElement(l.Tab,{eventKey:"transitions",title:a.default.createElement(r.Fragment,null,a.default.createElement(l.Badge,null,n.next&&n.next.length||0)," Transitions")},a.default.createElement(u.default,{readOnly:o,items:n.next,header:"Transitions",subflows:this.props.subflows,onItemsUpdated:function(t){return e.props.updateNode({next:t})}}))))}}]),t}();t.default=p},647:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),l=c(a),i=n(13),s=c(n(230)),u=c(n(11));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=n(91),p=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={typeOfTransition:"end",flowToSubflow:null,flowToNode:null,transitionError:null,conditionError:null},o.onSubmitClick=function(){if(o.validation()){var e={condition:o.state.condition};if("subflow"===o.state.typeOfTransition)e.node=u.default.get(o.state,"flowToSubflow.value")||u.default.get(o.state,"flowToSubflow");else if("end"===o.state.typeOfTransition)e.node="END";else if("node"===o.state.typeOfTransition){var t=o.state.isEdit&&u.default.get(o.props,"item.node");t&&(/^END$/i.test(t)||t.startsWith("#")||/\.flow\.json/i.test(t))&&(t=null),e.node=u.default.get(o.state,"flowToNode.value")||t||""}else"return"===o.state.typeOfTransition?e.node="#"+o.state.returnToNode:e.node="";o.props.onSubmit(e),o.resetForm()}},o.onConditionChanged=function(e){o.setState({condition:e.target.value})},d(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.item;if(!this.props.show&&e.show){if(t&&t.node){var n=-1!==t.node.indexOf(".")?"subflow":"node";n="END"===t.node?"end":n,n=/^#/.test(t.node)?"return":n,this.setState({typeOfTransition:n,condition:t.condition,flowToSubflow:"subflow"===n?t.node:null,flowToNode:"node"===n?t.node:null,returnToNode:"return"===n?t.node.substr(1):""})}else this.resetForm({condition:t&&t.condition||""});this.setState({isEdit:Boolean(t)})}}},{key:"changeTransitionType",value:function(e){var t=this.getSubflowOptions(),n=this.getNodeOptions();this.setState({typeOfTransition:e,flowToSubflow:this.state.flowToSubflow||u.default.get(t,"[0].value"),flowToNode:this.state.flowToNode||u.default.get(n,"[0].value")})}},{key:"validation",value:function(){return"subflow"!==this.state.typeOfTransition||this.state.flowToSubflow?"node"===this.state.typeOfTransition&&!this.state.flowToNode&&this.getNodeOptions().length>0?(this.setState({transitionError:"You must select a subflow to transition to"}),!1):u.default.isEmpty(this.state.condition)?(this.setState({conditionError:"Specify a condition"}),!1):(this.setState({conditionError:null,transitionError:null}),!0):(this.setState({transitionError:"You must select a subflow to transition to"}),!1)}},{key:"resetForm",value:function(e){this.setState(o({typeOfTransition:"node",flowToSubflow:null,flowToNode:null,returnToNode:"",conditionError:null,transitionError:null,condition:""},e))}},{key:"getSubflowOptions",value:function(){return this.props.subflows.map(function(e){return{label:e,value:e}})}},{key:"renderSubflowChoice",value:function(){var e=this;return l.default.createElement(s.default,{name:"flowToSubflow",value:this.state.flowToSubflow,options:this.getSubflowOptions(),onChange:function(t){e.setState({flowToSubflow:t&&t.value})}})}},{key:"renderReturnToNode",value:function(){var e=this,t=function(t){return e.setState({returnToNode:t})};return l.default.createElement("div",{className:f.returnToNodeSection},l.default.createElement("div",null,"Return to node called:"),l.default.createElement("input",{type:"text",value:this.state.returnToNode,onChange:function(e){return t(e.target.value)}}),l.default.createElement("div",null,l.default.createElement("input",{type:"checkbox",id:"rPreviousNode",checked:u.default.isEmpty(this.state.returnToNode),onChange:function(){return t("")}}),l.default.createElement("label",{htmlFor:"rPreviousNode"},"Return to calling node")))}},{key:"getNodeOptions",value:function(){var e=this.props.currentFlow;return e&&e.nodes.map(function(e){var t=e.name;return{label:t,value:t}})||[]}},{key:"renderNodesChoice",value:function(){var e=this;if(!this.props.currentFlow)return null;var t=this.getNodeOptions();return l.default.createElement(s.default,{name:"flowToNode",value:this.state.flowToNode,options:t,onChange:function(t){return e.setState({flowToNode:t})}})}},{key:"render",value:function(){var e=this;return l.default.createElement(i.Modal,{animation:!1,show:this.props.show,onHide:this.props.onClose},l.default.createElement(i.Modal.Header,{closeButton:!0},l.default.createElement(i.Modal.Title,null,this.state.isEdit?"Edit":"New"," condition to transition")),l.default.createElement(i.Modal.Body,null,l.default.createElement("h5",null,"Condition:"),l.default.createElement("div",{className:f.section},this.state.conditionError&&l.default.createElement(i.Alert,{bsStyle:"danger"},this.state.conditionError),l.default.createElement(i.Radio,{defaultChecked:!0},"Raw Expression"),l.default.createElement(i.FormControl,{type:"text",placeholder:"Javascript expression",value:this.state.condition,onChange:this.onConditionChanged})),l.default.createElement("h5",null,"When condition is met, do:"),l.default.createElement("div",{className:f.section},l.default.createElement(i.Radio,{checked:"end"===this.state.typeOfTransition,onChange:function(){return e.changeTransitionType("end")}},"End flow ",l.default.createElement("span",{className:f.endBloc})),l.default.createElement(i.Radio,{checked:"return"===this.state.typeOfTransition,onChange:function(){return e.changeTransitionType("return")}},"Return to previous flow ",l.default.createElement("span",{className:f.returnBloc})),"return"===this.state.typeOfTransition&&this.renderReturnToNode(),l.default.createElement(i.Radio,{checked:"node"===this.state.typeOfTransition,onChange:function(){return e.changeTransitionType("node")}},"Transition to node ",l.default.createElement("span",{className:f.nodeBloc})),"node"===this.state.typeOfTransition&&this.renderNodesChoice(),l.default.createElement(i.Radio,{checked:"subflow"===this.state.typeOfTransition,onChange:function(){return e.changeTransitionType("subflow")}},"Transition to subflow ",l.default.createElement("span",{className:f.subflowBloc})),this.state.transitionError&&l.default.createElement(i.Alert,{bsStyle:"danger"},this.state.transitionError),"subflow"===this.state.typeOfTransition&&this.renderSubflowChoice())),l.default.createElement(i.Modal.Footer,null,l.default.createElement(i.Button,{onClick:this.props.onClose},"Cancel"),l.default.createElement(i.Button,{onClick:this.onSubmitClick,bsStyle:"primary"},this.state.isEdit?"Update":"Create")))}}]),t}();t.default=p},648:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,"h5 {\n  font-weight: 500; }\n\n.style__section___3upAJ {\n  padding: 5px 0 5px 20px;\n  border-left: 3px solid #ddd; }\n\n.style__endBloc___3sG_O,\n.style__nodeBloc___dQ4tK,\n.style__subflowBloc___1_Bfl,\n.style__returnBloc___25Y4o {\n  display: inline-block;\n  width: 20px;\n  height: 15px;\n  margin-top: 5px; }\n\n.style__returnBloc___25Y4o {\n  background-color: darkcyan; }\n\n.style__endBloc___3sG_O {\n  background-color: #e62eea; }\n\n.style__nodeBloc___dQ4tK {\n  background-color: black; }\n\n.style__subflowBloc___1_Bfl {\n  background-color: blue; }\n\n.style__tip___3zVXd {\n  font-size: 90%;\n  color: #777; }\n\n.style__returnToNodeSection___190hz input {\n  padding: 5px; }\n\n.style__node___nSk8m {\n  position: relative; }\n  .style__node___nSk8m .panel-heading {\n    text-transform: none;\n    padding: 8px 5px 5px 5px; }\n    .style__node___nSk8m .panel-heading .panel-title {\n      font-weight: 600;\n      font-size: 12px; }\n  .style__node___nSk8m .tab-content {\n    padding: 10px 0; }\n\n.style__node___nSk8m button + button {\n  margin-left: 5px; }\n\n.style__item___1cABW {\n  padding: 5px 0; }\n  .style__item___1cABW .style__actions___gx30q {\n    display: none; }\n    .style__item___1cABW .style__actions___gx30q a {\n      cursor: pointer;\n      margin-right: 5px; }\n  .style__item___1cABW:hover {\n    background: #fefefe;\n    border-left: 2px solid #999;\n    padding-left: 10px; }\n    .style__item___1cABW:hover .style__actions___gx30q {\n      padding: 10px 0;\n      display: block; }\n\n.style__item___1cABW + .style__item___1cABW {\n  border-top: 1px solid #f9f9f9; }\n\n.style__node___nSk8m .style__name___2TMAK {\n  color: #333;\n  font-weight: 500;\n  border-radius: 0px;\n  background: none;\n  width: 100% !important;\n  border: 1px dashed #d0d0d0;\n  padding: 5px 8px; }\n  .style__node___nSk8m .style__name___2TMAK:hover {\n    background: #f1f1f1; }\n  .style__node___nSk8m .style__name___2TMAK:focus {\n    background: #f5f5f5; }\n\n.style__actions___gx30q {\n  margin-top: 10px;\n  width: 100%; }\n  .style__actions___gx30q button {\n    border-radius: 3px; }\n\n.style__actionIcons___1iaPf {\n  margin-top: 5px; }\n\n.style__bottomSection___LgoeA {\n  text-align: center; }\n",""]),t.locals={section:"style__section___3upAJ",endBloc:"style__endBloc___3sG_O",nodeBloc:"style__nodeBloc___dQ4tK",subflowBloc:"style__subflowBloc___1_Bfl",returnBloc:"style__returnBloc___25Y4o",tip:"style__tip___3zVXd",returnToNodeSection:"style__returnToNodeSection___190hz",node:"style__node___nSk8m",item:"style__item___1cABW",actions:"style__actions___gx30q",name:"style__name___2TMAK",actionIcons:"style__actionIcons___1iaPf",bottomSection:"style__bottomSection___LgoeA"}},649:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".parameters__invalid___1ILIm input {\n  border: 1px solid red; }\n\n.parameters__table___2erEm {\n  margin-bottom: 0; }\n  .parameters__table___2erEm td {\n    padding: 0;\n    position: relative; }\n  .parameters__table___2erEm input {\n    width: 100%; }\n\n.parameters__keyTip___FOVaX {\n  position: absolute;\n  right: 15px;\n  font-size: 20px;\n  top: 11px;\n  color: green; }\n\n.parameters__mandatory___2vsuD input {\n  font-weight: bold; }\n",""]),t.locals={invalid:"parameters__invalid___1ILIm",table:"parameters__table___2erEm",keyTip:"parameters__keyTip___FOVaX",mandatory:"parameters__mandatory___2vsuD"}},650:function(e,t,n){var o=n(649);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},651:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),l=c(a),i=n(13),s=c(n(3)),u=c(n(11));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(650),p=function(t){function n(e){!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={arguments:t.transformArguments(e.value)},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.Component),r(n,[{key:"componentWillReceiveProps",value:function(e){this.setState({arguments:this.transformArguments(e.value)})}},{key:"transformArguments",value:function(e){var t=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(u.default.map(e,function(e,t){return{key:t,value:e}})),[{key:"",value:""}]);return u.default.fromPairs(t.map(function(e,t){return[t,e]}))}},{key:"getValues",value:function(){return this.state.arguments}},{key:"onChanged",value:function(){var t=this;e(function(){t.props.onChange&&t.props.onChange(t.state.arguments)})}},{key:"render",value:function(){var e=this;return l.default.createElement(i.Table,{className:(0,s.default)(f.table,this.props.className)},l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",null,"Name"),l.default.createElement("th",null,"Value"))),l.default.createElement("tbody",null,u.default.orderBy(u.default.keys(this.state.arguments),function(e){return e}).map(function(t){var n,r=e.state.arguments,a=function(){""===r[t].key&&""===r[t].value&&(r[(new Date).getTime()]={key:"",value:""})},c=function(){var t=0;for(var n in e.state.arguments){var r=e.state.arguments[n];if(""===r.key&&""===r.value&&t++,t>1){var a=o({},e.state.arguments);return delete a[n],e.setState({arguments:a})}}},p=r[t].key.length>0||!r[t].value.length,_=r[t].key,m=r[t].value,h=u.default.find(e.props.definitions||[],{name:_})||{required:!1,description:"No description",default:"",type:"Unknown",fake:!0},y=l.default.createElement(i.Tooltip,{id:"param-"+_},l.default.createElement("strong",null,"(",h.type,") ")," ",h.description),b=h.fake?null:l.default.createElement(i.OverlayTrigger,{placement:"bottom",overlay:y},l.default.createElement("i",{className:"material-icons "+f.keyTip},"help_outline")),g=(0,s.default)((d(n={},f.invalid,!p),d(n,f.mandatory,h.required),n));return l.default.createElement("tr",{key:t},l.default.createElement("td",{className:g},b,l.default.createElement("input",{type:"text",disabled:!!h.required,value:_,onChange:function(n){""!==n.target.value?a():""===e.state.arguments[t].value&&setTimeout(c,100),e.setState({arguments:o({},r,d({},t,{key:n.target.value,value:r[t].value}))}),e.onChanged()}})),l.default.createElement("td",null,l.default.createElement("input",{type:"text",placeholder:h.default,value:m,onChange:function(n){""!==n.target.value?a():""===e.state.arguments[t].key&&setTimeout(c,100),e.setState({arguments:o({},r,d({},t,{value:n.target.value,key:r[t].key}))}),e.onChanged()}})))})))}}]),n}();t.default=p}).call(this,n(74).setImmediate)},652:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".actionDropdown__category___3ud9J {\n  font-weight: bold;\n  margin-right: 5px; }\n\n.actionDropdown__title___2u7qV {\n  margin-right: 5px; }\n\n.actionDropdown__name___1VlWL {\n  color: grey;\n  font-size: 90%; }\n",""]),t.locals={category:"actionDropdown__category___3ud9J",title:"actionDropdown__title___2u7qV",name:"actionDropdown__name___1VlWL"}},653:function(e,t,n){var o=n(652);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},655:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=s(r),l=s(n(230)),i=s(n(654));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=n(653),d=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,l=Array(r),s=0;s<r;s++)l[s]=arguments[s];return n=o=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),o.renderOption=function(e){var t=function(e){return a.default.createElement(i.default,{searchWords:[o._inputValue],textToHighlight:e})};if(e.metadata){var n=e.metadata.category?a.default.createElement("span",{className:c.category},t(e.metadata.category)," –"):null,r=e.metadata.title?a.default.createElement("span",{className:c.title},t(e.metadata.title)):null;return a.default.createElement("div",null,a.default.createElement("span",null,n,r,a.default.createElement("span",{className:c.name},"–> ",t(e.label))))}return t(e.label)},u(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"render",value:function(){var e=this,t=this.props.options.map(function(e){return{label:e.name,value:e.name,metadata:e.metadata}});return a.default.createElement(l.default,{onInputChange:function(t){return e._inputValue=t},onChange:this.props.onChange,options:t,value:this.props.value,optionRenderer:this.renderOption})}}]),t}();t.default=d},656:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),l=_(a),i=n(13),s=_(n(368)),u=_(n(31)),c=_(n(11)),d=_(n(655)),f=_(n(651)),p=_(n(269));function _(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=n(91),y=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={actionType:"message",avActions:[],actionMetadata:{},functionInputValue:"",messageValue:"",functionParams:{}},o.textToItemId=function(e){return c.default.get(e.match(/^say #!(.*)$/),"[1]")},o.onChangeType=function(e){return function(){o.setState({actionType:e})}},m(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.item;!this.props.show&&e.show&&(t?this.setState({actionType:e.item.type,functionInputValue:e.item.functionName,messageValue:e.item.message,functionParams:e.item.parameters}):this.resetForm(),this.setState({isEdit:Boolean(t)}))}},{key:"componentDidMount",value:function(){this.fetchAvailableFunctions()}},{key:"fetchAvailableFunctions",value:function(){var e=this;return u.default.get("/api/flows/available_actions").then(function(t){var n=t.data;e.setState({avActions:n})})}},{key:"resetForm",value:function(){this.setState({actionType:"message",functionInputValue:"",messageValue:""})}},{key:"renderSectionAction",value:function(){var e=this,t=this.state.avActions,n=l.default.createElement(i.Tooltip,{id:"notSeeingAction"},"Actions are registered on the server-side. Read about how to register new actions by searching for `bp.registerActions()`."),r=l.default.createElement(i.Tooltip,{id:"whatIsThis"},"You can change how the Action is executed by providing it parameters. Some parameters are required, some are optional."),a=l.default.createElement(i.OverlayTrigger,{placement:"bottom",overlay:n},l.default.createElement("span",{className:h.tip},"Can't see your action?")),u=l.default.createElement(i.OverlayTrigger,{placement:"bottom",overlay:r},l.default.createElement("span",{className:h.tip},"What is this?"));return l.default.createElement("div",null,l.default.createElement("h5",null,"Action to run ",a),l.default.createElement("div",{className:h.section},l.default.createElement(d.default,{value:this.state.functionInputValue,options:t,onChange:function(n){var o=t.find(function(e){return e.name===(n&&n.value)}),r=c.default.get(o,"metadata.params")||[];e.setState({functionInputValue:n&&n.value,paramsDef:r,actionMetadata:o.metadata||{}}),Object.keys(e.state.functionParams).length>0&&!confirm("Do you want to overwrite existing parameters?")||e.setState({functionParams:c.default.fromPairs(r.map(function(e){return[e.name,e.default||""]}))})}}),this.state.actionMetadata.title&&l.default.createElement("h4",null,this.state.actionMetadata.title),this.state.actionMetadata.description&&l.default.createElement(s.default,{source:this.state.actionMetadata.description})),l.default.createElement("h5",null,"Action parameters ",u),l.default.createElement("div",{className:h.section},l.default.createElement(f.default,{ref:function(t){return e.parametersTable=t},onChange:function(t){t=c.default.values(t).reduce(function(e,t){return""===t.key?e:o({},e,(n={},r=t.key,a=t.value,r in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,n));var n,r,a},{}),e.setState({functionParams:t})},value:this.state.functionParams,definitions:this.state.paramsDef})))}},{key:"renderSectionMessage",value:function(){var e=this,t=l.default.createElement(i.Tooltip,{id:"howMessageWorks"},'You can type a regular message here or you can also provide a valid UMM bloc, for example "#help".'),n=l.default.createElement(i.OverlayTrigger,{placement:"bottom",overlay:t},l.default.createElement("i",{className:"material-icons"},"help")),o=this.textToItemId(this.state.messageValue);return l.default.createElement("div",null,l.default.createElement("h5",null,"Message ",n,":"),l.default.createElement("div",{className:h.section},l.default.createElement(p.default,{itemId:o,onChange:function(t){e.setState({messageValue:"say #!"+t.id})},placeholder:"Message to send"})))}},{key:"render",value:function(){var e=this,t=this.props,n=function(){},o=t.onClose||n;return l.default.createElement(i.Modal,{animation:!1,show:t.show,onHide:o,container:document.getElementById("app")},l.default.createElement(i.Modal.Header,{closeButton:!0},l.default.createElement(i.Modal.Title,null,this.state.isEdit?"Edit":"Add new"," action")),l.default.createElement(i.Modal.Body,null,l.default.createElement("h5",null,"The bot will:"),l.default.createElement("div",{className:h.section},l.default.createElement(i.Radio,{checked:"message"===this.state.actionType,onChange:this.onChangeType("message")},"💬 Say something"),l.default.createElement(i.Radio,{checked:"code"===this.state.actionType,onChange:this.onChangeType("code")},"⚡ Execute code")),"message"===this.state.actionType?this.renderSectionMessage():this.renderSectionAction()),l.default.createElement(i.Modal.Footer,null,l.default.createElement(i.Button,{onClick:o},"Cancel"),l.default.createElement(i.Button,{onClick:function(){var o=t.onSubmit||n;e.resetForm(),o({type:e.state.actionType,functionName:e.state.functionInputValue,message:e.state.messageValue,parameters:e.state.functionParams})},bsStyle:"primary"},this.state.isEdit?"Update":"Add"," Action (Alt+Enter)")))}}]),t}();t.default=y},657:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=c(r),l=n(13),i=c(n(323)),s=c(n(322)),u=c(n(211));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=n(91),p=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.renameNode=function(e){e&&e!==o.props.node.name&&o.props.updateNode({name:e})},d(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"transformText",value:function(e){return e.replace(/[^a-z0-9-_\.]/gi,"_")}},{key:"render",value:function(){var e=this,t=this.props,n=t.node,o=t.readOnly;return a.default.createElement("div",{className:f.node},a.default.createElement(l.Panel,null,a.default.createElement(i.default,{readOnly:o,onMount:function(e){e.value.startsWith("node-")&&(e.focus(),e.setSelectionRange(0,1e3))},value:n.name,className:f.name,onChanged:this.renameNode,transform:this.transformText})),a.default.createElement(l.Tabs,{animation:!1,id:"node-props-modal-standard-node-tabs"},a.default.createElement(l.Tab,{eventKey:"on_enter",title:a.default.createElement(r.Fragment,null,a.default.createElement(l.Badge,null,n.onEnter&&n.onEnter.length||0)," On Enter")},a.default.createElement(s.default,{readOnly:o,items:n.onEnter,header:"On Enter",onItemsUpdated:function(t){return e.props.updateNode({onEnter:t})},copyItem:function(t){return e.props.copyFlowNodeElement({action:t})},pasteItem:function(){return e.props.pasteFlowNodeElement("onEnter")},canPaste:Boolean(this.props.buffer.action)})),a.default.createElement(l.Tab,{eventKey:"on_receive",title:a.default.createElement(r.Fragment,null,a.default.createElement(l.Badge,null,n.onReceive&&n.onReceive.length||0)," On Receive")},a.default.createElement(s.default,{readOnly:o,items:n.onReceive,header:"On Receive",waitable:!0,onItemsUpdated:function(t){return e.props.updateNode({onReceive:t})},copyItem:function(t){return e.props.copyFlowNodeElement({action:t})},pasteItem:function(){return e.props.pasteFlowNodeElement("onReceive")},canPaste:Boolean(this.props.buffer.action)})),a.default.createElement(l.Tab,{eventKey:"transitions",title:a.default.createElement(r.Fragment,null,a.default.createElement(l.Badge,null,n.next&&n.next.length||0)," Transitions")},a.default.createElement(u.default,{readOnly:o,items:n.next,header:"Transitions",subflows:this.props.subflows,onItemsUpdated:function(t){return e.props.updateNode({next:t})},copyItem:function(t){return e.props.copyFlowNodeElement({transition:t})},pasteItem:function(){return e.props.pasteFlowNodeElement("next")},canPaste:Boolean(this.props.buffer.transition)}))))}}]),t}();t.default=p},658:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),l=f(a),i=f(n(11)),s=n(13),u=f(n(657)),c=f(n(646)),d=f(n(645));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.goToFlow=function(e){return o.props.history.push("/flows/"+e.replace(/\.flow\.json/,""))},p(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){var e=this.props.currentFlowNode;return l.default.createElement(s.Modal,{animation:!1,show:this.props.show,onHide:this.props.closeFlowNodeProps,container:document.getElementById("app")},l.default.createElement(s.Modal.Header,{closeButton:!0},l.default.createElement(s.Modal.Title,null,e?"Node Properties":"Flow Properties")),l.default.createElement(s.Modal.Body,null,this.renderNodeProperties()))}},{key:"renderNodeProperties",value:function(){var e=this,t=this.props.readOnly,n=i.default.filter(i.default.map(this.props.flows,function(e){return e.name}),function(t){return t!==i.default.get(e.props,"currentFlow.name")}),r=i.default.get(this.props,"currentFlowNode.type")||(this.props.currentFlowNode?"standard":null),a=function(){var t;(t=e.props).updateFlowNode.apply(t,arguments),e.props.refreshFlowsLinks()};return"skill-call"===r?l.default.createElement(c.default,{readOnly:t,user:this.props.user,flow:this.props.currentFlow,subflows:n,node:this.props.currentFlowNode,updateNode:a,updateFlow:this.props.updateFlow,requestEditSkill:this.props.requestEditSkill,goToFlow:this.goToFlow,copyFlowNodeElement:this.props.copyFlowNodeElement,pasteFlowNodeElement:this.props.pasteFlowNodeElement,buffer:this.props.buffer}):"standard"===r?l.default.createElement(u.default,{readOnly:t,flow:this.props.currentFlow,subflows:n,node:this.props.currentFlowNode,updateNode:a,updateFlow:this.props.updateFlow,copyFlowNodeElement:this.props.copyFlowNodeElement,pasteFlowNodeElement:this.props.pasteFlowNodeElement,buffer:this.props.buffer}):l.default.createElement(d.default,o({},this.props,{subflows:n}))}}]),t}();t.default=_},659:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(21),r=n(69),a=u(n(222)),l=n(73),i=n(16),s=u(n(658));function u(e){return e&&e.__esModule?e:{default:e}}var c={updateFlow:i.updateFlow,requestEditSkill:i.requestEditSkill,copyFlowNodeElement:i.copyFlowNodeElement,pasteFlowNodeElement:i.pasteFlowNodeElement,closeFlowNodeProps:i.closeFlowNodeProps,updateFlowNode:i.updateFlowNode,refreshFlowsLinks:i.refreshFlowsLinks},d=(0,o.connect)(function(e){return{flows:(0,a.default)(e.flows.flowsByName),currentFlow:(0,l.getCurrentFlow)(e),currentFlowNode:(0,l.getCurrentFlowNode)(e),buffer:e.flows.buffer,user:e.user}},c)((0,r.withRouter)(s.default));t.default=d},660:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".style__loadingContainer___2xNMs {\n  text-align: center;\n  vertical-align: middle;\n  padding: 40px; }\n  .style__loadingContainer___2xNMs > div {\n    margin-top: 20px;\n    display: inline-block; }\n\n.style__size-normal___36AEV {\n  width: 50%; }\n\n.style__size-large___2RuvD {\n  width: 80%; }\n\n.style__size-small___3q78L {\n  width: 30%; }\n",""]),t.locals={loadingContainer:"style__loadingContainer___2xNMs","size-normal":"style__size-normal___36AEV","size-large":"style__size-large___2RuvD","size-small":"style__size-small___3q78L"}},661:function(e,t,n){var o=n(660);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},668:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=f(n(1)),l=n(13),i=f(n(31)),s=f(n(326)),u=f(n(667)),c=f(n(662)),d=f(n(132));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=n(661),y=["normal","large","small"],b=function(e){function t(){return p(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,a.default.Component),r(t,[{key:"shouldComponentUpdate",value:function(e){return e.moduleProps!==this.props.moduleProps||e.moduleName!==this.props.moduleName}},{key:"render",value:function(){return a.default.createElement(d.default,this.props)}}]),t}(),g=function(e){function t(){var e,n,o;p(this,t);for(var r=arguments.length,l=Array(r),s=0;s<r;s++)l[s]=arguments[s];return n=o=_(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),o.resetState=function(){return{moduleProps:{},canSubmit:!1,loading:!1,windowSize:"normal"}},o.state=o.resetState(),o.renderModuleNotFound=function(){return a.default.createElement("div",null,"Could not load skill's view")},o.onDataChanged=function(e){o.data=e},o.onSubmit=function(){return o.setState({loading:!0,canSubmit:!1}),o.generateFlow().then(function(e){"edit"===o.props.action?o.props.updateSkill({skillId:o.props.skillId,data:o.data,generatedFlow:e.flow,transitions:e.transitions,editFlowName:o.props.editFlowName,editNodeId:o.props.editNodeId}):o.props.insertNewSkill({skillId:o.props.skillId,data:o.data,generatedFlow:e.flow,transitions:e.transitions})})},o.onCancel=function(){o.props.cancelNewSkill()},o.onValidChanged=function(e){o.setState({canSubmit:e})},o.renderLoading=function(){return o.state.loading?a.default.createElement("div",{className:h.loadingContainer},a.default.createElement("h2",null,"Generating your skill flow..."),a.default.createElement(c.default,{type:"ball-pulse",color:"#26A65B",style:{margin:"4px"}})):null},o.onWindowResized=function(e){if(!(0,u.default)(y,e)){var t=y.join(", ");return console.log('ERROR – Skill "'+e+'" is an invalid size for Skill window. Valid sizes are '+t+".")}o.setState({windowSize:e})},o.buildModuleProps=function(e){return{initialData:e,onDataChanged:o.onDataChanged,onValidChanged:o.onValidChanged,resizeBuilderWindow:o.onWindowResized}},o.generateFlow=function(){return i.default.post("/api/skills/"+o.props.skillId+"/generate",o.data).then(function(e){return e.data})},_(o,n)}return m(t,a.default.Component),r(t,[{key:"componentDidMount",value:function(){this.setState({initialData:this.props.data})}},{key:"componentDidMount",value:function(){this.setState(o({},this.resetState(),{moduleProps:this.buildModuleProps(this.props.data)}))}},{key:"componentWillReceiveProps",value:function(e){e.skillId===this.props.skillId&&e.opened===this.props.opened||this.setState(o({},this.resetState(),{moduleProps:this.buildModuleProps(e.data)}))}},{key:"render",value:function(){var e=(0,s.default)(this.props.installedSkills,{id:this.props.skillId}),t=h["size-"+this.state.windowSize],n="new"===this.props.action?"Insert":"Save";return a.default.createElement(l.Modal,{dialogClassName:t,animation:!1,show:this.props.opened,onHide:this.onCancel,backdrop:"static"},a.default.createElement(l.Modal.Header,{closeButton:!0},a.default.createElement(l.Modal.Title,null,"Insert a new skill | ",e&&e.name)),a.default.createElement(l.Modal.Body,null,this.renderLoading(),!this.state.loading&&a.default.createElement(b,{moduleName:e&&e.id,onNotFound:this.renderModuleNotFound,extraProps:this.state.moduleProps})),a.default.createElement(l.Modal.Footer,null,a.default.createElement(l.Button,{onClick:this.onCancel},"Cancel"),a.default.createElement(l.Button,{onClick:this.onSubmit,disabled:!this.state.canSubmit,bsStyle:"primary"},n)))}}]),t}();t.default=g},669:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=n(21),l=n(16),i=(o=n(668))&&o.__esModule?o:{default:o},s={cancelNewSkill:l.cancelNewSkill,insertNewSkill:l.insertNewSkill,updateSkill:l.updateSkill},u=(0,a.connect)(function(e){return r({installedSkills:e.skills.installed},e.skills.builder)},s)(i.default);t.default=u},670:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".topbar__rename___30Mxy {\n  font-size: 90%; }\n\n.topbar__title___3HLto {\n  color: black;\n  border-left: 3px solid #55c1b2;\n  padding-left: 10px;\n  margin-left: -10px; }\n",""]),t.locals={rename:"topbar__rename___30Mxy",title:"topbar__title___3HLto"}},671:function(e,t,n){var o=n(670);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},672:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=l(n(1)),a=l(n(11));function l(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=n(671),u=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,l=Array(r),s=0;s<r;s++)l[s]=arguments[s];return n=o=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),o.promptRenameFlow=function(){var e=window.prompt("Please enter the new name for that flow",o.getCurrentFlowName());if(e){if(/[^A-Z0-9-_\/]/i.test(e))return alert("ERROR: The flow name can only contain letters, numbers, underscores and hyphens.");var t=a.default.map(o.props.flows,function(e){return o.cleanFlowName(e.name).toLowerCase()});e!==o.getCurrentFlowName()&&a.default.includes(t,e.toLowerCase())?alert("ERROR: There's an other flow called \""+e+'". Flow names must be unique.'):o.props.renameFlow(e+".flow.json")}},i(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"getCurrentFlowName",value:function(){var e=a.default.get(this.props,"currentFlow.name")||"";return this.cleanFlowName(e)}},{key:"cleanFlowName",value:function(e){return e.replace(/\.flow\.json$/i,"")}},{key:"render",value:function(){var e=this.getCurrentFlowName(),t=this.props.readOnly;return r.default.createElement("div",{className:s.title},r.default.createElement("span",null,"Flow Editor –"),r.default.createElement("span",{className:s.name}," ",e),e&&!t&&r.default.createElement("span",null," ",r.default.createElement("a",{onClick:this.promptRenameFlow,href:"javascript:void(0);",className:s.rename},"(rename)")))}}]),t}();t.default=u},673:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(46),r=n(21),a=u(n(11)),l=n(16),i=n(73),s=u(n(672));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,r.connect)(function(e){return{flows:a.default.values(e.flows.flowsByName),currentFlow:(0,i.getCurrentFlow)(e)}},function(e){return(0,o.bindActionCreators)({renameFlow:l.renameFlow},e)})(s.default);t.default=c},674:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".style__panel___UlHjz {\n  background: #fafafa;\n  overflow-y: auto;\n  margin: 0 5px 0 0;\n  width: 100%;\n  height: 100%; }\n",""]),t.locals={panel:"style__panel___UlHjz"}},675:function(e,t,n){var o=n(674);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},680:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildFlowsTree=t.splitFlowPath=t.getUniqueId=void 0;var o,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=(o=n(326))&&o.__esModule?o:{default:o},l=function(e,t){return e.type===t.type?e.name<t.name?-1:1:"folder"===e.type?-1:1},i=(t.getUniqueId=function(e){return e.type+":"+e.fullPath},t.splitFlowPath=function(e){var t=e.replace(/\.flow\.json$/,"").split("/"),n=t[t.length-1],o=t.slice(0,t.length-1),r=[],a=[],l=!0,i=!1,s=void 0;try{for(var u,c=o[Symbol.iterator]();!(l=(u=c.next()).done);l=!0){var d=u.value;a.push(d),r.push({type:"folder",name:d,fullPath:a.join("/")})}}catch(e){i=!0,s=e}finally{try{!l&&c.return&&c.return()}finally{if(i)throw s}}return a.push(n),{folders:r,flow:{type:"file",name:n,fullPath:a.join("/")}}});t.buildFlowsTree=function(e){var t={type:"root",fullPath:"",name:"<root>",children:[]};return e.forEach(function(e){var n=i(e.name),o=n.folders,l=n.flow;!function(e,t,n,o){var l=!0,i=!1,s=void 0;try{for(var u,c=t[Symbol.iterator]();!(l=(u=c.next()).done);l=!0){var d=u.value,f=(0,a.default)(e.children,d);f||(f=r({},d,{parent:e,children:[]}),e.children.push(f)),e=f}}catch(e){i=!0,s=e}finally{try{!l&&c.return&&c.return()}finally{if(i)throw s}}e.children.push(r({},n,{parent:e},o))}(t,o,l,{data:e})}),function e(t){t.children&&(t.children.sort(l),t.children.forEach(e))}(t),t.children}},681:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".style__menuButton___2ZZ-R {\n  position: absolute;\n  right: 10px;\n  top: 4px; }\n  .style__menuButton___2ZZ-R .arrow {\n    display: none; }\n  .style__menuButton___2ZZ-R button {\n    border: none; }\n\n.style__menu___pb_Bt {\n  list-style: none;\n  padding: 0;\n  margin: 0; }\n  .style__menu___pb_Bt li {\n    padding: 5px 10px;\n    cursor: pointer; }\n    .style__menu___pb_Bt li:hover {\n      color: #262626;\n      background-color: #f5f5f5; }\n\n.popover.style__popover___2tkHS .arrow {\n  display: none; }\n\n.popover-content.style__popover___2tkHS {\n  padding: 10px 0; }\n\n.style__toggle___3VpWr {\n  display: inline-block;\n  font-size: 20px;\n  height: 24px;\n  line-height: 24px;\n  transition: transform 300ms; }\n\n.style__toggleActive___2k43e {\n  transform: rotateZ(90deg); }\n",""]),t.locals={menuButton:"style__menuButton___2ZZ-R",menu:"style__menu___pb_Bt",popover:"style__popover___2tkHS",toggle:"style__toggle___3VpWr",toggleActive:"style__toggleActive___2k43e"}},73:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(266);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var r=n(46),a=_(n(265)),l=_(n(264)),i=_(n(263)),s=_(n(262)),u=_(n(261)),c=_(n(260)),d=_(n(259)),f=_(n(258)),p=_(n(257));function _(e){return e&&e.__esModule?e:{default:e}}var m=(0,r.combineReducers)({content:a.default,flows:l.default,license:i.default,ui:s.default,user:u.default,bot:c.default,modules:d.default,notifications:p.default,skills:f.default});t.default=m},75:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUniqueVisitorId=t.login=t.logout=t.setToken=t.getToken=t.authEvents=void 0;var o=l(n(184)),r=l(n(31)),a=l(n(151));function l(e){return e&&e.__esModule?e:{default:e}}var i=t.authEvents=new o.default,s=(t.getToken=function(){var e=localStorage.getItem("bp/token");return!!e&&JSON.parse(e)},t.setToken=function(e){localStorage.setItem("bp/token",JSON.stringify({token:e,time:new Date})),r.default.defaults.headers.common.Authorization="Bearer "+e,i.emit("new_token")});t.logout=function(){localStorage.removeItem("bp/token"),i.emit("logout")},t.login=function(e,t){return r.default.post("/api/login",{user:e,password:t}).then(function(e){if(!e.data.success)throw new Error(e.data.reason);s(e.data.token),i.emit("login")})},t.getUniqueVisitorId=function(){var e=localStorage.getItem("bp/socket/user");return e||(e=(0,a.default)(),localStorage.setItem("bp/socket/user",e)),window.__BP_VISITOR_ID=e,e}},793:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),l=d(a),i=d(n(3)),s=n(792),u=d(n(686)),c=d(n(327));function d(e){return e&&e.__esModule?e:{default:e}}var f=(0,u.default)({},s.theme,{tree:{base:{color:"black",backgroundColor:"transparent",height:"100%"},node:{activeLink:{background:"transparent",fontWeight:"bold"},header:{base:{color:"black"}}}}}),p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.decorators.Container),r(t,[{key:"renderToggle",value:function(){return null}}]),t}(),_=function(e){var t=e.dirtyFlows,n=e.renderMenu;return o({},s.decorators,{Container:p,Toggle:function(){return null},Header:function(e){if("folder"===e.node.type)return l.default.createElement(a.Fragment,null,l.default.createElement("i",{className:(0,i.default)("material-icons",c.default.toggle,(r={},u=c.default.toggleActive,d=e.node.toggled,u in r?Object.defineProperty(r,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):r[u]=d,r))},"chevron_right"),l.default.createElement("i",{className:"material-icons"},e.node.toggled?"folder_open":"folder")," ",l.default.createElement(s.decorators.Header,e));var r,u,d,f=e.node.data.name;return t.includes(f)&&(e=o({},e,{node:o({},e.node,{name:e.node.name+" *"})})),l.default.createElement(a.Fragment,null,l.default.createElement("i",{className:"material-icons"},"description")," ",l.default.createElement(s.decorators.Header,e),n&&n(e.node))}})};t.default=function(e){var t=e.dirtyFlows,n=e.renderMenu,r=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(e,["dirtyFlows","renderMenu"]),a=_({dirtyFlows:t,renderMenu:n});return l.default.createElement(s.Treebeard,o({style:f,decorators:a},r))}},794:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),l=p(a),i=p(n(18)),s=p(n(3)),u=n(13),c=n(11),d=p(n(793)),f=n(680);function p(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=n(327),h=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var d=arguments.length,p=Array(d),h=0;h<d;h++)p[h]=arguments[h];return n=r=_(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(p))),r.menuButtons={},r.renderMenu=function(e){if(r.props.readOnly)return null;var t=e.data,n=e.fullPath.replace(/\//g,"__"),o=function(){r.setState({showDropdownIndex:-1})},d=function(e){return function(t){t.stopPropagation(),o(),setTimeout(e,250)}},f=d(function(){!0===confirm("Are you sure you want to delete the flow "+t.name+"?")&&r.props.deleteFlow(t.name)}),p=d(function(){var e=prompt("Enter the name of the new flow");if(e)return e=e.replace(/\.flow\.json$/i,""),/[^A-Z0-9-_\/]/i.test(e)?alert("ERROR: The flow name can only contain letters, numbers, underscores and hyphens."):(0,c.includes)(r.props.flows.map(function(e){return e.name}),e+".flow.json")?alert("ERROR: The flow "+e+" already exists"):void r.props.duplicateFlow({flowNameToDuplicate:t.name,name:e+".flow.json"})}),_=l.default.createElement(u.Popover,{id:"flow-"+n+"-dropdown",bsClass:(0,s.default)(m.popover,"popover")},l.default.createElement("ul",{className:m.menu},"main.flow.json"!==t.name&&l.default.createElement("li",{onClick:f},"Delete"),l.default.createElement("li",{onClick:p},"Duplicate"))),h=r.state.showDropdownIndex===n,y="menu-btn-"+n,b=l.default.createElement(u.Button,{bsSize:"xsmall",ref:function(e){return r.menuButtons[y]=e},onClick:function(e){e.stopPropagation(),r.setState({showDropdownIndex:n})}},l.default.createElement("span",{className:"caret"})),g=l.default.createElement(u.Overlay,{onHide:o,show:h,animation:!1,trigger:"click",rootClose:!0,placement:"bottom",target:function(){return i.default.findDOMNode(r.menuButtons[y])}},_);return l.default.createElement(a.Fragment,null,l.default.createElement("div",{className:m.menuButton},b),g)},r.toggleTreeNode=function(e){var t=o({},r.state.toggledNodes),n=r.state.activeNode;if("folder"===e.type){var a=(0,f.getUniqueId)(e);t[a]=!t[a]}else if("file"===e.type){n=(0,f.getUniqueId)(e);for(var l=e.parent;l;)t[(0,f.getUniqueId)(l)]=!0,l=l.parent;r.props.goToFlow(e.data.name)}r.setState({toggledNodes:t,activeNode:n})},_(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"buildTreeData",value:function(){var e=this.props.flows,t=(0,f.buildFlowsTree)(e);return this.state&&function e(t,n,o){t&&t.forEach(function(t){var r=(0,f.getUniqueId)(t);n[r]?t.toggled=!0:r===o&&(t.active=!0),e(t.children,n,o)})}(t,this.state.toggledNodes,this.state.activeNode),t}},{key:"render",value:function(){var e=this.props,t=e.dirtyFlows,n=e.currentFlow;!this.state&&n&&(this.state=function(e){if(!e)return{toggledNodes:{},activeNode:null};var t=(0,f.splitFlowPath)(e.name),n=t.folders,o=t.flow;return{toggledNodes:n.reduce(function(e,t){return e[(0,f.getUniqueId)(t)]=!0,e},{}),activeNode:(0,f.getUniqueId)(o)}}(n));var o=this.buildTreeData();return l.default.createElement(d.default,{data:o,dirtyFlows:t,renderMenu:this.props.readOnly?null:this.renderMenu,onToggle:this.toggleTreeNode})}}]),t}();t.default=h},798:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=s(r),l=s(n(797)),i=s(n(794));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=n(675),d=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.goToFlow=function(e){return o.props.history.push("/flows/"+e.replace(/\.flow\.json/,""))},u(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"render",value:function(){var e=(0,l.default)(this.props.flows,function(e){return e.name.startsWith("skills/")});return a.default.createElement("div",{className:c.panel},a.default.createElement(i.default,{readOnly:this.props.readOnly,flows:e,dirtyFlows:this.props.dirtyFlows,goToFlow:this.goToFlow,deleteFlow:this.props.deleteFlow,duplicateFlow:this.props.duplicateFlow,currentFlow:this.props.currentFlow}))}}]),t}();t.default=d},80:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=u(n(1)),a=u(n(0)),l=n(21),i=u(n(891)),s=u(n(3));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e,t=this.props.viewMode<=2,n=this.props.viewMode<1;if(!t)return null;var o=(0,s.default)((c(e={},i.default.header,!0),c(e,"bp-page-header",!0),c(e,i.default.noSidebar,!n),c(e,"bp-page-header-no-sidebar",!n),e));return r.default.createElement("div",{className:o},this.props.children)}}]),t}();d.contextTypes={router:a.default.object.isRequired},t.default=(0,l.connect)(function(e){return{viewMode:e.ui.viewMode}})(d)},800:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(21),r=u(n(222)),a=n(69),l=n(73),i=n(16),s=u(n(798));function u(e){return e&&e.__esModule?e:{default:e}}var c={deleteFlow:i.deleteFlow,duplicateFlow:i.duplicateFlow},d=(0,o.connect)(function(e,t){return{currentFlow:(0,l.getCurrentFlow)(e),flows:(0,r.default)(e.flows.flowsByName),dirtyFlows:(0,l.getDirtyFlows)(e)}},c)((0,a.withRouter)(s.default));t.default=d},801:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".style__insertNode___3lYv7 {\n  cursor: crosshair; }\n  .style__insertNode___3lYv7 .storm-diagrams-canvas {\n    cursor: inherit; }\n\n.style__insertMode___1t5i3 {\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  opacity: 0.8;\n  z-index: 100; }\n  .style__insertMode___1t5i3 button {\n    margin-top: 10px; }\n",""]),t.locals={insertNode:"style__insertNode___3lYv7",insertMode:"style__insertMode___1t5i3"}},802:function(e,t,n){var o=n(801);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},803:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeletableLinkFactory=void 0;var o,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=(o=n(1))&&o.__esModule?o:{default:o},i=n(134);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(){var e,n,o;s(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.addPointToLink=function(e,t){if("contextmenu"===e.type&&!o.props.diagramEngine.isModelLocked(o.props.link)&&o.props.link.points.length-1<=o.props.diagramEngine.getMaxNumberPointsPerLink()){e.preventDefault();var n=new i.PointModel(o.props.link,o.props.diagramEngine.getRelativeMousePoint(e));n.setSelected(!0),o.forceUpdate(),o.props.link.addPoint(n,t),o.props.pointAdded(n,e)}},u(o,n)}return c(t,i.DefaultLinkWidget),a(t,[{key:"generateLink",value:function(e,t){var n=this,o=this.props,a=o.link,i=o.width,s=o.color,u=(o.diagramEngine,e["data-point"]||0),c=l.default.createElement("path",r({className:this.state.selected||a.isSelected()?"selected":"",strokeWidth:i,stroke:s,ref:function(e){return e&&n.refPaths&&n.refPaths.push(e)}},e)),d=l.default.createElement("path",r({strokeLinecap:"round",onMouseLeave:function(){return n.setState({selected:!1})},onMouseEnter:function(){return n.setState({selected:!0})},"data-linkid":a.getID(),stroke:s,strokeOpacity:this.state.selected?.1:0,strokeWidth:20,onContextMenu:function(e){return n.addPointToLink(e,u+1)}},e));return l.default.createElement("g",{key:"link-"+t},c,d)}}]),t}();t.DeletableLinkFactory=function(e){function t(){return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"default"))}return c(t,i.LinkFactory),a(t,[{key:"generateReactWidget",value:function(e,t){return l.default.createElement(d,{link:t,diagramEngine:e})}}]),t}()},804:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SkillCallWidgetFactory=t.SkillCallNodeWidgetFactory=t.SkillCallNodeModel=t.SkillCallNodeWidget=void 0;var o=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,o)}if("value"in r)return r.value;var l=r.get;return void 0!==l?l.call(o):void 0},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=f(n(1)),l=f(n(3)),i=f(n(11)),s=n(134),u=f(n(225)),c=f(n(223)),d=n(360);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=n(226),y=t.SkillCallNodeWidget=function(e){function t(){var e,n,o;p(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=_(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={},_(o,n)}return m(t,a.default.Component),r(t,[{key:"render",value:function(){var e,t,n,o=this.props.node,r=o.waitOnReceive,i=(0,l.default)(h["skill-call-node"],h["node-container"]);return a.default.createElement("div",{className:i},a.default.createElement("div",{className:h.topPort},a.default.createElement(d.StandardPortWidget,{name:"in",node:o})),a.default.createElement("div",{className:h.header}),a.default.createElement("div",{className:h.content},a.default.createElement("div",{className:(0,l.default)(h["section-title"],h.section,(e={},t=h.waiting,n=r,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e))},a.default.createElement("div",null,o.skill),a.default.createElement("div",{className:h.subtitle},"Skill | ",o.name)),a.default.createElement("div",{className:(0,l.default)(h["section-onReceive"],h.section)},o.onReceive&&o.onReceive.map(function(e,t){return a.default.createElement(u.default,{key:t+"."+e,className:h.item,text:e})})),a.default.createElement("div",{className:(0,l.default)(h["section-next"],h.section)},o.next&&o.next.map(function(e,t){var n="out"+t;return a.default.createElement("div",{key:t+"."+e,className:(0,l.default)(h.item)},a.default.createElement(c.default,{condition:e,position:t}),a.default.createElement(d.StandardPortWidget,{name:n,node:o}))}))),a.default.createElement("div",{className:h.footer},a.default.createElement("div",null)))}}]),t}();y.defaultProps={size:200,node:null},t.SkillCallNodeModel=function(e){function t(e){var n=e.id,o=e.x,r=e.y,a=e.name,l=e.skill,i=e.next,s=void 0===i?[]:i,u=e.isStartNode,c=void 0!==u&&u;p(this,t);var d=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"skill-call",n));return d.setData({name:a,next:s,isStartNode:c,skill:l}),o&&(d.x=o),r&&(d.y=r),d}return m(t,s.NodeModel),r(t,[{key:"serialize",value:function(){return i.default.merge(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serialize",this).call(this),{name:this.name,next:this.next,skill:this.skill})}},{key:"deSerialize",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deSerialize",this).call(this,e),this.setData({name:e.name,skill:e.skill,next:e.next})}},{key:"getOutPorts",value:function(){return i.default.filter(i.default.values(this.ports),function(e){return e.name.startsWith("out")})}},{key:"setData",value:function(e){var t=e.name,n=e.next,o=void 0===n?[]:n,r=e.isStartNode,a=e.skill;this.isStartNode=r;var l=r?"start":"normal";this.ports.in||this.addPort(new d.StandardIncomingPortModel("in",l));for(var s=0;s<o.length;s++)this.ports["out"+s]||this.addPort(new d.StandardOutgoingPortModel("out"+s));!i.default.isArray(o)&&i.default.isObjectLike(o)&&(o=[o]),this.skill=a,this.next=o,this.name=t}}]),t}();var b=t.SkillCallNodeWidgetFactory=a.default.createFactory(y);t.SkillCallWidgetFactory=function(e){function t(){return p(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"skill-call"))}return m(t,s.NodeFactory),r(t,[{key:"generateReactWidget",value:function(e,t){return b({node:t})}}]),t}()},805:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".style__action-item___1c4aI.style__fn___1etza {\n  color: blue; }\n\n.style__action-item___1c4aI.style__msg___12LvM {\n  color: #1cbd57; }\n\n.style__action-item___1c4aI.style__condition___ZgOqu {\n  color: black; }\n\n.style__action-item___1c4aI .style__icon___14ZH- {\n  margin-right: 8px; }\n\n.style__action-item___1c4aI .style__name___10ZbV {\n  line-height: 1.7; }\n  .style__action-item___1c4aI .style__name___10ZbV span {\n    padding: 2px 4px;\n    border-radius: 2px; }\n  .style__action-item___1c4aI .style__name___10ZbV .var {\n    background-color: #e7f0ff;\n    color: blue; }\n  .style__action-item___1c4aI .style__name___10ZbV .val {\n    background-color: #fff5ea;\n    color: #ff7c40; }\n\n.style__editableInput___1xpyO {\n  line-height: 22px;\n  font-size: 18px;\n  font-weight: 300;\n  color: #000;\n  width: 200px;\n  border: 1px solid #fff;\n  padding: 2px 5px;\n  border-radius: 3px; }\n  .style__editableInput___1xpyO.style__defaultValue___2bioK {\n    font-style: italic;\n    font-weight: 400;\n    color: #999; }\n  .style__editableInput___1xpyO:hover {\n    border: 1px solid #eee; }\n  .style__editableInput___1xpyO:focus {\n    outline-color: transparent;\n    outline-style: none;\n    font-weight: 300;\n    font-style: normal;\n    border: 1px solid #2d74f3; }\n",""]),t.locals={"action-item":"style__action-item___1c4aI",fn:"style__fn___1etza",msg:"style__msg___12LvM",condition:"style__condition___ZgOqu",icon:"style__icon___14ZH-",name:"style__name___10ZbV",editableInput:"style__editableInput___1xpyO",defaultValue:"style__defaultValue___2bioK"}},806:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".storm-diagrams-canvas .node {\n  opacity: 0.9; }\n\n.storm-diagrams-canvas .node.selected > .style__node-container___1G9Y- {\n  border-color: #028aee !important; }\n\n.style__node-container___1G9Y- {\n  width: 200px;\n  background: white;\n  border: 1px solid black; }\n\n.style__item___J7KXD {\n  word-wrap: break-word;\n  text-overflow: ellipsis;\n  max-height: 78px;\n  overflow-y: scroll;\n  border-bottom: 1px solid black;\n  font-size: 11px; }\n\n.style__section-next___Wd7Qi .style__item___J7KXD {\n  overflow: unset; }\n\n.style__item___J7KXD:last-child {\n  border-bottom: none; }\n\n.style__section-title___EDlLm {\n  font-size: 12px;\n  font-weight: 600;\n  padding: 3px 8px;\n  color: #fff;\n  background: #000; }\n  .style__section-title___EDlLm.style__waiting___mUgPB {\n    background: #f6bd4f;\n    color: #000; }\n  .style__section-title___EDlLm .style__subtitle___zJtee {\n    font-size: 80%; }\n\n.style__skill-call-node___2Wx8B .style__section-title___EDlLm {\n  background: #5353fb; }\n\n.style__section-onEnter___1l-QR .style__item___J7KXD,\n.style__section-onReceive___2ndmf .style__item___J7KXD,\n.style__section-next___Wd7Qi .style__item___J7KXD {\n  padding: 3px 8px; }\n  .style__section-onEnter___1l-QR .style__item___J7KXD.style__fn___1eRJS,\n  .style__section-onReceive___2ndmf .style__item___J7KXD.style__fn___1eRJS,\n  .style__section-next___Wd7Qi .style__item___J7KXD.style__fn___1eRJS {\n    color: blue;\n    font-style: italic; }\n  .style__section-onEnter___1l-QR .style__item___J7KXD.style__msg___29N4k,\n  .style__section-onReceive___2ndmf .style__item___J7KXD.style__msg___29N4k,\n  .style__section-next___Wd7Qi .style__item___J7KXD.style__msg___29N4k {\n    color: #00a653; }\n\n.style__section-next___Wd7Qi {\n  border-top: 1px solid black; }\n\n.style__section-next___Wd7Qi .style__item___J7KXD {\n  position: relative;\n  background: #ececec; }\n\n.style__section-next___Wd7Qi .style__item___J7KXD .port {\n  background: rgba(0, 0, 0, 0.2); }\n  .style__section-next___Wd7Qi .style__item___J7KXD .port.selected {\n    background: rgba(0, 0, 0, 0.5); }\n\n.style__topPort___2rXL8 {\n  width: 100%;\n  margin-top: -15px; }\n  .style__topPort___2rXL8 .port {\n    margin: 0 auto;\n    border: none;\n    background: rgba(0, 0, 0, 0.2); }\n    .style__topPort___2rXL8 .port.selected {\n      background: rgba(0, 0, 0, 0.5); }\n\n.style__startPort___2GM6G .port {\n  background-color: lime !important;\n  border-top-left-radius: 20px;\n  border-top-right-radius: 20px; }\n\n.style__endPort___1YTtE .port {\n  background-color: #e62eea !important;\n  border-top-right-radius: 20px;\n  border-bottom-right-radius: 20px; }\n\n.style__missingConnection___3OXMS .port {\n  background-color: red !important; }\n\n.style__subflowPort___24I4f .port {\n  background-color: blue !important;\n  border-top-right-radius: 20px;\n  border-bottom-right-radius: 20px; }\n\n.style__returnPort___3BKBK .port {\n  background-color: darkcyan !important;\n  border-top-right-radius: 20px;\n  border-bottom-right-radius: 20px; }\n\n.style__section-next___Wd7Qi .style__portContainer___2BTnl {\n  position: absolute;\n  right: -20px;\n  top: 3px;\n  width: 20px; }\n\n.style__section-next___Wd7Qi .style__portContainer___2BTnl.style__portLabel___3bzyb {\n  width: 150px;\n  right: -150px; }\n\n.style__portContainer___2BTnl.style__startPort___2GM6G {\n  height: 15px; }\n\n.style__portLabel___3bzyb .style__label___2KNlR {\n  position: relative;\n  padding: 5px;\n  right: -20px;\n  display: inline;\n  border-radius: 3px;\n  top: -16px;\n  background: rgba(0, 0, 0, 0.08); }\n\n.style__subflowPort___24I4f .style__label___2KNlR {\n  color: blue; }\n\n.style__returnPort___3BKBK .style__label___2KNlR {\n  color: darkcyan; }\n\n.style__endPort___1YTtE .style__label___2KNlR {\n  color: #e62eea; }\n\n.style__startPort___2GM6G .style__label___2KNlR {\n  color: green;\n  font-size: 11px;\n  right: -83px;\n  top: -40px; }\n",""]),t.locals={"node-container":"style__node-container___1G9Y-",item:"style__item___J7KXD","section-next":"style__section-next___Wd7Qi","section-title":"style__section-title___EDlLm",waiting:"style__waiting___mUgPB",subtitle:"style__subtitle___zJtee","skill-call-node":"style__skill-call-node___2Wx8B","section-onEnter":"style__section-onEnter___1l-QR","section-onReceive":"style__section-onReceive___2ndmf",fn:"style__fn___1eRJS",msg:"style__msg___29N4k",topPort:"style__topPort___2rXL8",startPort:"style__startPort___2GM6G",endPort:"style__endPort___1YTtE",missingConnection:"style__missingConnection___3OXMS",subflowPort:"style__subflowPort___24I4f",returnPort:"style__returnPort___3BKBK",portContainer:"style__portContainer___2BTnl",portLabel:"style__portLabel___3bzyb",label:"style__label___2KNlR"}},807:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StandardWidgetFactory=t.StandardNodeWidgetFactory=t.StandardNodeModel=t.StandardNodeWidget=void 0;var o=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,o)}if("value"in r)return r.value;var l=r.get;return void 0!==l?l.call(o):void 0},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),l=p(a),i=p(n(3)),s=p(n(11)),u=n(134),c=n(360),d=p(n(225)),f=p(n(223));function p(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=n(226),b=t.StandardNodeWidget=function(e){function t(){var e,n,o;_(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={},m(o,n)}return h(t,a.Component),r(t,[{key:"render",value:function(){var e,t,n,o=this.props.node,r=o.waitOnReceive,a=(0,i.default)(y["node-container"]);return l.default.createElement("div",{className:a},l.default.createElement("div",{className:y.topPort},l.default.createElement(c.StandardPortWidget,{name:"in",node:o})),l.default.createElement("div",{className:y.header}),l.default.createElement("div",{className:y.content},l.default.createElement("div",{className:(0,i.default)(y["section-onEnter"],y.section)},o.onEnter&&o.onEnter.map(function(e,t){return l.default.createElement(d.default,{key:t+"."+e,className:y.item,text:e})})),l.default.createElement("div",{className:(0,i.default)(y["section-title"],y.section,(e={},t=y.waiting,n=r,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e))},o.name),l.default.createElement("div",{className:(0,i.default)(y["section-onReceive"],y.section)},o.onReceive&&o.onReceive.map(function(e,t){return l.default.createElement(d.default,{key:t+"."+e,className:y.item,text:e})})),l.default.createElement("div",{className:(0,i.default)(y["section-next"],y.section)},o.next&&o.next.map(function(e,t){var n="out"+t;return l.default.createElement("div",{key:t+"."+e,className:(0,i.default)(y.item)},l.default.createElement(f.default,{condition:e,position:t}),l.default.createElement(c.StandardPortWidget,{name:n,node:o}))}))),l.default.createElement("div",{className:y.footer},l.default.createElement("div",null)))}}]),t}();b.defaultProps={size:200,node:null},t.StandardNodeModel=function(e){function t(e){var n=e.id,o=e.x,r=e.y,a=e.name,l=e.onEnter,i=void 0===l?[]:l,s=e.onReceive,u=void 0===s?[]:s,c=e.next,d=void 0===c?[]:c,f=e.isStartNode,p=void 0!==f&&f;_(this,t);var h=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"standard",n));return h.setData({name:a,onEnter:i,onReceive:u,next:d,isStartNode:p}),o&&(h.x=o),r&&(h.y=r),h}return h(t,u.NodeModel),r(t,[{key:"serialize",value:function(){return s.default.merge(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serialize",this).call(this),{name:this.name,onEnter:this.onEnter,onReceive:this.onReceive,next:this.next})}},{key:"deSerialize",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deSerialize",this).call(this,e),this.setData({name:e.name,onEnter:e.onEnter,onReceive:e.onReceive,next:e.next})}},{key:"getOutPorts",value:function(){return s.default.filter(s.default.values(this.ports),function(e){return e.name.startsWith("out")})}},{key:"setData",value:function(e){var t=e.name,n=e.onEnter,o=void 0===n?[]:n,r=e.onReceive,a=void 0===r?[]:r,l=e.next,i=void 0===l?[]:l,u=e.isStartNode;this.isStartNode=u;var d=u?"start":"normal",f=!s.default.isNil(a);this.ports.in||this.addPort(new c.StandardIncomingPortModel("in",d));for(var p=0;p<i.length;p++)this.ports["out"+p]||this.addPort(new c.StandardOutgoingPortModel("out"+p));s.default.isString(o)&&(o=[o]),s.default.isString(a)?a=[a]:s.default.isNil(a)&&(a=[]),a=a.map(function(e){return e.function||e}),!s.default.isArray(i)&&s.default.isObjectLike(i)&&(i=[i]),this.onEnter=o,this.onReceive=a,this.waitOnReceive=f,this.next=i,this.name=t}}]),t}();var g=t.StandardNodeWidgetFactory=l.default.createFactory(b);t.StandardWidgetFactory=function(e){function t(){return _(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"standard"))}return h(t,u.NodeFactory),r(t,[{key:"generateReactWidget",value:function(e,t){return g({node:t})}}]),t}()},808:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=n(1),l=y(a),i=n(13),s=y(n(18)),u=y(n(3)),c=y(n(11)),d=n(134),f=n(527),p=n(146),_=n(807),m=n(804),h=n(803);function y(e){return e&&e.__esModule?e:{default:e}}var b=n(802),g=["name","onEnter","onReceive","next","skill"],v=function(e,t){return e.type&&"skill-call"===e.type?new m.SkillCallNodeModel(r({},t)):new _.StandardNodeModel(r({},t))},w=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onDiagramDoubleClick=function(){n.props.openFlowNodeProps()},n.onDiagramClick=function(e){var t=n.getSelectedNode(),o=n.props.currentFlowNode;if(c.default.values(n.activeModel.getLinks()).forEach(function(e){if(!e.sourcePort||!e.targetPort)return e.remove(),n.diagramWidget.forceUpdate();if("in"!==e.sourcePort.name&&"in"!==e.targetPort.name)return e.remove(),n.diagramWidget.forceUpdate();if(!e.sourcePort.name.startsWith("out")&&!e.targetPort.name.startsWith("out"))return e.remove(),n.diagramWidget.forceUpdate();[e.sourcePort,e.targetPort].forEach(function(e){if(e){var t=c.default.values(e.links);e.name.startsWith("out")&&t.length>1&&(c.default.last(t).remove(),n.diagramWidget.forceUpdate())}});var t=e.sourcePort.name.startsWith("out")?e.sourcePort:e.targetPort,o=e.sourcePort.name.startsWith("out")?e.targetPort:e.sourcePort;return t.parentNode.id===o.parentNode.id?(e.remove(),n.diagramWidget.forceUpdate()):void 0}),n.props.currentDiagramAction&&n.props.currentDiagramAction.startsWith("insert_")){var r=n.diagramEngine.getRelativePoint(e.clientX,e.clientY),a=r.x,l=r.y,i=n.activeModel.getZoomLevel()/100;a/=i,l/=i,a-=n.activeModel.getOffsetX()/i,l-=n.activeModel.getOffsetY()/i,"insert_skill"===n.props.currentDiagramAction?n.props.insertNewSkillNode({x:a,y:l}):n.props.createFlowNode({x:a,y:l}),n.props.setDiagramAction(null)}!t&&o?n.props.switchFlowNode(null):!t||o&&t.id===o.id||n.props.switchFlowNode(t.id),!t||t.oldX===t.x&&t.oldY===t.y||(n.props.updateFlowNode({x:t.x,y:t.y}),Object.assign(t,{oldX:t.x,oldY:t.y})),n.checkForLinksUpdate()},n.serialize=function(){var e=n.activeModel.serializeDiagram(),t=e.nodes.map(function(t){return r({},c.default.pick(t,"id","name","onEnter","onReceive"),{next:t.next.map(function(n,o){var r=c.default.find(t.ports,{name:"out"+o});if(!r||!r.links||!r.links.length)return n;var a=c.default.find(e.links,{id:r.links[0]}),l=a&&(a.source===t.id?a.target:a.source),i=c.default.find(e.nodes,{id:l});return i?{condition:n.condition,node:i.name}:n}),position:c.default.pick(t,"x","y")})});return{links:n.serializeLinks(),nodes:t}},n.onKeyDown=function(e){(e.ctrlKey||e.metaKey)&&"c"===e.key?n.copySelectedElementToBuffer():(e.ctrlKey||e.metaKey)&&"v"===e.key?n.pasteElementFromBuffer():"Backspace"===e.code&&n.deleteSelectedElements()},n.state={},n.diagramEngine=new d.DiagramEngine,n.diagramEngine.registerNodeFactory(new _.StandardWidgetFactory),n.diagramEngine.registerNodeFactory(new m.SkillCallWidgetFactory),n.diagramEngine.registerLinkFactory(new h.DeletableLinkFactory),n.setModel(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"setTranslation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.activeModel.setOffset(e,t),this.diagramWidget.fireAction(),this.diagramWidget.forceUpdate()}},{key:"createFlow",value:function(e){this.props.createFlow(e+".flow.json")}},{key:"setModel",value:function(){var e=this;this.activeModel=new d.DiagramModel,this.activeModel.setGridSize(5),this.activeModel.linksHash=null,this.activeModel.setLocked(this.props.readOnly);var t=this.props.currentFlow;if(t){var n=t.nodes.map(function(e){var n=v(e,r({},e,{isStartNode:t.startNode===e.name}));return n.x=n.oldX=e.x,n.y=n.oldY=e.y,n});n.forEach(function(t){return e.activeModel.addNode(t)}),n.forEach(function(t){return e.createNodeLinks(t,n,e.props.currentFlow.links)}),this.diagramEngine.setDiagramModel(this.activeModel);var o=document.getElementById("diagramContainer");if(o){var a=o.offsetWidth,l=c.default.max(n.map(function(e){return e.x}))-c.default.min(n.map(function(e){return e.x}));this.activeModel.setZoomLevel(100*Math.min(1,a/(l+200))),this.activeModel.setOffsetX(100-c.default.min(n.map(function(e){return e.x}))),this.activeModel.setOffsetY(100-c.default.min(n.map(function(e){return e.y}))),this.diagramWidget&&this.diagramWidget.forceUpdate()}}}},{key:"clearModel",value:function(){this.activeModel=new d.DiagramModel,this.activeModel.setGridSize(5),this.activeModel.linksHash=null,this.activeModel.setLocked(this.props.readOnly),this.diagramEngine.setDiagramModel(this.activeModel),this.diagramWidget&&this.diagramWidget.forceUpdate()}},{key:"createNodeLinks",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];c.default.isArray(e.next)&&e.next.forEach(function(r,a){var l=r.node;if(/^END$/i.test(l));else if(/\.flow/i.test(l));else{var i=e.ports["out"+a],s=c.default.find(t,{name:r.node});if(!s)return;var u=c.default.find(o,{source:e.id,target:s.id,sourcePort:i.name}),f=s.ports.in,p=new d.LinkModel;p.setSourcePort(i),p.setTargetPort(f),u&&p.setPoints(u.points.map(function(e){return new d.PointModel(p,{x:e.x,y:e.y})})),n.activeModel.addLink(p)}})}},{key:"deleteNode",value:function(e){var t=this,n=this.activeModel.getNode(e).getPorts();this.activeModel.removeNode(e),c.default.values(n).forEach(function(e){c.default.values(e.getLinks()).forEach(function(e){t.activeModel.removeLink(e)})})}},{key:"syncModel",value:function(){var e=this,t=c.default.once(this.serialize);c.default.keys(this.activeModel.getNodes()).forEach(function(t){c.default.find(e.props.currentFlow.nodes,{id:t})||e.deleteNode(t)}),this.props.currentFlow&&this.props.currentFlow.nodes.forEach(function(n){var o=e.activeModel.getNode(n.id);o?o.lastModified!==n.lastModified?e.syncNode(n,o,t()):o.setData(r({},c.default.pick(n,g),{isStartNode:e.props.currentFlow.startNode===n.name})):e.addNode(n)}),this.activeModel.setLocked(this.props.readOnly),this.diagramWidget.forceUpdate()}},{key:"addNode",value:function(e){var t=this,n=v(e,r({},e,{isStartNode:this.props.currentFlow.startNode===e.name}));n.x=n.oldX=e.x,n.y=n.oldY=e.y,this.activeModel.addNode(n),setTimeout(function(){n.setSelected(!0),t.props.switchFlowNode(e.id)},150),n.setData(r({},c.default.pick(e,g),{isStartNode:this.props.currentFlow.startNode===e.name})),n.lastModified=e.lastModified}},{key:"syncNode",value:function(e,t,n){var o=this;t.setData(r({},c.default.pick(e,g),{isStartNode:this.props.currentFlow.startNode===e.name})),t.setPosition(e.x,e.y),t.getOutPorts().forEach(function(e){c.default.values(e.links).forEach(function(t){o.activeModel.removeLink(t),e.removeLink(t)})});var a=c.default.values(this.activeModel.getNodes());this.createNodeLinks(t,a,n.links),t.lastModified=e.lastModified}},{key:"getSelectedNode",value:function(){return c.default.first(this.activeModel.getSelectedItems()||[],{selected:!0})}},{key:"componentDidMount",value:function(){this.props.fetchFlows(),s.default.findDOMNode(this.diagramWidget).addEventListener("click",this.onDiagramClick),s.default.findDOMNode(this.diagramWidget).addEventListener("dblclick",this.onDiagramDoubleClick),document.getElementById("diagramContainer").addEventListener("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){s.default.findDOMNode(this.diagramWidget).removeEventListener("click",this.onDiagramClick),s.default.findDOMNode(this.diagramWidget).removeEventListener("dblclick",this.onDiagramDoubleClick),document.getElementById("diagramContainer").removeEventListener("keydown",this.onKeyDown)}},{key:"componentDidUpdate",value:function(e){this.props.currentFlow?e.currentFlow&&c.default.get(e,"currentFlow.name")===c.default.get(this,"props.currentFlow.name")?this.syncModel():this.setModel():this.clearModel()}},{key:"checkForLinksUpdate",value:function(){var e=this.serializeLinks(),t=(0,p.hashCode)(JSON.stringify(e));this.activeModel.linksHash||(this.activeModel.linksHash=t),this.activeModel.linksHash!==t&&(this.activeModel.linksHash=t,this.props.updateFlow({links:e}))}},{key:"serializeLinks",value:function(){var e=this;return this.activeModel.serializeDiagram().links.map(function(t){var n=e.activeModel.getLink(t.id),o={source:t.source,sourcePort:n.sourcePort.name,target:t.target,points:t.points.map(function(e){return{x:e.x,y:e.y}})};return"in"===n.sourcePort.name&&(o.source=t.target,o.sourcePort=n.targetPort.name,o.target=t.source,o.points=c.default.reverse(o.points)),o})}},{key:"saveAllFlows",value:function(){this.props.saveAllFlows()}},{key:"deleteSelectedElements",value:function(){var e=c.default.sortBy(this.diagramEngine.getDiagramModel().getSelectedItems(),"nodeType"),t=!0,n=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var l=r.value;if(!this.diagramEngine.isModelLocked(l)){if(l.isStartNode)return alert("You can't delete the start node.");c.default.includes(["standard","skill-call"],l.nodeType)||c.default.includes(["standard","skill-call"],l.type)?this.props.removeFlowNode(l.id):"default"===l.linkType?(l.remove(),this.checkForLinksUpdate()):l.remove()}}}catch(e){n=!0,o=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw o}}this.diagramWidget.forceUpdate()}},{key:"copySelectedElementToBuffer",value:function(){this.props.copyFlowNode(),(0,f.toast)("Copied to buffer!",{autoClose:1e3,position:f.toast.POSITION.TOP_CENTER,hideProgressBar:!0,closeButton:!1})}},{key:"pasteElementFromBuffer",value:function(){this.props.pasteFlowNode({x:100-this.activeModel.offsetX,y:100-this.activeModel.offsetY}),this.getSelectedNode().setSelected(!1)}},{key:"render",value:function(){var e,t,n,o=this,r=this.props.currentDiagramAction&&this.props.currentDiagramAction.startsWith("insert_"),a=(0,u.default)((e={},n=r,(t=b.insertNode)in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e));return l.default.createElement("div",{id:"diagramContainer",tabIndex:"1",className:a,style:{outline:"none",width:"100%",height:"100%"}},r&&l.default.createElement("div",{className:b.insertMode},l.default.createElement("div",null,l.default.createElement(i.Label,{bsStyle:"primary"},"Insertion Mode")),l.default.createElement(i.Button,{bsStyle:"danger",onClick:function(){return o.props.setDiagramAction(null)}},"Cancel")),l.default.createElement(d.DiagramWidget,{readOnly:this.props.readOnly,ref:function(e){return o.diagramWidget=e},deleteKeys:[],diagramEngine:this.diagramEngine}))}}]),t}();t.default=w},809:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(21),a=n(73),l=n(16),i=(o=n(808))&&o.__esModule?o:{default:o},s={fetchFlows:l.fetchFlows,switchFlowNode:l.switchFlowNode,openFlowNodeProps:l.openFlowNodeProps,setDiagramAction:l.setDiagramAction,createFlowNode:l.createFlowNode,saveAllFlows:l.saveAllFlows,removeFlowNode:l.removeFlowNode,createFlow:l.createFlow,updateFlowNode:l.updateFlowNode,updateFlow:l.updateFlow,copyFlowNode:l.copyFlowNode,pasteFlowNode:l.pasteFlowNode,insertNewSkillNode:l.insertNewSkillNode},u=(0,r.connect)(function(e){return{flows:e.flows,currentFlow:(0,a.getCurrentFlow)(e),currentFlowNode:(0,a.getCurrentFlowNode)(e),currentDiagramAction:e.flows.currentDiagramAction}},s,null,{withRef:!0})(i.default);t.default=u},81:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(1)),a=n(21),l=s(n(3)),i=s(n(893));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={show:!1},c(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({show:!0})},50)}},{key:"render",value:function(){var e,t=this.props,n=t.unwrap,o=t.viewMode,a=t.stretch,s=t.children,c=n?r.default.createElement("div",{className:"unwrap"},s):s,d=o<2,f=!0===a,p=(0,l.default)((u(e={},i.default.contentWrapper,!0),u(e,"bp-content-wrapper",!0),u(e,i.default.contentWrapperPadding,!f&&d),u(e,"bp-content-wrapper-padding",!f&&d),u(e,i.default.show,this.state.show),u(e,"bp-content-wrapper-show",this.state.show),u(e,this.props.className,!0),e));return r.default.createElement("div",{className:p},c)}}]),t}();t.default=(0,a.connect)(function(e){return{viewMode:e.ui.viewMode}})(d)},810:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,"#toolbarInsertSkill {\n  padding: 3px 12px;\n  margin: 3px 5px 0;\n  border-radius: 0; }\n\n.toolbar__wrapper___1jiX3 {\n  width: 100%;\n  border-top: 1px solid #e0e0e0;\n  border-bottom: 1px solid #e0e0e0;\n  background: #fafafa;\n  padding: 0 40px; }\n\n.toolbar__toolbar___3dUHc .toolbar__unsavedText___1M_K- {\n  color: #888; }\n\n.toolbar__separator___G34EP {\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  border-left: 1px solid #d9d9d9;\n  height: 40px;\n  margin: 0 5px 0 4px;\n  vertical-align: top;\n  display: inline-block; }\n\n.toolbar__btn___3YXDx {\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  margin: 6px 0 0 2px;\n  height: 30px;\n  background: 0;\n  border-color: transparent;\n  border-style: solid;\n  border-width: 1px;\n  border-radius: 2px;\n  outline: none;\n  padding: 0;\n  line-height: 30px;\n  list-style: none;\n  font-size: 11px;\n  font-weight: bold;\n  text-decoration: none;\n  vertical-align: middle;\n  cursor: pointer; }\n  .toolbar__btn___3YXDx:focus {\n    outline: none !important; }\n  .toolbar__btn___3YXDx i {\n    padding: 4px 3px;\n    font-size: 21px;\n    color: #000;\n    opacity: 0.54; }\n  .toolbar__btn___3YXDx:hover {\n    border-color: transparent !important;\n    border-color: rgba(0, 0, 0, 0.06); }\n    .toolbar__btn___3YXDx:hover i {\n      opacity: 1; }\n",""]),t.locals={wrapper:"toolbar__wrapper___1jiX3",toolbar:"toolbar__toolbar___3dUHc",unsavedText:"toolbar__unsavedText___1M_K-",separator:"toolbar__separator___G34EP",btn:"toolbar__btn___3YXDx"}},811:function(e,t,n){var o=n(810);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},812:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=d(n(1)),a=n(46),l=n(21),i=n(13),s=d(n(11)),u=n(16),c=d(n(61));function d(e){return e&&e.__esModule?e:{default:e}}var f=n(811),p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"componentDidMount",value:function(){this.props.updateGlobalStyle({"bp-navbar":{borderBottom:"none"}})}},{key:"componentWillUnmount",value:function(){this.props.updateGlobalStyle({"bp-navbar":{}})}},{key:"render",value:function(){var e,t,n,o=this,a=function(e,t){return r.default.createElement(i.Tooltip,{id:e},t)},l=!s.default.isEmpty(this.props.dirtyFlows),u="insert_node"===this.props.currentDiagramAction,d=r.default.createElement(i.MenuItem,{eventKey:"1",disabled:!0},"No skills installed"),p=r.default.createElement(c.default,{user:this.props.user,op:"write",res:"bot.skills"},r.default.createElement(i.DropdownButton,{title:"Insert skill",id:"toolbarInsertSkill"},r.default.createElement(i.MenuItem,{header:!0},"Installed skills"),!this.props.skills.length&&d,this.props.skills.map(function(e,t){return r.default.createElement(i.MenuItem,{key:t,eventKey:t,onClick:function(){return o.props.buildSkill(e.id)}},e.name)})));return r.default.createElement("div",{className:f.wrapper},r.default.createElement("div",{className:f.toolbar},r.default.createElement(i.Button,{className:f.btn,bsStyle:"default",onClick:function(){var e=prompt("Enter the name of the new flow");if(e)return e=e.replace(/\.flow\.json$/i,""),/[^A-Z0-9-_\/]/i.test(e)?alert("ERROR: The flow name can only contain letters, numbers, underscores and hyphens."):s.default.includes(o.props.flowsNames,e+".flow.json")?alert("ERROR: This flow already exists"):void o.props.onCreateFlow(e)}},r.default.createElement(i.OverlayTrigger,{placement:"bottom",overlay:a("addFlow","Create new flow")},r.default.createElement("i",{className:"material-icons"},"create_new_folder"))),r.default.createElement("div",{className:f.separator}),r.default.createElement(i.Button,{className:f.btn,bsStyle:"default",disabled:window.BOTPRESS_FLOW_EDITOR_DISABLED||!l,onClick:function(){return o.props.onSaveAllFlows&&o.props.onSaveAllFlows()}},r.default.createElement(i.OverlayTrigger,{placement:"bottom",overlay:a("saveAll","Save all")},r.default.createElement("i",{className:"material-icons"},"save"))),r.default.createElement("div",{className:f.separator}),r.default.createElement(i.Button,{className:f.btn,bsStyle:"default",disabled:!this.props.canUndo,onClick:this.props.undo},r.default.createElement(i.OverlayTrigger,{placement:"bottom",overlay:a("undo","Undo")},r.default.createElement("i",{className:"material-icons"},"undo"))),r.default.createElement(i.Button,{className:f.btn,bsStyle:"default",disabled:!this.props.canRedo,onClick:this.props.redo},r.default.createElement(i.OverlayTrigger,{placement:"bottom",overlay:a("redo","Redo")},r.default.createElement("i",{className:"material-icons"},"redo"))),r.default.createElement(i.Button,{className:f.btn,bsStyle:"default",onClick:this.props.onCopy},r.default.createElement(i.OverlayTrigger,{placement:"bottom",overlay:a("copy","Copy")},r.default.createElement("i",{className:"material-icons"},"content_copy"))),r.default.createElement(i.Button,{className:f.btn,bsStyle:"default",onClick:this.props.onPaste,disabled:!this.props.canPasteNode},r.default.createElement(i.OverlayTrigger,{placement:"bottom",overlay:a("paste","Paste")},r.default.createElement("i",{className:"material-icons"},"content_paste"))),r.default.createElement("div",{className:f.separator}),r.default.createElement(i.Button,{className:f.btn,bsStyle:"default",active:u,onClick:(n="insert_node",function(){o.props.setDiagramAction(o.props.currentDiagramAction===n?null:n)})},r.default.createElement(i.OverlayTrigger,{placement:"bottom",overlay:a("addNode","Insert New Node")},r.default.createElement("i",{className:"material-icons"},"add_box"))),p,r.default.createElement("div",{className:f.separator}),r.default.createElement(i.Button,{className:f.btn,bsStyle:"default",disabled:(e=o.props.currentFlow&&o.props.currentFlow.startNode,t=o.props.currentFlowNode&&o.props.currentFlowNode.name,!(e&&t&&e!==t)),onClick:function(){o.props.updateFlow({startNode:o.props.currentFlowNode.name})}},r.default.createElement(i.OverlayTrigger,{placement:"bottom",overlay:a("makeStartNode","Set as Start node")},r.default.createElement("i",{className:"material-icons"},"stars"))),r.default.createElement(i.Button,{className:f.btn,bsStyle:"default",onClick:this.props.onDelete},r.default.createElement(i.OverlayTrigger,{placement:"bottom",overlay:a("delete","Delete")},r.default.createElement("i",{className:"material-icons"},"delete")))))}}]),t}();t.default=(0,l.connect)(null,function(e){return(0,a.bindActionCreators)({updateGlobalStyle:u.updateGlobalStyle},e)})(p)},813:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(21),r=s(n(11)),a=n(16),l=n(73),i=s(n(812));function s(e){return e&&e.__esModule?e:{default:e}}var u={setDiagramAction:a.setDiagramAction,updateFlow:a.updateFlow,undo:a.flowEditorUndo,redo:a.flowEditorRedo,buildSkill:a.buildNewSkill},c=(0,o.connect)(function(e){return{flowsNames:r.default.keys(e.flows.flowsByName),currentFlow:(0,l.getCurrentFlow)(e),currentDiagramAction:e.flows.currentDiagramAction,currentFlowNode:(0,l.getCurrentFlowNode)(e),dirtyFlows:(0,l.getDirtyFlows)(e),canUndo:(0,l.canFlowUndo)(e),canRedo:(0,l.canFlowRedo)(e),canPasteNode:Boolean(e.flows.nodeInBuffer),skills:e.skills.installed,user:e.user}},u)(i.default);t.default=c},836:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=w(r),l=w(n(835)),i=n(21),s=n(69),u=w(n(11)),c=w(n(81)),d=w(n(80)),f=n(61),p=w(n(813)),_=w(n(809)),m=w(n(800)),h=w(n(673)),y=w(n(669)),b=w(n(659)),g=n(16),v=n(73);function w(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var k=n(644),O=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=E(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={initialized:!1},E(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"init",value:function(){!this.state.initialized&&this.props.user&&null!=this.props.user.id&&this.setState({initialized:!0,readOnly:!(0,f.operationAllowed)({user:this.props.user,op:"write",res:"bot.flows"})})}},{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(){this.init()}},{key:"componentWillReceiveProps",value:function(e){var t=e.match.params.flow;if(t){var n=t+".flow.json";this.props.currentFlow!==n&&this.props.switchFlow(n)}else this.props.currentFlow&&this.props.history.push("/flows/"+this.props.currentFlow.replace(/\.flow\.json/,""))}},{key:"componentWillUnmount",value:function(){var e=this.props.history.location.pathname,t=!u.default.isEmpty(this.props.dirtyFlows);/^\/flows\//g.exec(e)||window.BOTPRESS_FLOW_EDITOR_DISABLED||!t||confirm("Save changes?")&&this.diagram.saveAllFlows()}},{key:"render",value:function(){var e=this;if(!this.state.initialized)return null;var t=this.state.readOnly;return a.default.createElement(c.default,{stretch:!0,className:k.wrapper},a.default.createElement(d.default,{className:k.header,width:"100%"},a.default.createElement(h.default,{readOnly:t})),!t&&a.default.createElement(p.default,{onSaveAllFlows:function(){e.diagram.saveAllFlows()},onCreateFlow:function(t){e.diagram.createFlow(t)},onDelete:function(){e.diagram.deleteSelectedElements()},onCopy:function(){e.diagram.copySelectedElementToBuffer()},onPaste:function(){e.diagram.pasteElementFromBuffer()}}),a.default.createElement("div",{className:k.workspace},a.default.createElement(l.default,{split:"vertical",minSize:200,defaultSize:250},a.default.createElement("div",{className:k.sidePanel},a.default.createElement(m.default,{readOnly:t})),a.default.createElement("div",{className:k.diagram},a.default.createElement(_.default,{readOnly:t,ref:function(t){t&&(e.diagram=t.getWrappedInstance())}}))),a.default.createElement(y.default,null),a.default.createElement(b.default,{readOnly:t,show:this.props.showFlowNodeProps})))}}]),t}();t.default=(0,i.connect)(function(e){return{currentFlow:e.flows.currentFlow,showFlowNodeProps:e.flows.showFlowNodeProps,dirtyFlows:(0,v.getDirtyFlows)(e),user:e.user}},{switchFlow:g.switchFlow})((0,s.withRouter)(O))},837:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".style__folders___Y0bTe {\n  list-style: none;\n  padding: 0; }\n\n.style__files___1_M0Y {\n  list-style: none;\n  padding: 0; }\n",""]),t.locals={folders:"style__folders___Y0bTe",files:"style__files___1_M0Y"}},838:function(e,t,n){var o=n(837);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},839:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=(o=n(1))&&o.__esModule?o:{default:o},a=n(244);t.default=function(){return r.default.createElement("section",null,r.default.createElement("p",null,"Some of the bot's behavior is determined by the content coming from the files (Content / Forms, Flows)."),r.default.createElement("p",null,"For your convenience Botpress provides the GUI tools to edit these files while in development."),r.default.createElement("p",null,"We also provide the same tools in production, but there's a caveat. If we would write the same change to the server's file system they could easily be lost due to the nature of ephemeral server instances (when the new version of the bot is deployed the old server instance may be simply shut down by the cloud hosting platform)."),r.default.createElement("p",null,"To address this issue we give you the Ghost COntent feature. In production your changes are saved to the database which is persisted between deployments. But how do you get these changes back to your bot's codebase?"),r.default.createElement("p",null,"To do so you run a special command from your bot folder, ",r.default.createElement("code",null,"./node_modules/.bin/botpress ghost-sync ",(0,a.getHost)()),". This will fetch the updated content from the server, apply it to the local file system, and also record the revision IDs in a special file."),r.default.createElement("p",null,"The synchronisation is finalized after these updated files are redeployed."))}},845:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=y(r),l=n(21),i=y(n(844)),s=y(n(9)),u=n(13),c=y(n(81)),d=y(n(80)),f=y(n(61)),p=y(n(251)),_=y(n(839)),m=n(244),h=y(n(838));function y(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=b(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={loading:!0,data:null,error:null,showAbout:!1,showSyncHelp:!1},o.showAbout=function(){o.setState({showAbout:!0})},o.hideAbout=function(){o.setState({showAbout:!1})},o.showSyncHelp=function(){o.setState({showSyncHelp:!0})},o.hideSyncHelp=function(){o.setState({showSyncHelp:!1})},b(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"fetch",value:function(){var e=this;this.setState({loading:!0}),(0,m.fetchStatus)().then(function(t){e.setState({data:t,loading:!1,error:null})}).catch(function(t){e.setState({error:t.message||"Unknown",loading:!1})})}},{key:"componentDidMount",value:function(){this.fetch()}},{key:"renderRevision",value:function(e,t){var n=e.folder,o=e.file,r=e.revision,l=e.created_on,i=0===t?"(most recent)":"",u=s.default.utc(l).fromNow();return a.default.createElement("li",{key:n+"/"+o+"/"+r},"Revision ",a.default.createElement("code",null,r)," – Edited ",u," ",i)}},{key:"revertFile",value:function(e,t){var n=this;return(0,m.revertPendingFileChanges)(e,t).then(function(){return n.fetch()})}},{key:"renderFile",value:function(e,t,n){var o=this;return n=(0,i.default)(n,["created_on"],["desc"]),a.default.createElement("li",{key:e+"/"+t},a.default.createElement("details",null,a.default.createElement("summary",null,t,a.default.createElement(f.default,{user:this.props.user,op:"write",res:"bot.ghost_content"}," ",a.default.createElement("a",{href:"javascript:void(0);",onClick:function(){confirm("Are you sure you want to revert these changes? Changes will be lost and this is not reversible.")&&o.revertFile(e,t)}},"Revert changes"))),a.default.createElement("ul",null,n.map(function(t,n){return o.renderRevision(Object.assign({folder:e},t),n)}))))}},{key:"renderFolder",value:function(e,t){var n=this,o=Object.keys(t).sort();return a.default.createElement(u.Panel,{collapsible:"true",defaultExpanded:!0,key:e},a.default.createElement(u.Panel.Heading,null,e),a.default.createElement(u.Panel.Body,null,a.default.createElement("ul",{className:h.default.files},o.map(function(o){return n.renderFile(e,o,t[o])}))))}},{key:"renderContent",value:function(){var e=this,t=this.state,n=t.data,o=t.showSyncHelp,r=Object.keys(n).sort();return r.length?a.default.createElement("div",null,a.default.createElement(u.Alert,{bsStyle:"warning"},a.default.createElement("p",null,"Below is the list of ghost content present in the DB. You need to eventually sync it up with the bot source code. ",a.default.createElement(u.Button,{bsSize:"small",bsStyle:"info",onClick:this.showSyncHelp},"Show me how to do it")),a.default.createElement("p",null,"Don't know what is ghost content? ",a.default.createElement(u.Button,{bsSize:"small",bsStyle:"link",onClick:this.showAbout},"Read about this feature"))),o&&a.default.createElement(u.Alert,{bsStyle:"info",onDismiss:this.hideSyncHelp},a.default.createElement("p",null,a.default.createElement("strong",null,"To pull the pending ghost content run in your bot's project folder:")),a.default.createElement("p",null,a.default.createElement("code",null,"./node_modules/.bin/botpress ghost-sync ",(0,m.getHost)()))),a.default.createElement("ul",{className:h.default.folders},r.map(function(t){return e.renderFolder(t,n[t])}))):a.default.createElement(u.Alert,{bsStyle:"success"},a.default.createElement("p",null,"You don't have any ghost content in your DB, DB is in sync with the bot source code."),a.default.createElement("p",null,"Don't know what is ghost content? ",a.default.createElement(u.Button,{bsSize:"small",bsStyle:"link",onClick:this.showAbout},"Read about this feature"),"."))}},{key:"renderBody",value:function(){var e=this,t=this.state,n=t.loading,o=t.error;return n?a.default.createElement(p.default,null):o?a.default.createElement(u.Alert,{bsStyle:"danger"},a.default.createElement("p",null,"Error fetching status dta: ",o,"."),a.default.createElement("p",null,a.default.createElement(u.Button,{bsStyle:"info",onClick:function(){return e.fetch()}},"Try again"))):this.renderContent()}},{key:"render",value:function(){return a.default.createElement(c.default,null,a.default.createElement(d.default,null,"Version Control"),this.renderBody(),a.default.createElement(u.Modal,{show:this.state.showAbout,onHide:this.hideAbout},a.default.createElement(u.Modal.Header,{closeButton:!0},a.default.createElement(u.Modal.Title,null,"Version Control")),a.default.createElement(u.Modal.Body,null,a.default.createElement(_.default,null)),a.default.createElement(u.Modal.Footer,null,a.default.createElement(u.Button,{onClick:this.hideAbout},"Close"))))}}]),t}();t.default=(0,l.connect)(function(e){return{user:e.user}})(g)},846:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".style__content___1aMIq {\n  width: 100%;\n  height: 100%;\n  padding-left: 0;\n  padding-right: 0; }\n\n.style__modal___sKgpR .style__cancel___37yqf {\n  position: absolute;\n  left: 90px;\n  bottom: 24px;\n  height: 34px;\n  padding-right: 12px;\n  padding-left: 12px;\n  min-width: 70px; }\n\n.style__modal___sKgpR .btn-info {\n  background-color: #46cba0;\n  border-color: #46cba0; }\n  .style__modal___sKgpR .btn-info:hover {\n    background-color: #40bd94;\n    border-color: #40bd94; }\n",""]),t.locals={content:"style__content___1aMIq",modal:"style__modal___sKgpR",cancel:"style__cancel___37yqf"}},847:function(e,t,n){var o=n(846);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},848:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".style__list___3EX80 {\n  min-height: 85vh; }\n  .style__list___3EX80 .style__header___1xYOt {\n    padding: 10px 0;\n    height: 60px;\n    margin: 5px 0 0 0;\n    border-bottom: 1px solid #c9c8ca; }\n    .style__list___3EX80 .style__header___1xYOt .checkbox {\n      margin-top: 0px;\n      margin-bottom: 0px;\n      margin-left: -2px;\n      height: 18px; }\n    .style__list___3EX80 .style__header___1xYOt button {\n      height: 30px;\n      width: 34px;\n      position: relative;\n      margin-right: 8px; }\n      .style__list___3EX80 .style__header___1xYOt button i {\n        position: absolute;\n        left: 6px;\n        top: 6px;\n        font-size: 18px;\n        line-height: 18px;\n        color: #807f81; }\n    .style__list___3EX80 .style__header___1xYOt .style__left___3ermR .style__search___Q_Dum {\n      position: relative;\n      width: 300px;\n      display: inline-block;\n      margin-right: 10px;\n      margin-left: 10px; }\n      .style__list___3EX80 .style__header___1xYOt .style__left___3ermR .style__search___Q_Dum .form-control {\n        position: absolute;\n        top: -4px;\n        height: 30px; }\n    .style__list___3EX80 .style__header___1xYOt .style__right___2KDss {\n      right: 5px; }\n      .style__list___3EX80 .style__header___1xYOt .style__right___2KDss .style__paging___2gGsw {\n        margin-right: 10px; }\n  .style__list___3EX80 .style__container___1UAPk table {\n    border: none; }\n    .style__list___3EX80 .style__container___1UAPk table tr {\n      font-size: 90%; }\n    .style__list___3EX80 .style__container___1UAPk table td {\n      padding: 10px;\n      border: none;\n      border-bottom: 1px solid #e0e0e0; }\n    .style__list___3EX80 .style__container___1UAPk table .checkbox {\n      margin-top: 0px;\n      margin-bottom: 0px;\n      height: 20px; }\n    .style__list___3EX80 .style__container___1UAPk table .style__selected___2GM9r {\n      background-color: #7de4c2; }\n  .style__list___3EX80 .style__empty___1pkCw {\n    text-align: center;\n    font-weight: bolder;\n    margin-top: 35px; }\n",""]),t.locals={list:"style__list___3EX80",header:"style__header___1xYOt",left:"style__left___3ermR",search:"style__search___Q_Dum",right:"style__right___2KDss",paging:"style__paging___2gGsw",container:"style__container___1UAPk",selected:"style__selected___2GM9r",empty:"style__empty___1pkCw"}},849:function(e,t,n){var o=n(848);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},850:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=c(r),l=c(n(3)),i=c(n(11)),s=c(n(9)),u=n(13);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=n(849),p=function(t){function n(){var t,o,r;!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this);for(var c=arguments.length,p=Array(c),_=0;_<c;_++)p[_]=arguments[_];return o=r=d(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(p))),r.state={checkedIds:[],allChecked:!1,search:""},r.handleAllCheckedChanged=function(){r.setState({allChecked:!r.state.allChecked}),e(function(){var e=[];r.state.allChecked&&i.default.forEach(r.props.contentItems,function(t){var n=t.id;e.push(n)}),r.setState({checkedIds:e})})},r.handleDeleteSelected=function(){r.props.handleDeleteSelected(r.state.checkedIds),r.setState({checkedIds:[],allChecked:!1})},r.handleCloneSelected=function(){r.props.handleClone(r.state.checkedIds),r.setState({checkedIds:[],allChecked:!1})},r.handleSearchChanged=function(e){r.setState({search:e.target.value}),r.debouncedHandleSearch&&r.debouncedHandleSearch()},r.renderContentItem=function(e,t){var n,o,c,d=i.default.includes(r.state.checkedIds,e.id),p=(0,l.default)(f.item,(n={},c=d,(o=f.selected)in n?Object.defineProperty(n,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):n[o]=c,n));return a.default.createElement("tr",{className:p,key:t},!r.props.readOnly&&a.default.createElement("td",{style:{width:"2%",minWidth:"34px"}},a.default.createElement(u.Checkbox,{checked:d,onClick:function(){return r.handleCheckboxChanged(e.id,e.categoryId)}})),a.default.createElement("td",{style:{width:"16%"}},"#!"+e.id),a.default.createElement("td",{style:{width:"8%"}},e.categoryId),a.default.createElement("td",{style:{width:"58%"}},e.previewText),a.default.createElement("td",{style:{width:"18%"}},(0,s.default)(e.createdOn).format("MMMM Do YYYY, h:mm")),!r.props.readOnly&&a.default.createElement("td",null,a.default.createElement(u.Button,{bsSize:"small",onClick:function(){return!r.props.readOnly&&r.props.handleEdit(e.id,e.categoryId)}},a.default.createElement(u.Glyphicon,{glyph:"pencil"}))))},d(r,o)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r.Component),o(n,[{key:"componentDidMount",value:function(){var e=this;this.debouncedHandleSearch=i.default.debounce(function(){e.props.handleSearch&&e.props.handleSearch(e.state.search)},1e3)}},{key:"handleCheckboxChanged",value:function(e){var t=this.state.checkedIds;i.default.includes(this.state.checkedIds,e)?i.default.pull(t,e):t.push(e),this.setState({checkedIds:t})}},{key:"renderTableHeader",value:function(){return a.default.createElement("tr",null,a.default.createElement("th",null),a.default.createElement("th",null,"Content Id"),a.default.createElement("th",null,"Category"),a.default.createElement("th",null,"Preview"),a.default.createElement("th",null,"Created on"))}},{key:"renderTable",value:function(){if(this.props.contentItems&&0===this.props.contentItems.length){var e=this.props.readOnly?"There's no content here.":"There's no content yet. You can create some using the 'Add' button.";return a.default.createElement("div",{className:f.empty},e)}return a.default.createElement("div",{className:f.container},a.default.createElement(u.Table,{striped:!0,bordered:!0,condensed:!0,hover:!0},a.default.createElement("tbody",null,this.props.contentItems.map(this.renderContentItem))))}},{key:"renderPaging",value:function(){var e=this.props.count,t=(this.props.page-1)*this.props.itemsPerPage+1,n=this.props.page*this.props.itemsPerPage,o=(t=0!==e?t:0)+" - "+(n=n<=e?n:e)+" of "+e;return a.default.createElement("span",{className:f.paging},o)}},{key:"renderActionButtons",value:function(){return a.default.createElement("span",null,!this.props.readOnly&&a.default.createElement(u.Button,{onClick:this.handleAllCheckedChanged},a.default.createElement(u.Checkbox,{checked:this.state.allChecked,onClick:this.handleAllCheckedChanged})),a.default.createElement(u.Button,{onClick:this.props.handleRefresh,title:"Refresh"},a.default.createElement("i",{className:"material-icons"},"refresh")),!this.props.readOnly&&a.default.createElement(u.Button,{onClick:this.handleDeleteSelected,disabled:i.default.isEmpty(this.state.checkedIds),title:"Delete selected"},a.default.createElement("i",{className:"material-icons"},"delete")),!this.props.readOnly&&a.default.createElement(u.Button,{onClick:this.handleCloneSelected,disabled:i.default.isEmpty(this.state.checkedIds),title:"Clone selected"},a.default.createElement("i",{className:"material-icons"},"filter_none")))}},{key:"renderPagingButtons",value:function(){return a.default.createElement("span",{className:f.pagingButtons},a.default.createElement(u.Button,{onClick:this.props.handlePrevious,disabled:1===this.props.page},a.default.createElement("i",{className:"material-icons"},"keyboard_arrow_left")),a.default.createElement(u.Button,{onClick:this.props.handleNext,disabled:this.props.page*this.props.itemsPerPage>=this.props.count},a.default.createElement("i",{className:"material-icons"},"keyboard_arrow_right")))}},{key:"renderSearchBar",value:function(){return a.default.createElement(u.FormGroup,{className:f.search},a.default.createElement(u.FormControl,{type:"text",placeholder:"Search",value:this.state.search,onChange:this.handleSearchChanged}))}},{key:"renderHeader",value:function(){var e=(0,l.default)("pull-left",f.left),t=(0,l.default)("pull-right",f.right);return a.default.createElement("div",{className:f.header},a.default.createElement("div",{className:e},this.renderActionButtons(),this.renderSearchBar()),a.default.createElement("div",{className:t},this.renderPaging(),this.renderPagingButtons()))}},{key:"render",value:function(){var e=(0,l.default)("bp-list",f.list);return a.default.createElement("div",{className:e},this.renderHeader(),this.renderTable())}}]),n}();t.default=p}).call(this,n(74).setImmediate)},851:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".style__sidebar___1N6kp {\n  min-height: 85vh; }\n  .style__sidebar___1N6kp button {\n    margin-top: 18px;\n    width: 100%; }\n    .style__sidebar___1N6kp button.style__disabled___1T_4x {\n      background-color: #b5b3b6;\n      cursor: not-allowed; }\n      .style__sidebar___1N6kp button.style__disabled___1T_4x:hover {\n        background-color: #b5b3b6; }\n  .style__sidebar___1N6kp ul {\n    list-style: none;\n    padding: 10px;\n    margin-top: 20px; }\n    .style__sidebar___1N6kp ul li {\n      margin-bottom: 5px;\n      padding-left: 6px;\n      line-height: 24px;\n      border-left: solid 3px #fff; }\n      .style__sidebar___1N6kp ul li a {\n        cursor: pointer;\n        color: #000000;\n        font-weight: bolder;\n        text-decoration: none; }\n        .style__sidebar___1N6kp ul li a:hover {\n          color: #444444; }\n      .style__sidebar___1N6kp ul li.style__selected___3uWrd {\n        border-color: #46cba0; }\n        .style__sidebar___1N6kp ul li.style__selected___3uWrd a {\n          font-weight: bold; }\n      .style__sidebar___1N6kp ul li .style__title___2RKRS {\n        margin-right: 5px; }\n      .style__sidebar___1N6kp ul li .style__count___3hBqq {\n        opacity: 0.7; }\n",""]),t.locals={sidebar:"style__sidebar___1N6kp",disabled:"style__disabled___1T_4x",selected:"style__selected___3uWrd",title:"style__title___2RKRS",count:"style__count___3hBqq"}},852:function(e,t,n){var o=n(851);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},853:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=s(r),l=s(n(3)),i=(s(n(11)),n(13));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=n(852),f={id:"all",title:"All",count:null},p=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=o=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.renderCategory=function(e,t){var n=(0,l.default)(u({},d.selected,e.id===o.props.selectedId));return a.default.createElement("li",{className:n,key:t},a.default.createElement("a",{onClick:function(){return o.props.handleCategorySelected(e.id)}},a.default.createElement("span",{className:d.title},e.title),e.count?a.default.createElement("span",{className:d.count},"("+e.count+")  "):null))},c(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"renderAddButton",value:function(){var e=this;if(this.props.readOnly)return null;var t=(0,l.default)("bp-button",u({},d.disabled,"all"===this.props.selectedId));return a.default.createElement(i.Button,{className:t,onClick:function(){return e.props.handleAdd()},disabled:"all"==this.props.selectedId},"Add Content")}},{key:"renderCategories",value:function(){var e=this.props.categories;return e&&e.length?a.default.createElement("ul",null,[f].concat(e).map(this.renderCategory)):null}},{key:"render",value:function(){var e=(0,l.default)("bp-sidebar",d.sidebar);return a.default.createElement("div",{className:e},this.renderAddButton(),this.renderCategories())}}]),t}();t.default=p},854:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=b(r),l=n(21),i=b(n(3)),s=b(n(177)),u=b(n(11)),c=n(13),d=b(n(853)),f=n(16),p=b(n(850)),_=b(n(256)),m=b(n(81)),h=b(n(80)),y=n(61);function b(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=n(847),w=function(t){function n(){var t,o,r;!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this);for(var a=arguments.length,l=Array(a),i=0;i<a;i++)l[i]=arguments[i];return o=r=g(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(l))),r.state={showModal:!1,modifyId:null,selectedId:"all",page:1,contentToEdit:null},r.initialized=!1,r.handleCloseModal=function(){r.setState({showModal:!1,modifyId:null,contentToEdit:null})},r.handleCreateNew=function(){r.setState({showModal:!0,modifyId:null,contentToEdit:null})},r.handleUpsert=function(){var e=r.currentCategoryId();r.props.upsertContentItem({categoryId:e,formData:r.state.contentToEdit,modifyId:r.state.modifyId}).then(function(){return r.fetchCategoryItems(r.state.selectedId)}).then(function(){return r.setState({showModal:!1})})},r.handleClone=function(e){return s.default.all(r.props.contentItems.filter(function(t){var n=t.id;return e.includes(n)}).map(function(e){var t=e.categoryId,n=e.formData;return r.props.upsertContentItem({formData:n,categoryId:t})})).then(function(){return r.fetchCategoryItems(r.state.selectedId)})},r.handleFormEdited=function(e){r.setState({contentToEdit:e})},r.handleCategorySelected=function(e){r.fetchCategoryItems(e),r.setState({selectedId:e})},r.handleDeleteSelected=function(e){r.props.deleteContentItems(e).then(function(){return r.fetchCategoryItems(r.state.selectedId)})},r.handleModalShowForEdit=function(e){var t=u.default.find(r.props.contentItems,{id:e}).formData;r.setState({modifyId:e,showModal:!0,contentToEdit:t})},r.handleRefresh=function(){r.fetchCategoryItems(r.state.selectedId||"all")},r.handlePrevious=function(){r.setState({page:r.state.page-1||1}),e(function(){return r.fetchCategoryItems(r.state.selectedId)})},r.handleNext=function(){r.setState({page:r.state.page+1}),e(function(){return r.fetchCategoryItems(r.state.selectedId)})},r.handleSearch=function(t){r.setState({searchTerm:t}),e(function(){return r.fetchCategoryItems(r.state.selectedId)})},g(r,o)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r.Component),o(n,[{key:"init",value:function(){!this.initialized&&this.props.user&&null!=this.props.user.id&&(this.initialized=!0,this.canRead=(0,y.operationAllowed)({user:this.props.user,op:"read",res:"bot.content"}),this.canEdit=(0,y.operationAllowed)({user:this.props.user,op:"write",res:"bot.content"}),this.canRead&&(this.props.fetchContentCategories(),this.fetchCategoryItems(this.state.selectedId)))}},{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(){this.init()}},{key:"fetchCategoryItems",value:function(e){return this.canRead?this.props.fetchContentItems({id:e,count:20,from:20*(this.state.page-1),searchTerm:this.state.searchTerm}):s.default.resolve()}},{key:"currentCategoryId",value:function(){return this.state.modifyId?u.default.find(this.props.contentItems,{id:this.state.modifyId}).categoryId:this.state.selectedId}},{key:"renderBody",value:function(){var e=this.state,t=e.selectedId,n=void 0===t?"all":t,o=e.contentToEdit,r=this.props.categories||[],l=u.default.find(r,{id:this.currentCategoryId()}),s=(0,i.default)(v.content,"bp-content");return r.length?a.default.createElement("div",null,a.default.createElement(c.Grid,{className:s},a.default.createElement(c.Row,null,a.default.createElement(c.Col,{xs:3},a.default.createElement(d.default,{readOnly:!this.canEdit,categories:r,selectedId:n,handleAdd:this.handleCreateNew,handleCategorySelected:this.handleCategorySelected})),a.default.createElement(c.Col,{xs:9},a.default.createElement(p.default,{readOnly:!this.canEdit,page:this.state.page,count:"all"===this.state.selectedId?u.default.sumBy(r,"count")||0:u.default.find(r,{id:this.state.selectedId}).count,itemsPerPage:20,contentItems:this.props.contentItems||[],searchTerm:this.state.searchTerm,handlePrevious:this.handlePrevious,handleNext:this.handleNext,handleRefresh:this.handleRefresh,handleEdit:this.handleModalShowForEdit,handleDeleteSelected:this.handleDeleteSelected,handleClone:this.handleClone,handleSearch:this.handleSearch})))),this.canEdit&&a.default.createElement(_.default,{show:this.state.showModal,schema:l&&l.schema.json||{},uiSchema:l&&l.schema.ui||{},formData:o,handleCreateOrUpdate:this.handleUpsert,handleEdit:this.handleFormEdited,handleClose:this.handleCloseModal})):a.default.createElement("div",{className:s},a.default.createElement(c.Alert,{bsStyle:"warning"},a.default.createElement("strong",null,"We think you don't have any content types defined.")," Please ",a.default.createElement("a",{href:"https://botpress.io/docs/foundamentals/content/",target:"_blank",rel:"noopener noreferrer"},a.default.createElement("strong",null,"read the docs"))," to see how you can make use of this feature."))}},{key:"render",value:function(){return a.default.createElement(m.default,null,a.default.createElement(h.default,null,"Content Manager"),this.renderBody())}}]),n}(),E={fetchContentCategories:f.fetchContentCategories,fetchContentItems:f.fetchContentItems,upsertContentItem:f.upsertContentItem,deleteContentItems:f.deleteContentItems};t.default=(0,l.connect)(function(e){return{categories:e.content.categories,contentItems:e.content.currentItems,user:e.user}},E)(w)}).call(this,n(74).setImmediate)},855:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".style__documentation___3v16S {\n  margin: 0px 15px 25px 15px;\n  padding: 10px 25px; }\n",""]),t.locals={documentation:"style__documentation___3v16S"}},856:function(e,t,n){var o=n(855);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},877:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".style__dragging___pqyTv {\n  border: 1px dashed #666; }\n\n.style__middlewareList___5aGkH .list-group-item {\n  padding: 0; }\n\n.style__header___3AmeS {\n  padding: 20px; }\n  .style__header___3AmeS h4 {\n    display: inline;\n    margin: 10px 0; }\n  .style__header___3AmeS .style__help___1oCIS {\n    font-size: 12px;\n    margin-left: 10px;\n    color: #2e948f; }\n    .style__header___3AmeS .style__help___1oCIS:hover {\n      cursor: default;\n      color: #58d1b0; }\n\n.style__footer___1Nes7 {\n  height: 5px;\n  background-color: #fbfbfb; }\n\n.style__middleware___1KK5z {\n  padding: 10px 15px;\n  cursor: pointer;\n  transition: background-color 0.15s ease-in-out, border-color 0.5s ease-in-out;\n  border-left: 5px solid #58d1b0; }\n  .style__middleware___1KK5z:hover {\n    color: #666;\n    background-color: #f6f6f6; }\n  .style__middleware___1KK5z h4 {\n    color: #2e948f;\n    transition: color 0.5s ease-in-out; }\n  .style__middleware___1KK5z .style__circle___26j1N {\n    background-color: #58d1b0;\n    transition: background-color 0.5s ease-in-out;\n    width: 10px;\n    height: 10px;\n    border-radius: 50%;\n    display: inline-block;\n    float: left;\n    margin-right: 10px;\n    margin-top: 3px; }\n  .style__middleware___1KK5z .style__helpIcon___11711 {\n    color: #bfbfbf;\n    position: absolute;\n    top: 25px;\n    right: 25px;\n    width: 18px;\n    height: 18px; }\n\n.style__disabled___3afoG {\n  transition: border-color 0.5s ease-in-out;\n  border-left: 5px solid #bfbfbf; }\n  .style__disabled___3afoG .style__circle___26j1N {\n    background-color: #bfbfbf; }\n\n.style__saveButton___1aZDR {\n  border: none;\n  background-color: #58d1b0;\n  color: white;\n  font-weight: bolder;\n  position: absolute;\n  right: 15px;\n  top: 16px;\n  font-size: 14px;\n  text-align: center;\n  width: 70px;\n  height: 30px;\n  opacity: 0;\n  transition: opacity 0.5s ease-in-out, background-color 0.15s ease-in-out; }\n  .style__saveButton___1aZDR.style__dirty___1qDyM {\n    opacity: 0.5; }\n  .style__saveButton___1aZDR.style__dirty___1qDyM:hover {\n    background-color: #58d1b0;\n    opacity: 1;\n    color: white; }\n",""]),t.locals={dragging:"style__dragging___pqyTv",middlewareList:"style__middlewareList___5aGkH",header:"style__header___3AmeS",help:"style__help___1oCIS",footer:"style__footer___1Nes7",middleware:"style__middleware___1KK5z",circle:"style__circle___26j1N",helpIcon:"style__helpIcon___11711",disabled:"style__disabled___3afoG",saveButton:"style__saveButton___1aZDR",dirty:"style__dirty___1qDyM"}},878:function(e,t,n){var o=n(877);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},882:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),l=h(a),i=n(21),s=h(n(0)),u=n(881),c=n(13),d=h(n(11)),f=h(n(3)),p=h(n(31)),_=n(61),m=h(n(878));function h(e){return e&&e.__esModule?e:{default:e}}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=function(e){function t(){return b(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,a.Component),r(t,[{key:"render",value:function(){var e,t=this.props.middleware,n=t.name,o=t.enabled,r=t.module,a=t.description,i=this.props.readOnly,s=(0,f.default)(this.props.className,m.default.middleware,"bp-middleware",(y(e={},m.default.disabled,!o),y(e,"bp-disabled",!o),e)),u=a?l.default.createElement(c.Tooltip,{id:"module-"+n+"-description"},a):null;return l.default.createElement("div",null,l.default.createElement("div",{className:s,onClick:i?null:this.props.toggleEnabled},l.default.createElement("div",{className:(0,f.default)(m.default.helpIcon,"bp-help-icon")},l.default.createElement(c.OverlayTrigger,{placement:"left",overlay:u},l.default.createElement("i",{className:"material-icons"},"help"))),l.default.createElement("div",null,l.default.createElement("span",{className:(0,f.default)(m.default.circle,"bp-circle")}),l.default.createElement("h4",null,r)),l.default.createElement("div",null,"Handler: ",l.default.createElement("b",null,n||"N/A"))))}}]),t}();w.propTypes={middleware:s.default.object.isRequired,toggleEnabled:s.default.func,readOnly:s.default.bool};var E=function(e){var t=e.children,n=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(e,["children"]);return l.default.createElement(c.ListGroupItem,o({},n,{className:"list-item"}),t)},k=(0,u.sortable)(E),O=function(t){function n(){var e,t,o;b(this,n);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return t=o=g(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),o.state={loading:!0,incoming:[],outgoing:[],incomingDragIndex:null,incomingItems:[],outgoingDragIndex:null,outgoingItems:[],initialStateHash:null},o.initialized=!1,o.handleSort=function(e){return function(t){t.items&&o.setState(y({},e+"Items",t.items)),void 0!==t.draggingIndex&&o.setState(y({},e+"DragIndex",t.draggingIndex))}},o.saveChanges=function(){o.setState({loading:!0});var e=[];"incoming"===o.props.type?o.state.incomingItems.forEach(function(t,n){var r=d.default.find(o.state.incoming,{name:t});e.push({name:t,order:n,enabled:r.enabled})}):o.state.outgoingItems.forEach(function(t,n){var r=d.default.find(o.state.outgoing,{name:t});e.push({name:t,order:n,enabled:r.enabled})}),p.default.post("/api/middlewares/customizations",{middlewares:e}).then(function(e){var t=e.data;return o.setMiddlewares(t)})},g(o,t)}return v(n,a.Component),r(n,[{key:"init",value:function(){var e=this;!this.initialized&&this.props.user&&null!=this.props.user.id&&(this.initialized=!0,this.canRead=(0,_.operationAllowed)({user:this.props.user,op:"read",res:"bot.middleware.list"}),this.canEdit=(0,_.operationAllowed)({user:this.props.user,op:"write",res:"bot.middleware.customizations"}),this.canRead&&p.default.get("/api/middlewares").then(function(t){var n=t.data;return e.setMiddlewares(n)}))}},{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(){this.init()}},{key:"getStateHash",value:function(){var e=this,t="";return this.state.incomingItems.forEach(function(n){var o=d.default.find(e.state.incoming,{name:n});t+=n+":"+o.enabled+" "}),this.state.outgoingItems.forEach(function(n){var o=d.default.find(e.state.outgoing,{name:n});t+=n+":"+o.enabled+" "}),t}},{key:"setMiddlewares",value:function(t){var n=this,o=d.default.filter(t,{type:"incoming"}),r=d.default.filter(t,{type:"outgoing"}),a=d.default.map(o,function(e){return e.name}),l=d.default.map(r,function(e){return e.name});this.setState({loading:!1,incoming:o,outgoing:r,incomingItems:a,outgoingItems:l,initialIncomingOrder:a.join(" "),initialOutgoingOrder:l.join(" ")}),e(function(){return n.setState({initialStateHash:n.getStateHash()})})}},{key:"renderSortable",value:function(e){var t=this,n=e+"Items",o=this.state[n],r=e+"DragIndex";return o?o.map(function(n,a){var i=d.default.find(t.state[e],{name:n}),s=t.state[r]===a,u=(0,f.default)(y({},m.default.dragging,s)),c=!t.canEdit,p=l.default.createElement(w,{readOnly:c,toggleEnabled:c?null:t.toggleEnabled(n,e),middleware:i,className:u});return c?l.default.createElement(E,{key:a,outline:"list"},p):l.default.createElement(k,{key:a,updateState:t.handleSort(e),items:o,draggingIndex:t.state[r],sortId:a,outline:"list"},p)}):null}},{key:"isDirty",value:function(){return null!==this.state.initialStateHash&&this.state.initialStateHash!==this.getStateHash()}},{key:"renderIsDirty",value:function(){var e=(0,f.default)("bp-button",m.default.saveButton,this.isDirty()?m.default.dirty:null);return l.default.createElement("button",{className:e,onClick:this.saveChanges},"Save")}},{key:"toggleEnabled",value:function(e,t){var n=this;return function(){var o=d.default.map(n.state[t],function(t){return t.name===e?Object.assign({},t,{enabled:!t.enabled}):t});n.setState(y({},t,o))}}},{key:"renderIncoming",value:function(){var e=l.default.createElement(c.Tooltip,{id:"header-incoming-tooltip"},"An incoming middleware is a message processor  that has the potential to track, alter or swallow messages.  Usually, messages are put (sent) into the incoming middleware queue  by"," ",l.default.createElement("strong",null,"connector modules")," such as Facebook Messenger, Slack...");return this.renderList("incoming","Incoming middleware",e)}},{key:"renderOutgoing",value:function(){var e=l.default.createElement(c.Tooltip,{id:"header-outgoing-tooltip"},"An outgoing middleware is a message processor  that has the potential to track, alter or swallow messages to be sent.  Usually, messages are put (sent) into the outgoing middleware queue by user code or incoming modules. ",l.default.createElement("strong",null,"Connector modules")," are in charge of sending the messages to the users, thus they should  usually be placed at the end of the chain.");return this.renderList("outgoing","Outgoing middleware",e)}},{key:"renderList",value:function(e,t,n){return l.default.createElement(c.ListGroup,{className:(0,f.default)(m.default.middlewareList,"bp-middleware-list")},l.default.createElement(c.ListGroupItem,null,l.default.createElement("div",{className:(0,f.default)(m.default.header,"bp-header")},this.renderIsDirty(),l.default.createElement("h4",null,t),l.default.createElement(c.OverlayTrigger,{placement:"right",overlay:n},l.default.createElement("a",{className:(0,f.default)(m.default.help,"bp-help")},"what's this?")))),this.renderSortable(e),l.default.createElement(c.ListGroupItem,null,l.default.createElement("div",{className:m.default.footer})))}},{key:"render",value:function(){return this.state.loading||!this.initialized?null:"incoming"===this.props.type?this.renderIncoming():this.renderOutgoing()}}]),n}();O.propTypes={type:s.default.string.isRequired},t.default=(0,i.connect)(function(e){return{user:e.user}})(O)}).call(this,n(74).setImmediate)},883:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=c(n(1)),a=c(n(81)),l=c(n(80)),i=c(n(882)),s=c(n(368)),u=n(13);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=n(856),p="\n  #### **Documentation**\n\n  A middleware chain is simply a collection of middleware functions that are called in a predertermined order.\n\n  Every middleware has to be registered to appear and you will be able to  do so with\n  the `bp.middlewares.register()` method.\n\n  For more details about middleware, look at the [documentation](https://botpress.io/docs/advanced/middleware.html).\n\n  ##### **Ordering middleware**\n\n  All middleware functions that are registered (usually every modules are registered in their initialization).\n  You must load them using `bp.middlewares.load()` in your `index.js`, which will create the incoming\n  and outgoing chains automatically.\n\n  By default, middleware functions are ordered by ascending order according to their `order` property\n  set on registration. The order can then be manually overwritten here by using **drag-n-drop**.\n\n  You can also re-order them programmatically using middleware function customizations.\n  ",_=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={collapse:!0},o.handleReadMore=function(e){e.preventDefault(),e.stopPropagation(),o.setState({collapse:!o.state.collapse})},d(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"getDocumentation",value:function(){return this.state.collapse?p.substring(0,194)+"...":p}},{key:"getReadMore",value:function(){return this.state.collapse?"Read more":"Hide"}},{key:"render",value:function(){return r.default.createElement(a.default,null,r.default.createElement(l.default,null,r.default.createElement("span",null," Middleware")),r.default.createElement(u.Grid,{fluid:!0},r.default.createElement(u.Row,null,r.default.createElement(u.Panel,{className:f.documentation},r.default.createElement(u.Panel.Body,null,r.default.createElement(u.Row,{className:f.explication},r.default.createElement(u.Col,{sm:12},r.default.createElement(s.default,{source:this.getDocumentation()}),r.default.createElement("div",null,r.default.createElement("a",{href:"#",onClick:this.handleReadMore},this.getReadMore()))))))),r.default.createElement(u.Row,null,r.default.createElement(u.Col,{sm:12,md:6,mdOffset:0},r.default.createElement(i.default,{type:"incoming"})),r.default.createElement(u.Col,{sm:12,md:6,mdOffset:0},r.default.createElement(i.default,{type:"outgoing"})))))}}]),t}();t.default=_},884:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,"@keyframes style__rays___1yjcf {\n  from {\n    transform: rotate(0deg); }\n  to {\n    transform: rotate(360deg); } }\n\n.style__root___1ghQ1 h4 {\n  font-size: 20px; }\n\n.style__username___32Nxc {\n  color: #58d1b0;\n  font-weight: 500; }\n\n.style__heroContainer___brEq2 {\n  position: relative; }\n\n.style__heroInfo___3gOBf {\n  position: absolute;\n  display: inline;\n  top: 10px;\n  right: 10px;\n  z-index: 5;\n  color: #bee6db;\n  font-size: 12px; }\n\n.style__contribution___3Pruh {\n  position: relative;\n  height: 255px;\n  text-align: center;\n  overflow: hidden; }\n  .style__contribution___3Pruh .panel-body {\n    padding: 0;\n    height: 100%; }\n  .style__contribution___3Pruh .style__raysAnim___3Rwa- {\n    height: 400%;\n    width: 250%;\n    margin-top: -25%;\n    margin-left: -75%;\n    transform-origin: center center;\n    animation: style__rays___1yjcf 60s infinite linear; }\n    .style__contribution___3Pruh .style__raysAnim___3Rwa- .style__rays___1yjcf {\n      height: 100%;\n      background: url(/img/rays.png) no-repeat;\n      background-size: cover;\n      opacity: 0.05; }\n  .style__contribution___3Pruh .style__contributionContent___3WEds {\n    width: 100%;\n    text-align: center;\n    line-height: 25px;\n    position: absolute;\n    padding: 15px;\n    top: 50%;\n    transform: translateY(-50%); }\n    .style__contribution___3Pruh .style__contributionContent___3WEds img {\n      background-color: lightgrey;\n      height: 70px;\n      width: 70px;\n      margin-bottom: 30px;\n      border-radius: 5px; }\n    .style__contribution___3Pruh .style__contributionContent___3WEds strong {\n      font-weight: bolder; }\n    .style__contribution___3Pruh .style__contributionContent___3WEds p {\n      margin: 0; }\n",""]),t.locals={root:"style__root___1ghQ1",username:"style__username___32Nxc",heroContainer:"style__heroContainer___brEq2",heroInfo:"style__heroInfo___3gOBf",contribution:"style__contribution___3Pruh",raysAnim:"style__raysAnim___3Rwa-",rays:"style__rays___1yjcf",contributionContent:"style__contributionContent___3WEds"}},885:function(e,t,n){var o=n(884);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},886:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=d(n(1)),l=(d(n(18)),n(13)),i=d(n(11)),s=d(n(3)),u=d(n(31)),c=d(n(885));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={loading:!0},f(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"componentDidMount",value:function(){var e=this;this.queryHero().then(function(){e.setState({loading:!1})})}},{key:"queryHero",value:function(){var e=this;return u.default.get("/api/module/hero").then(function(t){e.setState(o({},t.data))})}},{key:"renderUsername",value:function(){return a.default.createElement("a",{className:(c.default.username,"bp-username"),href:this.state.github,target:"_blank"},this.state.username)}},{key:"renderPhrase",value:function(){var e=this.state,t=e.module,n=e.contributions,o=[a.default.createElement("h4",null,"Shout out to ",this.renderUsername()," for being awesome and contributing ",n," commits to ",a.default.createElement("b",null,t)),a.default.createElement("h4",null,"Did you know that without ",this.renderUsername(),", ",a.default.createElement("b",null,t)," wouldn't be the same ?"),a.default.createElement("h4",null,this.renderUsername()," is one of the heroes behind ",a.default.createElement("b",null,t),"."),a.default.createElement("h4",null,"The world needs more people like ",this.renderUsername(),". You're awesome for contributing to botpress!")];return i.default.sample(o)}},{key:"render",value:function(){if(this.state.loading)return null;var e=a.default.createElement(l.Tooltip,{id:"heroTooltip"},"These are people randomly selected from the list of contributors  to various open-source components of the botpress ecosystem.  We feel they deserve to be publicly recognized for their contributions.");return a.default.createElement("div",{className:(0,s.default)(c.default.heroContainer,"bp-hero")},a.default.createElement("div",{className:(0,s.default)(c.default.heroInfo,"bp-info")},a.default.createElement(l.OverlayTrigger,{placement:"left",overlay:e},a.default.createElement("i",{className:"material-icons"},"info"))),a.default.createElement(l.Panel,{className:(0,s.default)(c.default.contribution,"bp-contribution")},a.default.createElement(l.Panel.Body,null,a.default.createElement("div",{className:(0,s.default)(c.default.raysAnim,"bp-rays-anim")},a.default.createElement("div",{className:(0,s.default)(c.default.rays,"bp-rays")})),a.default.createElement("div",{className:(0,s.default)(c.default.root,"bp-root")},a.default.createElement("div",{className:(0,s.default)(c.default.contributionContent,"bp-content")},a.default.createElement("img",{src:this.state.avatar}),this.renderPhrase())))))}}]),t}();t.default=p},887:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".style__information___19xGY {\n  height: 255px;\n  padding: 15px 25px 15px 25px;\n  position: relative; }\n\n.style__informationName___2lyFe {\n  font-size: 28px;\n  margin-top: 5px;\n  margin-bottom: 20px;\n  color: #434343; }\n\n.style__informationDescription___ZfSu- {\n  color: #999;\n  font-weight: lighter; }\n\n.style__informationAuthor___KRA0K strong {\n  font-weight: bolder; }\n\n.style__informationVersion___34VMS {\n  color: #999;\n  margin-bottom: 5px; }\n\n.style__informationLicense___g4yLA a:hover {\n  color: #58d1b0; }\n\n.style__whereFrom___1KSPf {\n  position: absolute;\n  bottom: 5px;\n  right: 15px;\n  font-size: 12px;\n  color: #bfbfbf; }\n",""]),t.locals={information:"style__information___19xGY",informationName:"style__informationName___2lyFe",informationDescription:"style__informationDescription___ZfSu-",informationAuthor:"style__informationAuthor___KRA0K",informationVersion:"style__informationVersion___34VMS",informationLicense:"style__informationLicense___g4yLA",whereFrom:"style__whereFrom___1KSPf"}},888:function(e,t,n){var o=n(887);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},889:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=d(n(1)),a=d(n(0)),l=n(46),i=n(21),s=n(13),u=d(n(3)),c=n(16);function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=n(888),_=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={loading:!0},o.openLicenseComponent=function(){o.props.toggleLicenseModal()},f(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"componentDidMount",value:function(){this.setState({loading:!1})}},{key:"render",value:function(){return this.state.loading?null:r.default.createElement(s.Panel,{className:(0,u.default)(p.information,"bp-info")},r.default.createElement(s.Panel.Body,null,r.default.createElement("h3",{className:(0,u.default)(p.informationName,"bp-name")},this.props.botInformation.name),r.default.createElement("p",{className:(0,u.default)(p.informationDescription,"bp-description")},this.props.botInformation.description),r.default.createElement("p",{className:(0,u.default)(p.informationAuthor,"bp-author")},"Created by ",r.default.createElement("strong",null,this.props.botInformation.author)),r.default.createElement("p",{className:(0,u.default)(p.informationVersion,"bp-version")},"Version ",this.props.botInformation.version),r.default.createElement("p",{className:(0,u.default)(p.informationLicense,"bp-license")},"Licensed under"," ",r.default.createElement("a",{href:"#",onClick:this.openLicenseComponent},this.props.botInformation.license)),r.default.createElement("div",{className:(0,u.default)(p.whereFrom,"bp-where-from")},"Info extracted from package.json")))}}]),t}();_.contextTypes={router:a.default.object.isRequired},t.default=(0,i.connect)(function(e){return{botInformation:e.bot}},function(e){return(0,l.bindActionCreators)({toggleLicenseModal:c.toggleLicenseModal},e)})(_)},890:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".PageHeader__header___2Gzr5 {\n  position: fixed;\n  top: 0;\n  left: 220px;\n  height: 50px;\n  padding: 10px;\n  z-index: 20;\n  line-height: 30px;\n  color: #999;\n  font-size: 18px; }\n  .PageHeader__header___2Gzr5 .PageHeader__icon___2_tXO {\n    font-size: 14px;\n    margin: 0 5px;\n    color: #434343; }\n  .PageHeader__header___2Gzr5 a {\n    color: #bfbfbf; }\n\n.PageHeader__header___2Gzr5 .glyphicon {\n  margin: 0 5px;\n  font-size: 14px;\n  line-height: 30px; }\n\n.PageHeader__noSidebar___2udZq {\n  left: 10px; }\n",""]),t.locals={header:"PageHeader__header___2Gzr5",icon:"PageHeader__icon___2_tXO",noSidebar:"PageHeader__noSidebar___2udZq"}},891:function(e,t,n){var o=n(890);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},892:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".ContentWrapper__contentWrapper___16hI9 {\n  padding: 0;\n  margin: 0;\n  opacity: 0;\n  visibility: hidden; }\n\n.ContentWrapper__contentWrapperPadding___3SipB {\n  padding: 20px 40px; }\n\n.ContentWrapper__contentWrapper___16hI9.ContentWrapper__show___7b3e3 {\n  opacity: 1;\n  visibility: visible; }\n",""]),t.locals={contentWrapper:"ContentWrapper__contentWrapper___16hI9",contentWrapperPadding:"ContentWrapper__contentWrapperPadding___3SipB",show:"ContentWrapper__show___7b3e3"}},893:function(e,t,n){var o=n(892);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},894:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=f(n(1)),a=n(21),l=n(13),i=f(n(31)),s=f(n(81)),u=f(n(80)),c=f(n(889)),d=f(n(886));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={loading:!0,popularModules:[],featuredModules:[],hiddenHeroSection:!0},o.initialized=!1,p(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"init",value:function(){!this.initialized&&this.props.user&&null!=this.props.user.id&&(this.initialized=!0,this.setState({loading:!1}))}},{key:"componentDidMount",value:function(){this.init(),this.fetchHeroConfig()}},{key:"componentDidUpdate",value:function(){this.init()}},{key:"fetchHeroConfig",value:function(){var e=this;i.default.get("/api/community/hero").then(function(t){var n=t.data.hidden;return e.setState({hiddenHeroSection:n})})}},{key:"hero",value:function(){return this.state.hiddenHeroSection?null:r.default.createElement(l.Col,{xs:12,sm:8,md:4,smOffset:2,mdOffset:0},r.default.createElement(d.default,null))}},{key:"render",value:function(){var e=this.state,t=e.hiddenHeroSection;return e.loading||!this.initialized?null:r.default.createElement(s.default,null,r.default.createElement(u.default,null,r.default.createElement("span",null," Dashboard")),r.default.createElement(l.Grid,{fluid:!0,className:"bp-dashboard"},r.default.createElement(l.Row,null,r.default.createElement(l.Col,{sm:12,md:t?12:8},r.default.createElement(c.default,null)),this.hero())))}}]),t}();t.default=(0,a.connect)(function(e){return{user:e.user}})(_)},895:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=p(r),l=n(21),i=n(13),s=(p(n(230)),p(n(177))),u=p(n(3)),c=p(n(251)),d=p(n(256)),f=n(16);function p(e){return e&&e.__esModule?e:{default:e}}n(146);var _=n(544),m={INITIAL:0,PICK_CATEGORY:1,MAIN:2},h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.handleChangeActiveItem=function(e){var t=n.state.activeItemIndex;if("ArrowUp"===e.key)n.setState({activeItemIndex:t>0?t-1:t});else if("ArrowDown"===e.key){var o=n.props.contentItems,r=o?o.length:0;n.setState({activeItemIndex:t<r-1?t+1:t})}else"Enter"===e.key&&n.state.step===m.PICK_CATEGORY?n.setCurrentCategory(n.props.categories[n.state.activeItemIndex].id):"Enter"===e.key&&n.handlePick(n.props.contentItems[n.state.activeItemIndex])},n.onSearchChange=function(e){var t=e.target.value;t!==n.state.searchTerm&&n.setState({searchTerm:t},function(){n.searchContentItems().then(function(){return n.setState({activeItemIndex:0})})})},n.handleCreate=function(){n.props.upsertContentItem({categoryId:n.state.newItemCategory.id,formData:n.state.newItemData}).then(n.resetCreateContent(!0)).then(function(){return s.default.all([n.searchContentItems(),n.fetchContentItemsCount()])})},n.handleFormEdited=function(e){n.setState({newItemData:e})},n.resetCreateContent=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t){var o=t.data,r=Object.assign(n.state.newItemData||{},{id:o}),a={newItemCategory:null,newItemData:null};return e&&Object.assign(a,{searchTerm:"",activeItemIndex:0}),new s.default(function(e){return n.setState(a,function(){o&&n.handlePick(r),e()})})}},n.onClose=function(){n.setState({show:!1},function(){n.props.onClose&&n.props.onClose()})},n.resetCurrentCategory=function(){n.setState({categoryId:null,step:m.PICK_CATEGORY})};var o=e.categoryId,r=void 0===o?null:o;return n.state={show:!0,categoryId:r,hideCategoryInfo:!!r,activeItemIndex:0,step:r?m.MAIN:m.INITIAL,newItemCategory:null,searchTerm:"",newItemData:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"componentDidMount",value:function(){this.searchContentItems(),this.fetchContentItemsCount(),this.props.fetchContentCategories(),this.props.container.addEventListener("keyup",this.handleChangeActiveItem)}},{key:"componentWillReceiveProps",value:function(e){var t=e.categories;t&&this.state.step===m.INITIAL&&!this.state.categoryId&&this.setState({step:t.length>1?m.PICK_CATEGORY:m.MAIN})}},{key:"searchContentItems",value:function(){return this.props.fetchContentItemsRecent({count:5,searchTerm:this.state.searchTerm,categoryId:this.state.categoryId||"all"})}},{key:"fetchContentItemsCount",value:function(){return this.props.fetchContentItemsCount(this.state.categoryId)}},{key:"handlePick",value:function(e){this.props.onSelect&&this.props.onSelect(e),this.onClose()}},{key:"getVisibleCategories",value:function(){var e=this.props.categories;if(!e)return[];var t=this.state.categoryId;return t?e.filter(function(e){return e.id===t}):e}},{key:"setCurrentCategory",value:function(e){var t=this;this.setState({categoryId:e},function(){s.default.all([t.searchContentItems(),t.fetchContentItemsCount()]).then(function(){return t.setState({step:m.MAIN})})})}},{key:"renderCategoryPicker",value:function(){var e=this,t=this.props.categories;return a.default.createElement("div",null,a.default.createElement("strong",null,"Search in:"),a.default.createElement("div",{className:"list-group"},a.default.createElement("a",{href:"#",onClick:function(){return e.setCurrentCategory(null)},className:"list-group-item list-group-item-action"},"All"),t.map(function(t,n){return a.default.createElement("a",{href:"#",key:n,onClick:function(){return e.setCurrentCategory(t.id)},className:(0,u.default)("list-group-item","list-group-item-action",{active:n===e.state.activeItemIndex})},t.title)})))}},{key:"renderCurrentCategoryInfo",value:function(){var e=this.props.categories;if(this.state.hideCategoryInfo||!e||e.length<2)return null;var t=this.state.categoryId,n=t?e.find(function(e){return e.id===t}).title:"All";return a.default.createElement("p",null,"Currently Searching in: ",a.default.createElement("strong",null,n),". ",a.default.createElement("button",{className:"btn btn-warning btn-sm",onClick:this.resetCurrentCategory},"Change"))}},{key:"getSearchDescription",value:function(){var e=this.props.categories,t=this.state.categoryId;return"Search "+(t?e.find(function(e){return e.id===t}).title:"all content elements")+" ("+this.props.itemsCount+")"}},{key:"renderMainBody",value:function(){var e=this,t=this.getVisibleCategories();return t.length?a.default.createElement("div",null,this.renderCurrentCategoryInfo(),a.default.createElement("input",{type:"text",className:"form-control",placeholder:this.getSearchDescription(),"aria-label":"Search content elements",onChange:this.onSearchChange,autoFocus:!0,value:this.state.searchTerm}),a.default.createElement("hr",null),a.default.createElement("div",{className:"list-group"},t.map(function(t,n){return a.default.createElement("a",{href:"#",key:n,onClick:function(){return e.setState({newItemCategory:t,newItemData:null})},className:"list-group-item list-group-item-action "+_.createItem},"Create new ",t.title)}),this.props.contentItems.map(function(t,n){return a.default.createElement("a",{href:"#",key:n,className:"list-group-item list-group-item-action "+(n===e.state.activeItemIndex?"active":""),onClick:function(){return e.handlePick(t)}},"["+t.categoryId+"] "+t.previewText)}))):a.default.createElement(i.Alert,{bsStyle:"warning"},a.default.createElement("strong",null,"We think you don't have any content types defined.")," Please ",a.default.createElement("a",{href:"https://botpress.io/docs/foundamentals/content/",target:"_blank",rel:"noopener noreferrer"},a.default.createElement("strong",null,"read the docs"))," to see how you can make use of this feature.")}},{key:"renderBody",value:function(){return this.state.step===m.INITIAL?a.default.createElement(c.default,null):this.state.step===m.PICK_CATEGORY?this.renderCategoryPicker():this.renderMainBody()}},{key:"render",value:function(){var e=this.state,t=e.newItemCategory,n=e.show,o=this.props.container,r=(t||{}).schema||{json:{},ui:{}};return a.default.createElement(i.Modal,{animation:!1,show:n,onHide:this.onClose,container:o,style:{zIndex:1051}},a.default.createElement(i.Modal.Header,{closeButton:!0},a.default.createElement(i.Modal.Title,null,"Pick Content")),a.default.createElement(i.Modal.Body,null,this.renderBody()),a.default.createElement(d.default,{show:!!t,schema:r.json,uiSchema:r.ui,handleClose:this.resetCreateContent(!1),formData:this.state.newItemData,handleEdit:this.handleFormEdited,handleCreateOrUpdate:this.handleCreate}))}}]),t}(),y={fetchContentItemsRecent:f.fetchContentItemsRecent,fetchContentItemsCount:f.fetchContentItemsCount,fetchContentCategories:f.fetchContentCategories,upsertContentItem:f.upsertContentItem};t.default=(0,l.connect)(function(e){return{contentItems:e.content.recentItems,itemsCount:e.content.itemsCount,categories:e.content.categories}},y)(h)},896:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=s(r),l=s(n(895)),i=s(n(151));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selects:[]},n.onClose=function(e){return function(){var t=n.state.selects[e].rootEl;n.setState(function(t){var n=t.selects;return{selects:n.slice(0,e).concat(n.slice(e+1))}},function(){t.parentNode&&t.parentNode.removeChild(t)})}},window.botpress=window.botpress||{},window.botpress.pickContent=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).categoryId,t=void 0===e?null:e,o=arguments[1],r=(0,i.default)(),a=document.createElement("DIV");a.setAttribute("data-select-content-container",r),document.getElementById("app").appendChild(a),n.setState(function(e){var n=e.selects;return{selects:[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n),[{categoryId:t,callback:o,id:r,rootEl:a}])}})},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"componentWillUnmount",value:function(){delete window.botpress.pickContent}},{key:"render",value:function(){var e=this,t=this.state.selects;return a.default.createElement("div",null,t.map(function(t,n){var o=t.categoryId,r=t.callback,i=t.id,s=t.rootEl;return a.default.createElement(l.default,{key:i,categoryId:o,onSelect:r,onClose:e.onClose(n),container:s})}))}}]),t}();t.default=u},897:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".style__body___3uwpm {\n  font-size: 16px; }\n  .style__body___3uwpm .style__big___a44U8 {\n    font-size: 22px; }\n  .style__body___3uwpm .style__emp___2sb4D {\n    font-weight: 400; }\n  .style__body___3uwpm .style__left___1YC2M {\n    text-align: left; }\n  .style__body___3uwpm li {\n    margin: 10px 20px; }\n",""]),t.locals={body:"style__body___3uwpm",big:"style__big___a44U8",emp:"style__emp___2sb4D",left:"style__left___1YC2M"}},898:function(e,t,n){var o=n(897);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},900:function(e,t,n){"use strict";var o,r=(o=n(899))&&o.__esModule?o:{default:o};e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return r.default.emojify(e,{emojiType:"emojione",attributes:{width:t,height:t}})}},901:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=c(n(1)),a=n(13),l=c(n(3)),i=c(n(900)),s=c(n(31)),u=(c(n(11)),c(n(898)));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=3,p=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={finished:!1,step:0},o.handleClose=function(){s.default.delete("/api/guided-tour").then(function(){o.setState({finished:!0})})},o.handleNext=function(){o.state.step<f-1?o.setState({step:o.state.step+1}):o.handleClose()},o.handlePrevious=function(){o.state.step>0&&o.setState({step:o.state.step-1})},d(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"renderSkipButton",value:function(){return r.default.createElement(a.Button,{className:"pull-left",onClick:this.handleClose},"Skip")}},{key:"renderPrevButton",value:function(){var e=this.state.step<=0;return r.default.createElement(a.Button,{disabled:e,onClick:this.handlePrevious},"Back")}},{key:"renderNextButton",value:function(){var e=this.state.step<f-1?"Next":"Let's start!";return r.default.createElement(a.Button,{onClick:this.handleNext,bsStyle:"success"},e)}},{key:"renderStep_0",value:function(){return r.default.createElement("div",null,r.default.createElement("p",null,(0,i.default)(":tada:",100)),r.default.createElement("p",{className:u.default.big},"Congratulations on choosing Botpress for your next bot!"),r.default.createElement("p",null,"Botpress is the most effective way for developers to create bots. This tour will help you get started quickly."),r.default.createElement("hr",null),r.default.createElement("p",null,"First, you should know that a Botpress bot is just a regular Node.js app. There is no black magic, and everything your bot does is done either through the code you write or done for you by pre-made modules (thanks to our awesome community)."),r.default.createElement("p",null,"By default, your bot's entry point is the ",r.default.createElement("code",null,"index.js")," file, but you can arrange your code base as you wish. Again, ",r.default.createElement("span",{className:u.default.emp},"your bot is just a regular Node.js program.")))}},{key:"renderStep_1",value:function(){return r.default.createElement("div",null,r.default.createElement("p",null,(0,i.default)(":package:",100)),r.default.createElement("p",{className:u.default.big},"There's a module for that."),r.default.createElement("p",null,"Whenever there's a piece of functionality that you need for your bot, think modules."),r.default.createElement("hr",null),r.default.createElement("p",null,"You can install modules via this graphical interface or from the command-line interface."),r.default.createElement("p",null,"If there's no module for the generic feature you are looking for, please consider creating one or contributing to an existing module to add that feature. Botpress relies heavily on the community to thrive. Every single contribution is needed, even if it's tiny ",(0,i.default)(":blush:"),"!"),r.default.createElement("p",null,"Installing a module from the command-line is as simple as typing ",r.default.createElement("code",null,"npm install botpress-messenger")))}},{key:"renderStep_2",value:function(){return r.default.createElement("div",null,r.default.createElement("p",null,(0,i.default)(":rocket:",100)),r.default.createElement("p",{className:u.default.big},"Before you deploy your bot..."),r.default.createElement("ul",{className:u.default.left},r.default.createElement("li",null,"We recommend you"," ",r.default.createElement("a",{target:"_blank",href:"https://botpress.io/docs/getting_started/trivia_deploying/#using-postgres-as-the-database"},"enable the Postgres database")," ","for production environments."),r.default.createElement("li",null,"Do ",r.default.createElement("strong",null,"not")," store keys, passwords or any sensitive information in your botfile. Use environment variables instead."),r.default.createElement("li",null,"Switch to the ",r.default.createElement("b",null,"Botpress License")," (the default license is AGPL), which is 100% free for all bots and more permissive than AGPL.")),r.default.createElement("p",null,"Deployment tutorials are"," ",r.default.createElement("a",{href:"https://botpress.io/docs/getting_started/trivia_deploying/#deploying-to-self-hosted-server",target:"_blank"},"available here.")))}},{key:"renderCurrentStep",value:function(){return this["renderStep_"+Math.min(this.state.step,f-1)]()}},{key:"render",value:function(){var e=(0,l.default)("text-center",u.default.body);return r.default.createElement(a.Modal,{show:!this.state.finished&&this.props.opened,onHide:this.handleClose,backdrop:"static"},r.default.createElement(a.Modal.Header,null,r.default.createElement(a.Modal.Title,null,"Welcome to Botpress!")),r.default.createElement(a.Modal.Body,{className:e},this.renderCurrentStep()),r.default.createElement(a.Modal.Footer,null,this.renderSkipButton(),this.renderPrevButton(),this.renderNextButton()))}}]),t}();t.default=p},902:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=(o=n(1))&&o.__esModule?o:{default:o},a=n(46),l=n(21),i=n(13),s=n(16);t.default=(0,l.connect)(null,function(e){return(0,a.bindActionCreators)({toggleAboutModal:s.toggleAboutModal},e)})(function(e){return r.default.createElement(i.Modal,{show:e.opened,onHide:e.toggleAboutModal},r.default.createElement(i.Modal.Header,{closeButton:!0},r.default.createElement(i.Modal.Title,null,"About Botpress")),r.default.createElement(i.Modal.Body,null,r.default.createElement("h3",null,"Botpress ",r.default.createElement("b",null,"v",window.BOTPRESS_VERSION)),r.default.createElement("h5",null,"The only sane way of building great bots"),r.default.createElement("br",null),"Emoji provided free by ",r.default.createElement("a",{href:"http://emojione.com/"},"EmojiOne")))})},903:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".modal-dialog {\n  width: 750px; }\n\n.style__textArea___qy4-D {\n  font-size: 16px;\n  overflow-y: scroll;\n  width: 100%;\n  height: 300px;\n  border-radius: 5px;\n  padding: 10px 20px 10px 20px;\n  border-color: lightgrey;\n  margin: 10px 0px 10px 0px; }\n",""]),t.locals={textArea:"style__textArea___qy4-D"}},904:function(e,t,n){var o=n(903);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},905:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(1)),a=s(n(0)),l=n(13),i=s(n(904));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={loading:!0},o.handleClose=function(){o.props.toggleLicenseModal()},u(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"componentDidMount",value:function(){this.setState({loading:!1})}},{key:"renderLicenseTextArea",value:function(){return r.default.createElement("div",null,r.default.createElement("textarea",{readOnly:!0,className:i.default.textArea,value:this.props.license.text}))}},{key:"renderCancelButton",value:function(){return r.default.createElement(l.Button,{onClick:this.handleClose},"Close")}},{key:"render",value:function(){return this.state.loading?null:r.default.createElement(l.Modal,{show:this.props.opened,onHide:this.handleClose},r.default.createElement(l.Modal.Header,{closeButton:!0},r.default.createElement(l.Modal.Title,null,this.props.license.name)),r.default.createElement(l.Modal.Body,null,this.renderLicenseTextArea()),r.default.createElement(l.Modal.Footer,null,this.renderCancelButton()))}}]),t}();c.contextTypes={router:a.default.object.isRequired},t.default=c},906:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".HelpButton__container___hqLkB {\n  position: absolute;\n  right: 60px;\n  bottom: 80px; }\n\n.HelpButton__button___31ZHt {\n  position: relative;\n  width: 56px;\n  height: 56px;\n  background-color: #242424;\n  color: #fff;\n  border-radius: 50%;\n  cursor: pointer;\n  box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.13);\n  transition: background-color 0.12s cubic-bezier(0.2, 0.7, 0.5, 1), box-shadow 0.12s cubic-bezier(0.2, 0.7, 0.5, 1); }\n  .HelpButton__button___31ZHt .icon {\n    font-size: 32px;\n    margin: 12px; }\n  .HelpButton__button___31ZHt:hover {\n    background-color: #3b3b3b;\n    box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.13); }\n  .HelpButton__button___31ZHt .HelpButton__icon___UYWGy {\n    position: absolute;\n    left: 0; }\n  .HelpButton__button___31ZHt i {\n    transform: scale(0);\n    opacity: 0;\n    transition: transform 0.12s cubic-bezier(0.2, 0.7, 0.5, 1) 0ms, opacity 0.12s cubic-bezier(0.2, 0.7, 0.5, 1) 0ms; }\n    .HelpButton__button___31ZHt i.HelpButton__show___3Y5m5 {\n      transform: scale(1);\n      opacity: 1; }\n\n.HelpButton__menu___3-P-2 ul {\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n  margin-top: -300px; }\n\n.HelpButton__menu___3-P-2 li {\n  transform: scale(0.8);\n  opacity: 0;\n  pointer-events: none;\n  cursor: pointer;\n  position: absolute;\n  width: 48px;\n  height: 48px;\n  right: 4px;\n  border-radius: 50%;\n  box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.13); }\n  .HelpButton__menu___3-P-2 li .icon {\n    margin: 11px; }\n  .HelpButton__menu___3-P-2 li.HelpButton__btn1___3p7_r {\n    background-color: #fff;\n    transition: background-color 0.12s, transform 0.12s cubic-bezier(0.2, 0.7, 0.5, 1) 0ms, opacity 0.12s cubic-bezier(0.2, 0.7, 0.5, 1) 0ms, bottom 0.12s cubic-bezier(0.2, 0.7, 0.5, 1) 0ms; }\n    .HelpButton__menu___3-P-2 li.HelpButton__btn1___3p7_r a {\n      color: #58d1b0; }\n  .HelpButton__menu___3-P-2 li.HelpButton__btn2___1iYsn {\n    background-color: #58d1b0;\n    transition: background-color 0.12s, transform 0.12s cubic-bezier(0.2, 0.7, 0.5, 1) 40ms, opacity 0.12s cubic-bezier(0.2, 0.7, 0.5, 1) 40ms, bottom 0.12s cubic-bezier(0.2, 0.7, 0.5, 1) 40ms; }\n    .HelpButton__menu___3-P-2 li.HelpButton__btn2___1iYsn:hover {\n      background-color: #5ee1bc; }\n    .HelpButton__menu___3-P-2 li.HelpButton__btn2___1iYsn a {\n      color: #fff; }\n  .HelpButton__menu___3-P-2 li.HelpButton__btn3___2V0Nb {\n    background-color: #242424;\n    transition: background-color 0.12s, transform 0.12s cubic-bezier(0.2, 0.7, 0.5, 1) 80ms, opacity 0.12s cubic-bezier(0.2, 0.7, 0.5, 1) 80ms, bottom 0.12s cubic-bezier(0.2, 0.7, 0.5, 1) 80ms; }\n    .HelpButton__menu___3-P-2 li.HelpButton__btn3___2V0Nb:hover {\n      background-color: #3b3b3b; }\n    .HelpButton__menu___3-P-2 li.HelpButton__btn3___2V0Nb a {\n      color: #fff; }\n  .HelpButton__menu___3-P-2 li.HelpButton__show___3Y5m5 {\n    opacity: 1;\n    transform: scale(1);\n    pointer-events: all; }\n",""]),t.locals={container:"HelpButton__container___hqLkB",button:"HelpButton__button___31ZHt",icon:"HelpButton__icon___UYWGy",show:"HelpButton__show___3Y5m5",menu:"HelpButton__menu___3-P-2",btn1:"HelpButton__btn1___3p7_r",btn2:"HelpButton__btn2___1iYsn",btn3:"HelpButton__btn3___2V0Nb"}},907:function(e,t,n){var o=n(906);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},908:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=s(n(1)),a=(s(n(0)),n(13)),l=s(n(3)),i=s(n(907));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={shown:!1},o.toggleShown=function(){o.setState({shown:!o.state.shown})},c(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"render",value:function(){var e=this,t=this.state.shown?38:18,n=function(t){return(0,l.default)(i.default.link,i.default[t],u({},i.default.show,e.state.shown))},o=function(t){var n;return(0,l.default)("icon","material-icons",(u(n={},i.default.icon,!0),u(n,i.default.show,t?e.state.shown:!e.state.shown),n))},s=r.default.createElement(a.Tooltip,{id:"community-tooltip"},"Slack ",r.default.createElement("strong",null,"Community")),c=r.default.createElement(a.Tooltip,{id:"documentation-tooltip"},"Official ",r.default.createElement("strong",null,"Documentation")),d=r.default.createElement(a.Tooltip,{id:"tutorials-tooltip"},"Watch our ",r.default.createElement("strong",null,"tutorials"));return r.default.createElement("div",{className:i.default.container},r.default.createElement("div",{className:i.default.button,onClick:this.toggleShown},r.default.createElement("i",{className:o(!1)},"forum"),r.default.createElement("i",{className:o(!0)},"close")),r.default.createElement("div",{className:i.default.menu},r.default.createElement("ul",null,r.default.createElement("li",{className:n("btn1"),style:{bottom:t+0+"px"}},r.default.createElement(a.OverlayTrigger,{placement:"left",overlay:s},r.default.createElement("a",{href:"https://slack.botpress.io",target:"_blank"},r.default.createElement("i",{className:"icon material-icons"},"group")))),r.default.createElement("li",{className:n("btn2"),style:{bottom:t+60+"px"}},r.default.createElement(a.OverlayTrigger,{placement:"left",overlay:c},r.default.createElement("a",{href:"https://botpress.io/docs",target:"_blank"},r.default.createElement("i",{className:"icon material-icons"},"book")))),r.default.createElement("li",{className:n("btn3"),style:{bottom:t+120+"px"}},r.default.createElement(a.OverlayTrigger,{placement:"left",overlay:d},r.default.createElement("a",{href:"https://www.youtube.com/watch?v=HTpUmDz9kRY",target:"_blank"},r.default.createElement("i",{className:"icon material-icons"},"video_library")))))))}}]),t}();t.default=d},909:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".SidebarFooter__bottomInformation___2BwAg {\n  z-index: 100;\n  height: 140px;\n  width: 200px;\n  color: #58d1b0;\n  font-size: 12px;\n  position: fixed;\n  bottom: 0px;\n  text-align: left;\n  background: rgba(36, 36, 36, 0.5);\n  background: -webkit-gradient(left bottom, left top, color-stop(60%, rgba(36, 36, 36, 0)), color-stop(100%, rgba(36, 36, 36, 0)));\n  background: linear-gradient(to top, #242424 60%, rgba(36, 36, 36, 0) 100%); }\n  .SidebarFooter__bottomInformation___2BwAg .SidebarFooter__innerFooter___BzH-- {\n    border-top: 1px solid #565656;\n    background-color: #242424;\n    position: absolute;\n    bottom: 0px;\n    width: 100%;\n    opacity: 1;\n    padding-top: 10px;\n    padding-left: 20px;\n    padding-bottom: 10px; }\n  .SidebarFooter__bottomInformation___2BwAg .SidebarFooter__license___3Ptwu {\n    margin-bottom: 5px;\n    display: block; }\n    .SidebarFooter__bottomInformation___2BwAg .SidebarFooter__license___3Ptwu:hover {\n      color: #58d1b0; }\n  .SidebarFooter__bottomInformation___2BwAg .SidebarFooter__unlicensed___xoJ-G {\n    color: #d84744;\n    font-weight: bold; }\n  .SidebarFooter__bottomInformation___2BwAg a:hover {\n    color: #58d1b0; }\n  .SidebarFooter__bottomInformation___2BwAg .SidebarFooter__name___l8UmJ {\n    font-size: 16px;\n    color: #c7c7c7; }\n  .SidebarFooter__bottomInformation___2BwAg .SidebarFooter__production___1XBwN {\n    margin-bottom: 10px; }\n  .SidebarFooter__bottomInformation___2BwAg .SidebarFooter__logo___ZCT6J {\n    margin: 20px 0 10px 15px !important;\n    padding: 3px; }\n    .SidebarFooter__bottomInformation___2BwAg .SidebarFooter__logo___ZCT6J img {\n      width: 110px; }\n  .SidebarFooter__bottomInformation___2BwAg .SidebarFooter__progressBar___1ox-D {\n    height: 8px;\n    border: solid 1px #878787;\n    margin-right: 20px;\n    margin-bottom: 5px; }\n    .SidebarFooter__bottomInformation___2BwAg .SidebarFooter__progressBar___1ox-D .SidebarFooter__used___46WWO {\n      background-color: #58d1b0;\n      height: 100%; }\n    .SidebarFooter__bottomInformation___2BwAg .SidebarFooter__progressBar___1ox-D .SidebarFooter__warning___2P58i {\n      background-color: #fffd77; }\n    .SidebarFooter__bottomInformation___2BwAg .SidebarFooter__progressBar___1ox-D .SidebarFooter__urgent___fYOrT {\n      background-color: #fea464; }\n    .SidebarFooter__bottomInformation___2BwAg .SidebarFooter__progressBar___1ox-D .SidebarFooter__reached___1u-Dx {\n      background-color: #f86768; }\n  .SidebarFooter__bottomInformation___2BwAg .SidebarFooter__status___3dywB .SidebarFooter__dot___1auhw {\n    background-color: #21cf9e;\n    display: inline-block;\n    height: 6px;\n    width: 6px;\n    border-radius: 50%;\n    margin-bottom: 1px;\n    margin-right: 4px; }\n  .SidebarFooter__bottomInformation___2BwAg .SidebarFooter__status___3dywB .SidebarFooter__reached___1u-Dx {\n    background-color: #d84744; }\n  .SidebarFooter__bottomInformation___2BwAg .SidebarFooter__buy___2WOHP {\n    font-size: 14px;\n    font-weight: 400;\n    color: #c7c7c7;\n    display: block;\n    margin-top: 5px; }\n",""]),t.locals={bottomInformation:"SidebarFooter__bottomInformation___2BwAg",innerFooter:"SidebarFooter__innerFooter___BzH--",license:"SidebarFooter__license___3Ptwu",unlicensed:"SidebarFooter__unlicensed___xoJ-G",name:"SidebarFooter__name___l8UmJ",production:"SidebarFooter__production___1XBwN",logo:"SidebarFooter__logo___ZCT6J",progressBar:"SidebarFooter__progressBar___1ox-D",used:"SidebarFooter__used___46WWO",warning:"SidebarFooter__warning___2P58i",urgent:"SidebarFooter__urgent___fYOrT",reached:"SidebarFooter__reached___1u-Dx",status:"SidebarFooter__status___3dywB",dot:"SidebarFooter__dot___1auhw",buy:"SidebarFooter__buy___2WOHP"}},91:function(e,t,n){var o=n(648);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},910:function(e,t,n){var o=n(909);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},911:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=f(n(1)),a=f(n(0)),l=n(46),i=n(21),s=n(69),u=f(n(3)),c=f(n(9)),d=n(16);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(61);var m=n(910),h=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=_(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.openLicenseComponent=function(){o.props.toggleLicenseModal()},o.openAbout=function(){o.props.toggleAboutModal()},_(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"renderProgressBar",value:function(){var e,t=this.props.license.limit,n=(0,u.default)(m.progressBar,"bp-progress"),o=t&&t.get("progress"),a=(0,u.default)(m.used,"bp-used",(p(e={},m.warning,o>=.75),p(e,"bp-warning",o>=.75),p(e,m.urgent,o>=.9),p(e,"bp-urgent",o>=.9),p(e,m.reached,o>=1),p(e,"bp-reached",o>=1),e)),l=t&&100*t.get("progress")+"%";t&&t.get("reached")&&(l="100%");var i={width:l};return t&&t.get("progress")?r.default.createElement("div",{className:n},r.default.createElement("div",{style:i,className:a})):null}},{key:"renderStatusDiv",value:function(e){var t,n=this.props.license.limit,o=(0,u.default)(m.status,"bp-status"),a=(0,u.default)(m.dot,"bp-dot",(p(t={},m.reached,n&&n.get("reached")),p(t,"bp-reached",n&&n.get("reached")),t));return r.default.createElement("div",{className:o},r.default.createElement("div",{className:a}),e)}},{key:"renderLicenseStatus",value:function(){var e=this.props.license.limit;if(e&&e.get("message"))return this.renderStatusDiv(e.get("message"));var t=this.props.license.date;if(t){var n="Valid until "+(0,c.default)(t).format("MMM Do YYYY");return this.renderStatusDiv(n)}return null}},{key:"renderBuyLink",value:function(){var e=this.props.license.limit,t=this.props.license.licensed;if(e&&e.get("reached")||!t){var n=(0,u.default)(m.buy,"bp-buy");return r.default.createElement("a",{className:n,href:"https://botpress.io"},"Buy a license")}return null}},{key:"renderLicense",value:function(){var e=this.props.license.licensed,t=e?this.props.license.name:"Unlicensed",n=(0,u.default)(m.license,"bp-edition-license",p({},m.unlicensed,!e));return r.default.createElement(s.Link,{className:n,to:"#",title:"License",onClick:this.openLicenseComponent},t)}},{key:"renderAllLicenseElements",value:function(){return window.AUTH_ENABLED?r.default.createElement("div",null,this.renderLicense(),this.renderProgressBar(),this.renderLicenseStatus(),this.renderBuyLink()):null}},{key:"render",value:function(){if(this.props.viewMode>=1)return null;var e=window.DEV_MODE?"in development":"in production",t=this.props.botInformation&&this.props.botInformation.name,n=(0,u.default)(m.bottomInformation,"bp-sidebar-footer"),o=(0,u.default)(m.innerFooter,"bp-inner-footer"),a=(0,u.default)(m.name,"bp-name"),l=(0,u.default)(m.production,"bp-production"),i=(0,u.default)(m.about,"bp-about");return r.default.createElement("div",{className:n},r.default.createElement("div",{className:o},r.default.createElement("div",{className:a},t),r.default.createElement("div",{className:l},e),this.renderAllLicenseElements(),r.default.createElement(s.Link,{className:i,to:"#",title:"About",onClick:this.openAbout},"About Botpress")))}}]),t}();h.contextTypes={router:a.default.object.isRequired},t.default=(0,i.connect)(function(e){return{botInformation:e.bot,license:e.license,viewMode:e.ui.viewMode}},function(e){return(0,l.bindActionCreators)({toggleLicenseModal:d.toggleLicenseModal,toggleAboutModal:d.toggleAboutModal},e)})(h)},912:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".Sidebar__sidebarReact___3LyJe {\n  bottom: 0px !important; }\n\n.Sidebar__sidebar___2zqXw {\n  background-color: #242424;\n  color: #aaa;\n  height: 100%;\n  max-width: 200px; }\n\n.Sidebar__sidebar___2zqXw ul {\n  background-color: #242424; }\n\n.Sidebar__sidebar___2zqXw ul li {\n  font-size: 16px;\n  line-height: 44px;\n  border-top: 1px solid #2d2d2d; }\n  .Sidebar__sidebar___2zqXw ul li a {\n    padding: 0 15px; }\n    .Sidebar__sidebar___2zqXw ul li a .icon {\n      display: inline;\n      vertical-align: middle;\n      color: #58d1b0;\n      padding: 0 10px 0 0;\n      font-size: 18px; }\n\n.Sidebar__sidebar___2zqXw ul li a {\n  color: #aaa; }\n  .Sidebar__sidebar___2zqXw ul li a:hover, .Sidebar__sidebar___2zqXw ul li a:focus, .Sidebar__sidebar___2zqXw ul li a:active {\n    background-color: #111111; }\n\n.Sidebar__active___1D-kR {\n  background-color: #111111;\n  border-left: 5px solid #58d1b0; }\n\n.Sidebar__customIcon___3ao4_ {\n  width: 28px;\n  height: 18px;\n  padding-right: 10px; }\n\n.Sidebar__empty___1D1re {\n  height: 120px; }\n",""]),t.locals={sidebarReact:"Sidebar__sidebarReact___3LyJe",sidebar:"Sidebar__sidebar___2zqXw",active:"Sidebar__active___1D-kR",customIcon:"Sidebar__customIcon___3ao4_",empty:"Sidebar__empty___1D1re"}},913:function(e,t,n){var o=n(912);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},985:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(1),l=(o=a)&&o.__esModule?o:{default:o},i=n(244);function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={hasPending:!1},o.fetch=function(){(0,i.fetchStatus)().then(function(e){var t=e&&!!Object.keys(e).length;o.setState({hasPending:t})}).catch(function(){})},s(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"componentDidMount",value:function(){this.fetch(),this.checkInterval=setInterval(this.fetch,5e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.checkInterval)}},{key:"render",value:function(){return this.state.hasPending&&l.default.createElement("span",null," ",l.default.createElement("i",{className:"icon material-icons",title:"You have unsynced changes, see how to sync it."},"warning"))}}]),t}();t.default=u},986:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".SidebarHeader__logo___2S7yw {\n  margin: 20px 0 10px 15px !important;\n  padding: 3px; }\n  .SidebarHeader__logo___2S7yw img {\n    width: 110px; }\n\n.SidebarHeader__header___YVZ2E {\n  width: 200px;\n  max-width: 200px;\n  background-color: #242424;\n  color: #aaa; }\n",""]),t.locals={logo:"SidebarHeader__logo___2S7yw",header:"SidebarHeader__header___YVZ2E"}},987:function(e,t,n){var o=n(986);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},988:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=c(r),l=n(13),i=c(n(3)),s=c(n(384)),u=c(n(987));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"render",value:function(){var e=(0,i.default)(u.default.header,s.default.navbar,"bp-sidebar-header");return a.default.createElement(l.Navbar,{inverse:!0,className:e},a.default.createElement(l.Navbar.Header,null,a.default.createElement(l.Navbar.Brand,null,a.default.createElement("a",{href:"/",className:(0,i.default)(u.default.logo,"bp-logo")},a.default.createElement("img",{src:"/img/logo.png",alt:"Botpress Logo"}))),a.default.createElement(l.Navbar.Toggle,null)))}}]),t}();t.default=d},991:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=p(n(1)),a=p(n(0)),l=n(21),i=n(69),s=p(n(3)),u=p(n(990)),c=p(n(988)),d=p(n(985)),f=p(n(61));function p(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=n(913),h=[{name:"Dashboard",path:"/dashboard",rule:{res:"bot.information",op:"read"},icon:"dashboard"},window.GHOST_ENABLED&&{name:"Version Control",path:"version-control",rule:{res:"bot.ghost_content",op:"read"},icon:"content_copy",renderSuffix:function(){return r.default.createElement(d.default,null)}},{name:"Content",path:"/content",rule:{res:"bot.content",op:"read"},icon:"description"},{name:"Flows",path:"/flows",rule:{res:"bot.flows",op:"read"},icon:"device_hub"},{name:"Middleware",path:"/middleware",rule:{res:"bot.middleware.list",op:"read"},icon:"settings"}].filter(Boolean),y=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return n=o=_(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),o.state={sidebarOpen:!1,sidebarDocked:!1},o.onSetSidebarOpen=function(e){o.setState({sidebarOpen:e})},o.mediaQueryChanged=function(){o.setState({sidebarDocked:o.state.mql.matches})},o.renderModuleItem=function(e){var t="/modules/"+e.name,n="/img/modules/"+e.name+".png",o="custom"===e.menuIcon?r.default.createElement("img",{className:(0,s.default)(m.customIcon,"bp-custom-icon"),src:n}):r.default.createElement("i",{className:"icon material-icons"},e.menuIcon);return r.default.createElement("li",{key:"menu_module_"+e.name},r.default.createElement(i.NavLink,{to:t,title:e.menuText,activeClassName:m.active},o,r.default.createElement("span",null,e.menuText)))},o.renderBasicItem=function(e){var t=e.name,n=e.path,a=e.rule,l=e.icon,s=e.renderSuffix;return r.default.createElement(f.default,{user:o.props.user,res:a.res,op:a.op,key:t},r.default.createElement("li",{key:n},r.default.createElement(i.NavLink,{to:n,title:t,activeClassName:m.active},r.default.createElement("i",{className:"icon material-icons"},l),t,s&&s())))},_(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"componentWillMount",value:function(){var e=window.matchMedia("(min-width: 800px)");e.addListener(this.mediaQueryChanged),this.setState({mql:e,sidebarDocked:e.matches})}},{key:"componentWillUnmount",value:function(){this.state.mql.removeListener(this.mediaQueryChanged)}},{key:"render",value:function(){var e=this.props.modules.filter(function(e){return!e.noInterface}).map(this.renderModuleItem),t=(0,s.default)(m.empty,"bp-empty"),n=r.default.createElement("div",{className:(0,s.default)(m.sidebar,"bp-sidebar")},r.default.createElement(c.default,null),r.default.createElement("ul",{className:"nav"},h.map(this.renderBasicItem),e,r.default.createElement("li",{className:t}))),o=this.props.viewMode<1;return r.default.createElement(u.default,{sidebarClassName:(0,s.default)(m.sidebarReact,"bp-sidebar-react"),sidebar:n,open:o,docked:o,shadow:!1,transitions:!1,styles:{sidebar:{zIndex:20}},onSetOpen:this.onSetSidebarOpen},this.props.children)}}]),t}();y.contextTypes={router:a.default.object.isRequired},t.default=(0,l.connect)(function(e){return{user:e.user,viewMode:e.ui.viewMode,modules:e.modules}})(y)},992:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".Header__navbar___YUtxs {\n  border: none;\n  margin-bottom: 0;\n  background-color: #ffffff;\n  color: #434343; }\n  .Header__navbar___YUtxs .navbar-nav a:hover, .Header__navbar___YUtxs .navbar-nav a:active, .Header__navbar___YUtxs .navbar-nav a:focus, .Header__navbar___YUtxs .navbar-nav a:visited {\n    background: none !important;\n    box-shadow: none !important; }\n  .Header__navbar___YUtxs .open .material-icons {\n    color: #434343 !important; }\n  .Header__navbar___YUtxs .dropdown-menu a {\n    width: 100%;\n    text-decoration: none; }\n\n.navbar-default .navbar-nav > .open > a {\n  background-color: #ffffff !important; }\n\n.Header__app-navbar___2NzX7 {\n  position: fixed;\n  right: 0;\n  width: 100%;\n  z-index: 10;\n  border-bottom-style: solid;\n  border-width: 1px;\n  border-color: #eeeeee;\n  border-radius: 0; }\n  .Header__app-navbar___2NzX7 li a {\n    color: #999 !important; }\n    .Header__app-navbar___2NzX7 li a:hover {\n      color: #434343 !important; }\n\n.Header__navbar___YUtxs .container {\n  width: 100%; }\n\n.Header__slack___2RSAt img {\n  opacity: 0.8;\n  width: 17px;\n  height: 17px;\n  cursor: pointer; }\n  .Header__slack___2RSAt img:hover {\n    opacity: 1; }\n\n.Header__account___1x6oO {\n  padding-top: 9px !important;\n  padding-bottom: 0px !important;\n  border: none; }\n  .Header__account___1x6oO a {\n    padding: 0px !important; }\n  .Header__account___1x6oO img {\n    height: 32px;\n    width: 32px;\n    border-radius: 50%; }\n  .Header__account___1x6oO .material-icons {\n    font-size: 32px; }\n    .Header__account___1x6oO .material-icons:hover {\n      color: #434343 !important; }\n  .Header__account___1x6oO .dropdown-menu a {\n    padding: 5px 10px !important;\n    width: 100%;\n    display: block;\n    text-decoration: none; }\n",""]),t.locals={navbar:"Header__navbar___YUtxs","app-navbar":"Header__app-navbar___2NzX7",slack:"Header__slack___2RSAt",account:"Header__account___1x6oO"}},993:function(e,t,n){(t=e.exports=n(15)(!1)).push([e.i,".hubStyle__markAsReadButton___10ECK {\n  top: 22px;\n  right: 12px; }\n\n.hubStyle__item___2bssI {\n  padding-top: 4px;\n  width: 400px;\n  border-left: 4px solid #e2e2e2; }\n\n.hubStyle__item-unread___1zM1I.hubStyle__level-info___2c3jB {\n  background-color: #f6f8ff;\n  border-left: 4px solid #aeccee; }\n\n.hubStyle__item-unread___1zM1I.hubStyle__level-error___1bMIT {\n  background-color: #fff7f6;\n  border-left: 4px solid #eeb2ae; }\n\n.hubStyle__item-unread___1zM1I.hubStyle__level-success___plc0G {\n  background-color: #f6fff7;\n  border-left: 4px solid #aeeeb6; }\n\n.hubStyle__topMenu___1Vqke {\n  padding: 10px 12px;\n  border-bottom: 1px solid #d1d1d1;\n  color: #5f5f5f;\n  font-size: 13px; }\n\n.hubStyle__dropdown___1Hf-W {\n  padding: 0; }\n  .hubStyle__dropdown___1Hf-W.open > a {\n    background-color: #f1f1f1 !important; }\n\n.hubStyle__message___f7ZP4 {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap; }\n\n.hubStyle__empty___pY-3M {\n  width: 400px;\n  padding: 20px;\n  font-size: 15px;\n  text-align: center; }\n\n.hubStyle__invisible___1WEZR {\n  opacity: 0; }\n\n.hubStyle__icon___2W2Ia {\n  width: 16px;\n  height: 16px;\n  font-size: 16px; }\n",""]),t.locals={markAsReadButton:"hubStyle__markAsReadButton___10ECK",item:"hubStyle__item___2bssI","item-unread":"hubStyle__item-unread___1zM1I","level-info":"hubStyle__level-info___2c3jB","level-error":"hubStyle__level-error___1bMIT","level-success":"hubStyle__level-success___plc0G",topMenu:"hubStyle__topMenu___1Vqke",dropdown:"hubStyle__dropdown___1Hf-W",message:"hubStyle__message___f7ZP4",empty:"hubStyle__empty___pY-3M",invisible:"hubStyle__invisible___1WEZR",icon:"hubStyle__icon___2W2Ia"}},994:function(e,t,n){var o=n(993);"string"==typeof o&&(o=[[e.i,o,""]]),n(14)(o,{}),o.locals&&(e.exports=o.locals)},995:function(e,t,n){var o={"./af":507,"./af.js":507,"./ar":506,"./ar-dz":505,"./ar-dz.js":505,"./ar-kw":504,"./ar-kw.js":504,"./ar-ly":503,"./ar-ly.js":503,"./ar-ma":502,"./ar-ma.js":502,"./ar-sa":501,"./ar-sa.js":501,"./ar-tn":500,"./ar-tn.js":500,"./ar.js":506,"./az":499,"./az.js":499,"./be":498,"./be.js":498,"./bg":497,"./bg.js":497,"./bm":496,"./bm.js":496,"./bn":495,"./bn.js":495,"./bo":494,"./bo.js":494,"./br":493,"./br.js":493,"./bs":492,"./bs.js":492,"./ca":491,"./ca.js":491,"./cs":490,"./cs.js":490,"./cv":489,"./cv.js":489,"./cy":488,"./cy.js":488,"./da":487,"./da.js":487,"./de":486,"./de-at":485,"./de-at.js":485,"./de-ch":484,"./de-ch.js":484,"./de.js":486,"./dv":483,"./dv.js":483,"./el":482,"./el.js":482,"./en-au":481,"./en-au.js":481,"./en-ca":480,"./en-ca.js":480,"./en-gb":479,"./en-gb.js":479,"./en-ie":478,"./en-ie.js":478,"./en-il":477,"./en-il.js":477,"./en-nz":476,"./en-nz.js":476,"./eo":475,"./eo.js":475,"./es":474,"./es-do":473,"./es-do.js":473,"./es-us":472,"./es-us.js":472,"./es.js":474,"./et":471,"./et.js":471,"./eu":470,"./eu.js":470,"./fa":469,"./fa.js":469,"./fi":468,"./fi.js":468,"./fo":467,"./fo.js":467,"./fr":466,"./fr-ca":465,"./fr-ca.js":465,"./fr-ch":464,"./fr-ch.js":464,"./fr.js":466,"./fy":463,"./fy.js":463,"./gd":462,"./gd.js":462,"./gl":461,"./gl.js":461,"./gom-latn":460,"./gom-latn.js":460,"./gu":459,"./gu.js":459,"./he":458,"./he.js":458,"./hi":457,"./hi.js":457,"./hr":456,"./hr.js":456,"./hu":455,"./hu.js":455,"./hy-am":454,"./hy-am.js":454,"./id":453,"./id.js":453,"./is":452,"./is.js":452,"./it":451,"./it.js":451,"./ja":450,"./ja.js":450,"./jv":449,"./jv.js":449,"./ka":448,"./ka.js":448,"./kk":447,"./kk.js":447,"./km":446,"./km.js":446,"./kn":445,"./kn.js":445,"./ko":444,"./ko.js":444,"./ky":443,"./ky.js":443,"./lb":442,"./lb.js":442,"./lo":441,"./lo.js":441,"./lt":440,"./lt.js":440,"./lv":439,"./lv.js":439,"./me":438,"./me.js":438,"./mi":437,"./mi.js":437,"./mk":436,"./mk.js":436,"./ml":435,"./ml.js":435,"./mn":434,"./mn.js":434,"./mr":433,"./mr.js":433,"./ms":432,"./ms-my":431,"./ms-my.js":431,"./ms.js":432,"./mt":430,"./mt.js":430,"./my":429,"./my.js":429,"./nb":428,"./nb.js":428,"./ne":427,"./ne.js":427,"./nl":426,"./nl-be":425,"./nl-be.js":425,"./nl.js":426,"./nn":424,"./nn.js":424,"./pa-in":423,"./pa-in.js":423,"./pl":422,"./pl.js":422,"./pt":421,"./pt-br":420,"./pt-br.js":420,"./pt.js":421,"./ro":419,"./ro.js":419,"./ru":418,"./ru.js":418,"./sd":417,"./sd.js":417,"./se":416,"./se.js":416,"./si":415,"./si.js":415,"./sk":414,"./sk.js":414,"./sl":413,"./sl.js":413,"./sq":412,"./sq.js":412,"./sr":411,"./sr-cyrl":410,"./sr-cyrl.js":410,"./sr.js":411,"./ss":409,"./ss.js":409,"./sv":408,"./sv.js":408,"./sw":407,"./sw.js":407,"./ta":406,"./ta.js":406,"./te":405,"./te.js":405,"./tet":404,"./tet.js":404,"./tg":403,"./tg.js":403,"./th":402,"./th.js":402,"./tl-ph":401,"./tl-ph.js":401,"./tlh":400,"./tlh.js":400,"./tr":399,"./tr.js":399,"./tzl":398,"./tzl.js":398,"./tzm":397,"./tzm-latn":396,"./tzm-latn.js":396,"./tzm.js":397,"./ug-cn":395,"./ug-cn.js":395,"./uk":394,"./uk.js":394,"./ur":393,"./ur.js":393,"./uz":392,"./uz-latn":391,"./uz-latn.js":391,"./uz.js":392,"./vi":390,"./vi.js":390,"./x-pseudo":389,"./x-pseudo.js":389,"./yo":388,"./yo.js":388,"./zh-cn":387,"./zh-cn.js":387,"./zh-hk":386,"./zh-hk.js":386,"./zh-tw":385,"./zh-tw.js":385};function r(e){var t=a(e);return n(t)}function a(e){var t=o[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(o)},r.resolve=a,e.exports=r,r.id=995},996:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=d(n(1)),a=n(21),l=n(13),i=d(n(11)),s=d(n(3)),u=d(n(508)),c=d(n(994));function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{itemComponent:l.MenuItem,renderDivider:!0,styles:c.default}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),o(t,[{key:"renderMessage",value:function(e){return r.default.createElement("div",{className:(0,s.default)(c.default.message,"bp-hub-message")},e)}},{key:"renderEmptyPanel",value:function(){return r.default.createElement(l.MenuItem,{header:!0,className:c.default.empty},r.default.createElement("div",null,"You have no notifications !"))}},{key:"render",value:function(){var e=this.props.notifications||[],t=0===e.length,n=i.default.take(e,6),o=i.default.filter(e,{read:!1}),a=o.length,u=i.default.some(o,function(e){return"error"===e.level}),d=(0,s.default)("label",{"label-danger":u,"label-default":!u,invisible:0===a}),f=r.default.createElement("span",null,r.default.createElement("em",{className:"glyphicon glyphicon-bell"}),r.default.createElement("span",{className:d},a));return r.default.createElement(l.NavDropdown,{id:"notificationsDropdown",noCaret:!a,title:f,className:(0,s.default)(c.default.dropdown,"bp-notifications-dropdown")},r.default.createElement(l.MenuItem,{header:!0,className:(0,s.default)(c.default.topMenu,"bp-top-menu")},r.default.createElement("span",null,r.default.createElement("strong",null,"Notifications"),"  ·   total of ",e.length),r.default.createElement("div",{className:"pull-right"},r.default.createElement("a",{href:"#",onClick:this.markAllAsRead},"Mark all as read"),"  ·  ",r.default.createElement("a",{href:"/notifications"},"Show all"))),t&&this.renderEmptyPanel(),this.renderMenuItems(n))}}]),t}();t.default=(0,a.connect)(function(e){return{notifications:e.notifications}})(f)},997:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=_(n(1)),a=n(46),l=n(21),i=n(13),s=_(n(3)),u=_(n(996)),c=n(75),d=_(n(384)),f=n(16),p=_(n(61));function _(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=o=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),o.state={loading:!0},o.handleFullscreen=function(){var e=o.props.viewMode<1?1:0;o.props.viewModeChanged(e)},m(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"renderLogoutButton",value:function(){if(!window.AUTH_ENABLED)return null;var e=this.props.user.avatar_url,t=e?r.default.createElement("img",{src:e}):r.default.createElement("i",{className:"material-icons"},"account_circle");return r.default.createElement(i.NavDropdown,{className:d.default.account,noCaret:!0,title:t,id:"account-button"},r.default.createElement(i.MenuItem,{header:!0},"Signed in as"),r.default.createElement(i.MenuItem,{disabled:!0},"✉️ ",this.props.user.email),r.default.createElement(i.MenuItem,{disabled:!0},"👤 ",this.props.user.username),r.default.createElement(i.MenuItem,{divider:!0}),r.default.createElement(i.MenuItem,{eventKey:1,onClick:c.logout},r.default.createElement("b",null,"Logout")))}},{key:"renderFullScreenButton",value:function(){return r.default.createElement("span",{className:(0,s.default)(d.default.fullScreen,"bp-full-screen")},r.default.createElement(i.Glyphicon,{glyph:"fullscreen"}))}},{key:"render",value:function(){if(this.props.viewMode>=3)return null;var e=(0,s.default)(d.default.navbar,d.default["app-navbar"],"bp-navbar"),t=this.props.customStyle["bp-navbar"];return r.default.createElement(i.Navbar,{className:e,style:t},r.default.createElement(i.Navbar.Collapse,null,r.default.createElement(i.Nav,{pullRight:!0},r.default.createElement(i.NavItem,{onClick:this.handleFullscreen},this.renderFullScreenButton()),r.default.createElement(p.default,{user:this.props.user,res:"bot.logs",op:"read"},r.default.createElement(i.NavItem,{href:"/logs"},r.default.createElement(i.Glyphicon,{glyph:"list-alt"}))),r.default.createElement(p.default,{user:this.props.user,res:"bot.notifications",op:"read"},r.default.createElement(u.default,null)),this.renderLogoutButton()),r.default.createElement(i.Nav,{pullRight:!0,className:"bp-navbar-module-buttons"})))}}]),t}();t.default=(0,l.connect)(function(e){return{user:e.user,viewMode:e.ui.viewMode,customStyle:e.ui.customStyle}},function(e){return(0,a.bindActionCreators)({viewModeChanged:f.viewModeChanged},e)})(h)}});
//# sourceMappingURL=web.729e9680ac37ff307159.js.map